webpackJsonp([8],{566:function(t,e,i){"use strict";function s(){this.defaultAttrs({launchServiceSelector:".js-launch-service",matchesHref:"/who_to_follow/matches",redirectOnSuccess:!0}),this.importSuccess=function(){this.trigger("uiOpenImportLoadingDialog"),this.startPolling()},this.dialogCancelled=function(){this.stopPolling()},this.startPolling=function(){this.pollingCount=0,this.interval=window.setInterval(this.checkForContacts.bind(this),3e3)},this.stopPolling=function(){this.interval&&(window.clearInterval(this.interval),this.interval=null),this.trigger("uiCloseImportLoadingDialog")},this.checkForContacts=function(){this.pollingCount++>15?(this.trigger("uiShowError",{message:"Loading seems to be taking a while. Please wait a moment and try again."}),this.stopPolling()):this.trigger("uiWantsContactImportStatus")},this.hasStatus=function(t,e){e.done&&(this.stopPolling(),e.error?this.trigger("uiShowError",{message:e.message}):this.attr.redirectOnSuccess?this.trigger("uiNavigate",{href:this.attr.matchesHref}):this.trigger("uiWantsContactImportMatches"))},this.after("initialize",function(){this.on(document,"uiOauthImportSuccess",this.importSuccess),this.on(document,"uiOauthWindows10ImportSuccess",this.importSuccess),this.on(document,"uiImportLoadingDialogCancelled",this.dialogCancelled),this.on(document,"dataContactImportStatusSuccess",this.hasStatus)}),this.after("teardown",function(){this.stopPolling()})}var o=i(111),n=(i(123),i(567));t.exports=o(s,n)},567:function(t,e,i){(function(e){"use strict";function s(){this.launchService=function(t){var i=e(t.target).closest(this.attr.launchServiceSelector);this.oauthPopup({url:i.data("url"),triggerEvent:!0,width:i.data("width"),height:i.data("height")});var s={service:i.data("service")};this.attr.otherServicesSelector&&(s.section=0===i.parents(this.attr.otherServicesSelector).length?"cta":"other_services"),this.trigger("uiImportServiceLaunched",s)},this.importDeniedFailure=function(){this.trigger("uiShowError",{message:"You denied Twitter's access to your contact information."})},this.importMissingFailure=function(){this.trigger("uiShowError",{message:"An error occurred validating your credentials."})},this.after("initialize",function(){this.oauthPopup=o,this.on(document,"uiOauthImportDenied",this.importDeniedFailure),this.on(document,"uiOauthImportMissing",this.importMissingFailure),this.on("click",{launchServiceSelector:this.launchService})})}var o=(i(123),i(568));t.exports=s}).call(e,i(10))},568:function(t,e,i){(function(e){"use strict";t.exports=function(t){var i=t.url,s=i.indexOf("?")===-1?"?":"&";t.callbackUrl?i+=s+"callback_hash="+encodeURIComponent(t.callbackUrl):t.triggerEvent&&(i+=s+"trigger_event=true");var o=e(window),n=window.screenY||window.screenTop||0,a=window.screenX||window.screenLeft||0,r=(o.height()-500)/2+n,l=(o.width()-500)/2+a;t={width:t.width?t.width:500,height:t.height?t.height:500,top:r,left:l,toolbar:"no",location:"yes"};var h=e.param(t).replace(/&/g,",");window.open(i,"twitter_oauth",h).focus()}}).call(e,i(10))},814:function(t,e,i){"use strict";function s(t,e){o(e),m.attachTo(document,e),f.attachTo(document),n.attachTo(document,e),g.attachTo(document,e),d.attachTo(document,e),p.attachTo(document,e),w.attachTo(document,e),e.excludeExpandingTweets||c.attachTo(t,e);var i=".js-new-items-bar-container";u.attachTo(i,e),e.excludeUserActions||v.attachTo(t,S.merge(e,{genericItemSelector:".js-stream-item"})),a.attachTo(document),r.attachTo(document),l.attachTo(document),h.attachTo(document)}var o=i(815),n=i(819),a=i(820),r=i(821),l=i(822),h=i(823),c=i(824),d=i(830),u=i(831),p=i(374),m=i(833),f=i(848),g=i(849),v=i(850),S=i(126),w=i(852);t.exports=s},815:function(t,e,i){"use strict";function s(t){o.attachTo(document,t),a.attachTo(document,t),n.attachTo(r,t,{initialFocusSelector:".modal-close"})}var o=i(816),n=i(817),a=i(818),r="#activity-popup-dialog";t.exports=s},816:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}var o=i(111),n=i(240);t.exports=o(s,n)},817:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,s=e.contentId,o=e.component;if(this.attr.eventData=n.merge(this.attr.eventData,{scribeContext:{component:o}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[o]){this.clearContent();var a=i||"Loading...";this.setTitle(a),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===o)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:o,contentId:s})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(t,i){this.clearContent();var s=e("<p>").addClass("error").html(i.message);this.setUsers(s,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(t){t&&(this.select("activityUserCheckboxSelector").each(function(i,s){var o=e(s),n=o.closest(this.attr.accountSelector),a=n.attr("data-user-id");o.prop("checked",t.indexOf(a)<0)}.bind(this)),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector"),e=t.length===t.filter(":checked").length;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",e)},this.saveExcludedReplyUsers=function(){var t=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(t){return e(t).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:t})},this.toggleAllReplyUsers=function(t){this.select("activityUserCheckboxSelector").prop("checked",e(t.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}var o=(i(123),i(111)),n=i(126),a=i(163),r=i(440),l=i(443);t.exports=o(s,a,l,r)}).call(e,i(10))},818:function(t,e,i){"use strict";function s(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:n.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}var o=i(111),n=i(144),a=i(142);t.exports=o(s,a)},819:function(t,e,i){"use strict";function s(){this.curateTweets=function(t,e){function i(t){e.added.forEach(function(){this.scribe({component:"tweet",action:"add_to_timeline"},t)}.bind(this));var i="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:i}),this.trigger("dataTweetsCurated",t)}function s(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var o={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.addTweet=function(t,e){function i(t){var e=_("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var o={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function s(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var o={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function s(t){this.trigger("uiShowError",{message:"Error creating collection."})}var o={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=_("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function s(t){this.trigger("uiShowError",{message:"Error updating collection."})}var o={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:s.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){a.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}var o=i(111),n=i(240),a=i(136),r=i(142),_=i(123),l=o(s,n,r);t.exports=l},820:function(t,e,i){"use strict";function s(){this.updateMomentMapAndTriggerEvent=function(t){return function(e){this.momentMap=r.merge(this.momentMap,e.moment_map||{}),this.trigger(document,t,e)}.bind(this)},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?_('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.removeTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?_('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}var o=i(111),n=i(240),a=i(142),r=i(126),_=i(123);t.exports=o(s,n,a)},821:function(t,e,i){"use strict";function s(){this.createActionHandler=function(t,e){return function(i,s){this.post({url:"/i/moments/edit/"+s.moment_id+"/"+t,data:s,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}.bind(this)},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure",noAbortOnNavigate:!0})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var s=e.fileId,o=n.get(s);if(o)return this.trigger(document,"uiMediaSruInit",{fileId:s,uploadId:o.uploadId,mediaCategory:o.mediaCategory}),this.mediaSruFinalize(o).then(function(t){this.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}.bind(this)).catch(function(t){throw i(),t})},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function s(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",h.merge(t,e))}function s(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function s(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function s(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}var o=i(111),n=i(220),a=i(240),r=i(249),l=i(417),h=i(126);i(123);t.exports=o(s,a,r,l)},822:function(t,e,i){"use strict";function s(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}var o=i(111),n=i(142);t.exports=o(s,n)},823:function(t,e,i){"use strict";function s(){this.scribeTweetAction=function(t,e,i){var s=i&&i.scribeContext&&i.scribeContext.component;this.scribe({component:s,element:"moment",action:t})},this.after("initialize",function(){this.on("uiMomentMakerAddTweet",this.scribeTweetAction.bind(this,"add")),this.on("uiMomentMakerRemoveTweet",this.scribeTweetAction.bind(this,"remove")),this.on("dataMomentMakerAddTweetFailure",this.scribeTweetAction.bind(this,"add_failure")),this.scribeOnEvent("uiOpenAddToMomentDialog",{component:"add_to_moment_dialog",action:"open"})})}var o=i(111),n=i(142);t.exports=o(s,n)},824:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetSelector:".tweet",tweetFormSelector:".tweet-form",conversationModuleSelector:".conversation-module",animatedGifSelector:".animated-gif"})}var o=i(111),n=i(825),a=i(826),r=i(394),l=i(827),h=i(829),c=i(377),d=i(479);t.exports=o(s,a,l,h,r,d,c,n)},825:function(t,e,i){(function(e){"use strict";var s=i(121),o=i(138);t.exports=function(){s.mixin(this,[o]),this.getPlayableMediaEventData=function(t){var e={},i=t.find("[data-media-id]").attr("data-media-id");if(i)e.playlist_url=i,e.video_uuid=i;else{var s=t.find("[data-card-url]").attr("data-card-url");e.playlist_url=s,e.video_uuid=s}return e.video_type="video",e.card_details=JSON.stringify(e),e},this.logPlayableMediaEvents=function(t,i,s){var o=i.attr("data-tweet-id"),n=void 0;n="animated_gif"===s||"__entity_animated_gif"===s?"gif_player":"vine_player";var a=e.extend({},this.interactionData(i),this.getPlayableMediaEventData(i));this.eventsFired.view[o]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_view"},a)),this.scribeInteraction({action:"video_view",element:n},a),this.eventsFired.view[o]=!0),this.eventsFired[t][o]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_"+t},a)),this.scribeInteraction({action:t,element:n},a),this.eventsFired[t][o]=!0)},this.shouldCollectAnalytics=function(t,e){return"animated_gif"===e||t.data("has-vine")},this.onAutoplayStart=function(t){var i=e(t.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&(this.autoplayTimeout=setTimeout(function(){this.logPlayableMediaEvents("view_threshold",i,s)}.bind(this),3e3))}},this.onAutoplayStop=function(){this.autoplayTimeout&&clearTimeout(this.autoplayTimeout)},this.onTweetExpanded=function(t){var i=e(t.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&this.logPlayableMediaEvents("play_from_tap",i,s)}},this.after("initialize",function(){this.eventsFired={view:{},play_from_tap:{},view_threshold:{}},this.on("uiLOHPMediaPlay",this.onTweetExpanded),this.on("uiAutoplayMedia",this.onAutoplayStart),this.on("uiStopAutoplayingMedia",this.onAutoplayStop)})}}).call(e,i(10))},826:function(t,e,i){(function(e){"use strict";t.exports=function(){this.defaultAttrs({missingTweetsLinkSelector:"a.missing-tweets-link",missingTweetsBarSelector:".missing-tweets-bar",focalTweetSelector:".original-tweet",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",conversationTweetClass:"conversation-tweet",detachedConversationClass:"detached-conversation",expandingConversationClass:"expanding-conversation",selectedSelector:".selected-stream-item",awaitingAncestorsClass:".conversation-awaiting-ancestors"}),this.handleExpandConversationAndLoadMissingTweets=function(t){t.preventDefault();var e=this.streamItemFromEvent(t),i=this.getFocalPoint(e),s=i.data("permalink-path"),o=i.data("conversation-id");s&&this.trigger("uiNavigate",{href:s,conversation_id:o})},this.streamItemFromEvent=function(t){return e(t.target).closest(this.attr.topLevelStreamItemSelector)},this.getFocalPoint=function(t){return t.find(this.attr.focalTweetSelector)},this.getTweetId=function(t){return e(t).find(".tweet").attr("data-tweet-id")},this.notifyConversationMutated=function(t,i){var s=e(t.target),o=s.closest(this.attr.conversationModuleSelector);o.length&&this.trigger(o,"uiConversationModuleUpdated")},this.after("initialize",function(){this.on("click",{missingTweetsLinkSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiShortcutEnter",{missingTweetsBarSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiTweetInserted uiBeforeTweetRemoved",this.notifyConversationMutated)})}}).call(e,i(10))},827:function(t,e,i){(function(e){"use strict";function s(){this.getSize=function(t,e){var i=e.attr("data-width"),s=e.attr("data-height"),o=e.width(),n=s*(o/i);return{h:n,w:o}},this.createMediaElement=function(t,e,i){return new MediaElement(t,{pluginPath:o.path,flashName:"flashmediaelement.swf",loop:!0,defaultVideoHeight:e.h,defaultVideoWidth:e.w,pluginHeight:e.h,pluginWidth:e.w,success:i})},this.prepareMediaElement=function(t,e){var i=function(t){this.setCurrentTime(t,0),t.play()}.bind(this),s=this.createMediaElement(t,e,function(t){t.addEventListener("ended",function(){t&&i(t)},!1),t.addEventListener("timeupdate",function(){if("native"===s.pluginType&&t.duration<=t.currentTime){var e=function o(){i(t),t.removeEventListener("loadeddata",o)};t.addEventListener("loadeddata",e),t.load()}},!1),t.play()});return s},this.getPlayer=function(t){if(t.length){var e=t.find(this.attr.animatedGifSelector);if(e.length)return this.players[t.attr("data-tweet-id")]}return null},this.setCurrentTime=function(t,e){"native"===t.pluginType?t.currentTime=e:t.setCurrentTime(e)},this.autoplayGif=function(t){this.startGif(e(t.target).closest(".tweet"))},this.startGifOnEvent=function(t){this.startGif(e(t.target))},this.startGif=function(t){if(t=t.filter(":not(.animated-gif-playing)").has(this.attr.animatedGifSelector),t.length){var e=t.attr("data-tweet-id");if(!this.players[e]){var i=t.find(this.attr.animatedGifSelector),s=i.find("[video-src]");s.attr("src",s.attr("video-src"));var o=i.get(0),n=this.getSize(t,i);this.players[e]=this.prepareMediaElement(o,n),this.players[e].load()}t.addClass("animated-gif-playing"),setTimeout(function(){this.players[e]&&this.players[e].play&&this.players[e].play()}.bind(this),1)}},this.stopAutoplayingGif=function(t){this.stopGif(e(t.target).closest(".tweet"))},this.stopGifOnEvent=function(t){this.stopGif(e(t.target))},this.stopGif=function(t){var e=t.hasClass("animated-gif-playing")&&this.getPlayer(t);e&&(t.removeClass("animated-gif-playing"),t.find(".me-plugin").remove(),e.pause&&e.pause())},this.pauseGif=function(t){var i=e(t.target),s=i.hasClass("animated-gif-playing")&&this.getPlayer(i);s&&s.pause&&s.pause()},this.seekGif=function(t,i){var s=e(t.target),o=s.hasClass("animated-gif-playing")&&this.getPlayer(s);if(o){var n=i.position*o.duration;isNaN(o.duration)||(this.setCurrentTime(o,Math.min(n,o.duration)),o.pause())}},this.after("initialize",function(){this.players={},this.on("uiAutoplayMedia",this.autoplayGif),this.on("uiStartGif",this.startGifOnEvent),this.on("uiStopAutoplayingMedia",this.stopAutoplayingGif),this.on("uiStopGif",this.stopGifOnEvent),this.on("uiPauseGif",this.pauseGif),this.on("uiSeekGif",this.seekGif)})}var o=i(828);t.exports=s}).call(e,i(10))},828:function(t,e){"use strict";t.exports={path:"/flash/1/"}},829:function(t,e,i){(function(e){"use strict";var s=i(156).browser(),o=i(121),n=i(138);t.exports=function(){o.mixin(this,[n]),this.defaultAttrs({snapReelVideoSelector:"video.js-snap-reel",easingAcceleration:.5,FPS:s.chrome?20:30}),this.logInteraction=function(t){var e=t.attr("data-tweet-id");this.eventScribed[e]||(this.scribeInteraction({action:"snap_reel_interaction"},this.interactionData(t)),this.eventScribed[e]=!0)},this.mouseOver=function(t){this.video=e(t.target),this.tweet=this.video.parents(this.attr.tweetSelector),this.tweet.hasClass("animated-gif-playing")&&(this.scribeTimeout=setTimeout(function(){this.logInteraction(this.tweet,this.video)}.bind(this),3e3)),this.start()},this.mouseOut=function(t){clearTimeout(this.scribeTimeout),this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.tweet.removeClass("animated-gif-playing"),this.trigger(this.tweet,"uiStartGif")),this.stop(),this.scribeTimeout=void 0,this.tweet=void 0,this.targetPosition=void 0},this.mouseMove=function(t){this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.targetPosition=t.pageX-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){if(this.running){var t=1e3/this.attr.FPS;setTimeout(function(){requestAnimationFrame(this.tick.bind(this)),this.update()}.bind(this),t)}},this.update=function(){if(this.targetPosition){this.currentPosition+=(this.targetPosition-this.currentPosition)*this.attr.easingAcceleration;var t=this.currentPosition/this.video.width();this.trigger(this.tweet,"uiSeekGif",{position:t})}},this.after("initialize",function(t,e){this.scribeTimeout=void 0,this.eventScribed={},this.currentPosition=0,this.on("mouseover",{snapReelVideoSelector:this.mouseOver}),this.on("mouseout",{snapReelVideoSelector:this.mouseOut}),this.on("mousemove",{snapReelVideoSelector:this.mouseMove})})}}).call(e,i(10))},830:function(t,e,i){"use strict";function s(){this.deleteMediaTag=function(t,e){var i=function(t){this.trigger("dataMediaTagRemoveSuccess",t)},s=function(t,i,s){this.trigger("dataMediaTagRemoveFailure",{id:e.id,status:i,errorThrown:s})},o={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiDidRemoveMediaTag",this.deleteMediaTag)})}var o=i(111),n=i(240),a=o(s,n);t.exports=a},831:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({newItemsBarSelector:".js-new-tweets-bar",containerSelector:".stream-container",newTweetsBarVisibleClass:"new-tweets-bar-visible",scrollTopOnNewItemsClick:!0}),this.updateNewItemsBar=function(t,i){if(t.target.contains(this.node)){var s=e(i.html),o=this.select("newItemsBarSelector");o.length?(o.replaceWith(s),this.trigger("uiNewItemsBarUpdated")):(this.$node.html(s),this.$node.hide(),this.showNewItemsBar(),this.trigger("uiNewItemsBarShown")),this.trigger("uiNewItemsBarVisible")}},this.showNewItemsBar=function(){var t=this.$node.parent(),i=n.getCanvasYOffset(t),s=e(window).scrollTop();this.$node.addClass(this.attr.newTweetsBarVisibleClass),s>i?(this.$node.show(),e("html, body").scrollTop(s+this.$node.height())):this.$node.slideDown()},this.hideNewItemsBar=function(){this.trigger("uiNewItemsBarHidden");var t=this.select("newItemsBarSelector");t.remove(),this.$node.removeClass(this.attr.newTweetsBarVisibleClass)},this.handleNewItemsBarClick=function(t,i){var s=e(t.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrollTopOnNewItemsClick&&a(0,"fast"),this.trigger("uiInjectNewItems",{fromClick:!0});var o=e(t.target).attr("data-item-count"),n={unreadCount:Number(o)};if(s)try{n.items=[JSON.parse(s)]}catch(t){}this.trigger("uiNewItemsBarClick",n)},this.after("initialize",function(){this.on(document,"uiUpdateNewItemsBar",this.updateNewItemsBar),this.on(document,"uiHideNewItemsBar",this.hideNewItemsBar),this.on("click",{newItemsBarSelector:this.handleNewItemsBarClick})})}var o=i(111),n=i(178),a=i(832);t.exports=o(s)}).call(e,i(10))},848:function(t,e,i){"use strict";function s(t){this.defaultAttrs({itemType:"tweet"}),this.scribeActivityCount=function(t,e,i){var s={component:this.attr.itemType,element:t,action:"click"};this.scribe(s,this.interactionData(e))},this.after("initialize",function(){this.on("uiRequestReplyActivity",this.scribeActivityCount.bind(this,"reply_count")),this.on("uiRequestRetweetedActivity",this.scribeActivityCount.bind(this,"retweet_count")),
this.on("uiRequestFavoritedActivity",this.scribeActivityCount.bind(this,"favorite_count"))})}var o=i(111),n=i(138),a=i(141),r=o(s,n,a);t.exports=r},849:function(t,e,i){"use strict";function s(){this.getTweetTranslation=function(t,e){var i=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(t.target,"dataTweetTranslationSuccess",e)},s=function(i,s,o){this.trigger(t.target,"dataTweetTranslationError",{id:e.id,status:s,errorThrown:o})},o={id:e.tweetId,dest:e.dest};this.get({url:"/i/translations/show.json",data:o,eventData:e,success:i.bind(this),error:s.bind(this)})},this.submitTweetTranslation=function(t,e){var i=function(e){this.trigger(t.target,"dataTweetTranslationSuggestionSuccess",e)},s=function(i,s,o){this.trigger(t.target,"dataTweetTranslationSuggestionError",{id:e.id,status:s,errorThrown:o})};this.post({url:"/i/translations/suggest.json",data:e,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiNeedsTweetTranslation",this.getTweetTranslation),this.on("uiSuggestTweetTranslation",this.submitTweetTranslation)})}var o=i(111),n=i(240),a=o(s,n);t.exports=a},850:function(t,e,i){"use strict";function s(){}var o=i(111),n=i(851),a=i(443);t.exports=o(s,a,n)},851:function(t,e,i){(function(e){"use strict";function i(){this.getItemPosition=function(t){return e(this.attr.genericInteractionItemSelector).index(t.closest(this.attr.genericInteractionItemSelector))}}t.exports=i}).call(e,i(10))},852:function(t,e,i){"use strict";function s(){this.scribeTweetPivotClick=function(t,e){this.scribe({component:"tweet",element:"more",action:"click"},{items:[e.item_details,e.component_details]})},this.after("initialize",function(){this.on("uiTweetPivotClick",this.scribeTweetPivotClick)})}var o=i(111),n=i(142),a=o(s,n);t.exports=a},855:function(t,e,i){"use strict";var s=i(856),o=i(863),n=i(864),a=i(868),r=i(441),l=i(476),h=i(440),c=i(866),d=i(869),u=i(870),p=i(871),m=s.mixin(o,n,a,r,l,h,c,d,u,p);t.exports=m},864:function(t,e,i){(function(e){"use strict";function s(){this.injectNewItems=function(t,e){if(!(this.latentItems.length<1)){e&&e.wasPeriodPress&&this.trigger("uiUserPressedPeriodAndSawNewTweets"),e&&e.wasPushStateInjection&&this.trigger("uiUserPushStateInjectedTweets"),e&&e.wasTopBarBirdClick&&this.trigger("uiUserClickedTopBarBirdAndSawNewTweets"),e&&e.wasComposedTweet&&this.trigger("uiUserComposedTweet"),this.trigger("uiHideNewItemsBar");var i=this.injectItems("prepend",this.latentItems.join(""),"uiHasInjectedNewTimeline",e);return this.resetLatentItems(),i}},n.mixin(this,[a,r]),this.defaultAttrs({streamItemSelector:".js-stream-item:not(.js-stream-item .js-stream-item)",refreshOnReturn:!0}),this.getNewItems=function(t,e){var i=Object.keys(this.composedThenInjectedTweetIds);this.trigger("uiWantsMoreTimelineItems",o.merge({include_new_items_bar:!(e&&e.injectImmediately),latent_count:this.latentCount,composed_count:i.length,composed_ids:i},this.getNewItemsData(),this.getNewItemsCountData&&this.getNewItemsCountData(),e))},this.notifyNewItems=function(t){if(t.items_html&&t.items_html.trim()){var e=t.sourceEventData||{};if(this.resetStateVariables(t),t.items_html){if(this.latentItems=this.htmlToItemArray(t.items_html).concat(this.latentItems),this.latentCount=t.new_latent_count,t.new_tweets_bar_html){var i=t.new_tweets_bar_html;this.autoplay?this.autoplayNewItems(t.new_tweets_bar_html):e.injectImmediately||(this.trigger("uiUpdateNewItemsBar",{html:i}),this.trigger("uiAddPageCount",{count:this.latentCount}))}(e.injectImmediately||e.timeline_empty)&&this.trigger("uiInjectNewItems"),e.scrollToTop&&this.scrollToTop(),e.selectTopTweet&&this.trigger("uiSelectTopTweet")}}},this.htmlToItemArray=function(t){var i=e("<div>").html(t).find(this.attr.streamItemSelector).toArray();return i.map(function(t){return e("<div>").append(t).html()})},this.saveLatentItems=function(t,e){var i=this.select("containerSelector");i.attr("data-latent-items",this.latentItems.join("")),i.attr("data-latent-count",this.latentCount)},this.resetLatentItems=function(){var t=this.select("containerSelector"),e=t.attr("data-latent-items");t.removeAttr("data-latent-items"),this.latentItems=this.htmlToItemArray(e),this.latentCount=parseInt(t.attr("data-latent-count"),10)||0,t.removeAttr("data-latent-count")},this.refreshOnNavigate=function(t,e){e.fromCache&&this.attr.refreshOnReturn&&this.trigger("uiTimelineShouldRefresh",{navigated:!0})},this.refreshAndSelectTopTweet=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,selectTopTweet:!0})},this.injectComposedTweet=function(t,i){if(!i.in_reply_to_status_id&&i.tweet_html){this.injectNewItems();var s=e(i.tweet_html).filter(this.attr.streamItemSelector).first().attr("data-item-id");this.$node.find(".original-tweet[data-tweet-id='"+s+"']:first").length||(this.latentItems=this.htmlToItemArray(i.tweet_html),this.injectNewItems(null,{wasComposedTweet:"dataTweetSuccess"===t.type}),this.composedThenInjectedTweetIds[i.tweet_id]=window.location.href)}},this.refreshAndInjectImmediately=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,selectTopTweet:1===this.$selected.length})},this.resetCacheOfComposedInjectedTweets=function(t,e){this.composedThenInjectedTweetIds=l={}},this.addPageCount=function(t,e){this.latentCount&&this.trigger("uiAddPageCount",{count:this.latentCount})},this.after("initialize",function(){this.latentItems=[],this.latentCount=0,this.composedThenInjectedTweetIds=l,this.resetLatentItems(),this.injectNewItems(null,{wasPushStateInjection:!0}),this.on("uiInjectNewItems",this.injectNewItems),this.on(document,"uiTimelineShouldRefresh",this.getNewItems),this.on(document,"uiBeforePageChanged",this.saveLatentItems),this.on(document,"uiPageChanged",this.refreshOnNavigate),this.on(document,"uiGotoTopOfScreen",this.refreshAndInjectImmediately),this.on(document,"uiShortcutGotoTopOfScreen",this.refreshAndSelectTopTweet),this.on(document,"dataPageMutated",this.resetCacheOfComposedInjectedTweets),this.on(document,"uiPageNeedsCount",this.addPageCount),this.attr.injectComposedTweets&&this.on(document,"dataTweetSuccess",this.injectComposedTweet)})}var o=i(126),n=i(121),a=i(865),r=i(867),l={};t.exports=s}).call(e,i(10))},865:function(t,e,i){(function(e){"use strict";function s(){o.mixin(this,[n]);var t=700;this.defaultAttrs({streamItemsSelector:".stream-items",socialProofSelector:".tweet-stats-container"}),this.autoplayNewItems=function(t){if(t){var e=this.$window.scrollTop(),i=e+this.$window.height(),s=this.$promotedItem.length&&this.$promotedItem.offset().top>i,o=this.injectNewItems({},{autoplay:!0}),n=this.select("streamItemsSelector");this.travelingPTw&&s&&this.repositionPromotedItem(function(t){o.first().before(t),o=o.add(t),this.trigger(t,"uiShouldFixMargins")});var a=o.first().offset().top,r=a>e&&a<i,l=n.offset().top,h=o.last().next().offset().top-l+1;r?(n.css("marginTop",-h),this.animateBlockOfItems()):this.setScrollerScrollTop(e+h)}},this.animateBlockOfItems=function(){var e=this.select("streamItemsSelector"),i=this.$window.scrollTop(),s=parseFloat(e.css("marginTop"));e.parent().css("overflow","hidden"),e.animate({marginTop:0},{duration:t+Math.abs(s),step:function(t){this.lockedTimelineScroll&&this.setScrollerScrollTop(i+Math.abs(s-Math.ceil(t)))}.bind(this),complete:function(){e.parent().css("overflow","inherit"),this.afterAnimationQueue.forEach(function(t){t.call(this)},this),this.afterAnimationQueue=[]}.bind(this)})},this.setScrollerScrollTop=function(t){var i=this.attr.overflowScroll?this.$node:e(window);i.scrollTop(t)},this.enableAutoplay=function(){this.autoplay=!0,this.travelingPTw=this.attr.travelingPTw,this.lockedTimelineScroll=!1,this.afterAnimationQueue=[],this.newItemsXLine=0,this.$window=this.attr.overflowScroll?this.$node:e(window),this.on("mouseover",function(){this.lockedTimelineScroll=!0}),this.on("mouseleave",function(){this.lockedTimelineScroll=!1})},this.after("initialize",function(){this.attr.autoplay&&this.enableAutoplay()})}var o=i(121),n=i(866);t.exports=s}).call(e,i(10))},866:function(t,e){"use strict";function i(){this.repositionPromotedItem=function(t){t.call(this,this.$promotedItem.detach())},this.after("initialize",function(){this.$promotedItem=this.$node.find(".promoted-tweet").first().closest(".stream-item")})}t.exports=i},867:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({pollingWatchNode:e(window),pollingEnabled:!0}),this.pausePolling=function(){this.pollingTimer.pause(),this.pollingPaused=!0},this.resetPolling=function(){this.backoffEmptyResponseCount=0,this.pollingPaused=!1},this.pollForNewItems=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!1,interval:this.pollingTimer.interval,fromPolling:!0})},this.onGotMoreTimelineItems=function(t,e){if(this.attr.pollingOptions&&this.attr.pollingOptions.pauseAfterBackoff&&e&&e.sourceEventData){if(e.focused_refresh_interval){var i=this.attr.pollingOptions.blurredInterval/this.attr.pollingOptions.focusedInterval;this.pollingTimer.clear(),this.attr.pollingOptions.focusedInterval=e.focused_refresh_interval,this.attr.pollingOptions.blurredInterval=e.focused_refresh_interval*i,this.pollingTimer=o("uiTimelinePollForNewItems",this.attr.pollingWatchNode,this.attr.pollingOptions)}var s=e.sourceEventData;s.fromPolling&&(this.isNewItem(e)||s.interval<this.attr.pollingOptions.blurredInterval?this.resetPolling():++this.backoffEmptyResponseCount>=this.attr.pollingOptions.backoffEmptyResponseLimit&&this.pausePolling())}},this.getNewItemsCountData=function(t){if(this.pollingPaused&&this.attr.pollingOptions)return this.resetPolling(),{count:this.attr.pollingOptions.resumeItemCount}},this.possiblyRefreshBeforeInject=function(t,e,i){return this.pollingPaused&&i&&i.fromClick&&this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0}),t(e,i)},this.around("injectNewItems",this.possiblyRefreshBeforeInject),this.before("teardown",function(){this.pollingTimer&&this.pollingTimer.clear()}),this.after("initialize",function(){this.attr.pollingEnabled&&(this.on(document,"uiTimelinePollForNewItems",this.pollForNewItems),this.on(document,"dataGotMoreTimelineItems",this.onGotMoreTimelineItems),this.pollingTimer=o("uiTimelinePollForNewItems",this.attr.pollingWatchNode,this.attr.pollingOptions),this.resetPolling())})}var o=i(516);t.exports=s}).call(e,i(10))},868:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({viewAllSelector:"button.view-all-supplements",interactionsPageViewAllToggleSelector:".stream-item-activity-notification button.view-all-supplements",additionalStreamItemsSelector:".sub-stream-item-showing, .sub-stream-item-hidden"}),this.toggleInteractionsSupplements=function(t,i){var s=e(i.el),o=s.hasClass("show");this.toggleSupplementTrigger(s,o),this.toggleSubStreamItemsVisibility(s.parent(),o)},this.toggleSupplementTrigger=function(t,e){t.toggleClass("hide",e).toggleClass("show",!e)},this.toggleSubStreamItemsVisibility=function(t,e){t.find(this.attr.additionalStreamItemsSelector).toggleClass("sub-stream-item-hidden",!e).toggleClass("sub-stream-item-showing",e)},this.after("initialize",function(){this.on("click",{interactionsPageViewAllToggleSelector:this.toggleInteractionsSupplements})})}t.exports=i}).call(e,i(10))},869:function(t,e){"use strict";function i(){this.defaultAttrs({pinnedStreamItemSelector:"li.js-pinned"}),this.keepPinnedStreamItemsOnTop=function(){this.$pinnedStreamItems.length&&(this.$pinnedStreamItems.first().css("margin-top","0"),this.$items.prepend(this.$pinnedStreamItems.detach()))},this.after("initialize",function(){this.$items=this.select("itemsSelector"),this.$pinnedStreamItems=this.select("pinnedStreamItemSelector"),this.on("uiHasInjectedNewTimeline",this.keepPinnedStreamItemsOnTop)})}t.exports=i},870:function(t,e,i){(function(e){"use strict";t.exports=function(){this.defaultAttrs({adaptivePhotoContainer:".js-adaptive-photo",adaptiveMediaContainer:".AdaptiveMedia"}),this.getPermalinkPath=function(t){return t.closest(this.attr.streamItemSelector).find(this.attr.permalinkSelector).attr("href")},this.openAdaptiveMediaGallery=function(t,i){t.preventDefault(),t.stopPropagation();var s=e(t.target).closest(this.attr.adaptivePhotoContainer);this.trigger(t.target,"uiOpenGallery",{timelineSelector:this.attr.adaptiveMediaContainer,inOverlay:this.attr.inOverlay});var o=s.closest("[data-impression-id]");o.length&&(o.attr("data-embedded-media-logged",!0),this.trigger("uiEmbeddedMedia",{impressionId:o.data("impression-id"),disclosureType:o.data("disclosure-type")})),i&&i.skipClickScribe||this.trigger("uiMediaThumbnailClick",{url:s.attr("data-image-url"),mediaType:"photo"})},this.openSelectedTweetAdaptiveMediaGallery=function(t){this.trigger(e(t.target).find(this.attr.adaptivePhotoContainer),"uiKeyboardOpenAdaptiveGallery",{skipClickScribe:!0})},this.after("initialize",function(){this.on(document,"uiOpenSelectedPhoto",this.openSelectedTweetAdaptiveMediaGallery),this.on("click uiKeyboardOpenAdaptiveGallery",{adaptivePhotoContainer:this.openAdaptiveMediaGallery})})}}).call(e,i(10))},871:function(t,e){"use strict";function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,s=e.newState;"following"===s?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===s?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===s&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}t.exports=i},875:function(t,e,i){"use strict";var s=i(784),o=i(876);t.exports=s.mixin(o)},876:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({selectedStreamItemSelector:".selected-stream-item",ownTweetSelector:".my-tweet"}),this.isSelected=function(t,i,s){var o=this.select("selectedStreamItemSelector"),n=o[0],a=t.target;return o.is(a)||!(!n||!e.contains(n,a))},this.getSelectedTweet=function(t,e,i){var s=this.select("selectedStreamItemSelector").find(this.attr.tweetItemSelector),o=!!s.length;return o&&(i.$tweet=s),o},this.after("initialize",function(){if(this.attr.loggedIn){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard),e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on("uiShortcutFavorite",this.composeHandler(this.isSelected,this.getSelectedTweet,t,this.toggleFavorite)),this.on("uiShortcutRetweet",this.composeHandler(this.isSelected,this.getSelectedTweet,t,this.toggleRetweet)),this.on("uiShortcutReply",this.composeHandler(this.isSelected,this.getSelectedTweet,e,this.triggerTweetAction("uiReplyToTweet")))}})}t.exports=i}).call(e,i(10))},878:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"}),this.updateTweetStats=function(t,e){e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.statElementSelectorFor(t.name));this.updateAria(i,t.count,t.title),this.updatePresentation(i,t.count,t.compact_count)}.bind(this))},this.initializeTweetStats=function(t,i){var s=this.findUninitializedTweetOrRetweet();s.each(function(t,i){this.renderTweetStats(e(i))}.bind(this))},this.renderTweetStats=function(t){t.attr("data-tweet-stat-initialized","true"),["favorite","retweet","reply"].forEach(function(e){var i=e,s=t.find(this.statElementSelectorFor(i)),o=s&&s.attr("data-tweet-stat-count");if(void 0!==o){var r=a.compactOrCommaize(o,n.language);this.updatePresentation(s,o,r)}}.bind(this))},this.updatePresentation=function(t,e,i){var s=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),s.empty()):(t.removeClass(this.attr.zeroCountClass),s.text(i))},this.updateAria=function(t,e,i){var s=t.find(this.attr.actionCountForAriaSelector);s.text(i),e<=0?(t.attr("aria-hidden","true"),s.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),s.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([data-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){var e={favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector};return e[t]},this.after("initialize",function(){this.on("uiSwiftLoaded uiPageChanged uiNeedUpdateInjectedTweetStats",this.initializeTweetStats),this.on("dataGotTweetStats",this.updateTweetStats)})}var o=i(111),n=i(846),a=i(835),r=i(879);t.exports=o(s,r)}).call(e,i(10))},879:function(t,e){"use strict";function i(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){t.target===document&&e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.socialProofStatElementSelectorFor(t.name));this.updateSocialProofStat(i,t)}.bind(this))},this.socialProofStatElementSelectorFor=function(t){var e={retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector};return e[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}t.exports=i},904:function(t,e,i){"use strict";function s(){this.defaultAttrs({hideOnCookiesError:void 0,hideOnGeoblockError:void 0,playerSelector:".PlayableMedia-player",ignoreFineGrainGeoblockingData:"data-ignore-fine-grain-geoblocking"}),this.onCookiesError=function(){this.$elementToHideOnCookiesError.length&&this.$elementToHideOnCookiesError.hide()},this.onGeoblockError=function(){var t=this.select("playerSelector").attr(this.attr.ignoreFineGrainGeoblockingData),e=this.select("hideOnGeoblockError");t&&e.length&&e.hide()},this.after("initialize",function(){this.$elementToHideOnCookiesError=this.select("hideOnCookiesError"),this.on("uiPlayableMediaNoCookiesError",this.onCookiesError),this.on("uiPlayableMediaGeoblockError",this.onGeoblockError)})}var o=i(111);t.exports=o(s)},915:function(t,e,i){"use strict";function s(){this.defaultAttrs({itemType:"tweet"})}var o=i(855),n=i(872),a=i(916),r=i(917),l=i(920),h=i(921);t.exports=o.mixin(s,n,r,l,h,a)},916:function(t,e,i){(function(e){"use strict";t.exports=function(){this.removeSeparatedModule=function(t){var i=e(t.target);this.trigger(i,"uiRemoveClassBeforePromptbird"),i.remove()},this.after("initialize",function(){this.on(document,"uiRemoveSeparatedModule",this.removeSeparatedModule)})}}).call(e,i(10))},917:function(t,e,i){(function(e){"use strict";var s=i(121),o=i(918);t.exports=function(){s.mixin(this,[o]),this.defaultAttrs({conversationModuleSelector:".conversation-module",hasConversationModuleSelector:".tweet.has-conversation-module",conversationHeaderSelector:".conversation-header",uncollapseSelector:"a.uncollapse",conversationRootSelector:"li.conversation-root",repliesCountSelector:".replies-count",otherRepliesSelector:".other-replies",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",repliesCountClass:"replies-count",visuallyHiddenClass:"visuallyhidden",conversationRootClass:"conversation-root",conversationTweetsSelector:".conversation-tweet-item,.original-tweet-item",conversationFirstVisibleTweetClass:"conversation-first-visible-tweet",originalTweetClass:"original-tweet",conversationItemsSelector:".conversation-header, .conversation-tweet-item, .original-tweet-item, .missing-tweets-bar",toBeRemovedClass:"to-be-removed",unselectableStreamItemClass:"js-unselectable-stream-item",firstNavigableStreamItemClass:"first-navigable-stream-item",lastNavigableStreamItemClass:"last-navigable-stream-item",collapsedRootClass:"collapsed-root",collapsedAncestorsClass:"collapsed-ancestors",restoreConversationDelay:100,collapseOverMinimum:20}),this.dedupAndCollapse=function(t,e){this.dedupConversations(),this.collapseConversationTweets(e&&e.tweets)},this.dedupAndCollapseNew=function(t,e){this.dedupConversations(),e&&e.tweets&&e.tweets.length<=this.attr.collapseOverMinimum?this.collapseFirstConversationTweets(this.attr.collapseOverMinimum):this.collapseConversationTweets(e&&e.tweets)},this.dedupConversations=function(){var t=this.select("conversationModuleSelector");t.each(function(t,i){if(i.parentNode){var s=e(i).attr("data-ancestors").split(","),o=this.$node.find(this.idsToSelector(s)).filter(function(t,i){return!e(i).parent().hasClass("recap-module")});o.find(this.attr.conversationModuleSelector).addClass(this.attr.toBeRemovedClass);var n=this;o.slideUp({queue:!1,duration:"fast",complete:function(){var t=e(this);t.hasClass(n.attr.selectedClass)&&n.trigger("uiSelectNext",{maintainPosition:!0}),requestAnimationFrame(function(){n.trigger(t,"uiWillRemoveStreamItem"),t.remove()})}})}}.bind(this))},this.idToSelector=function(t){return this.attr.topLevelStreamItemSelector+"#stream-item-tweet-"+t},this.idsToSelector=function(t){return t.map(this.idToSelector.bind(this)).join(",")},this.collapseFirstConversationTweets=function(t){var e=this.$node.find(this.attr.streamItemSelector).slice(0,t).find(this.attr.conversationModuleSelector);this.collapseConversations(e)},this.collapseConversationTweets=function(t){var e=void 0;if(t){var i=t.map(function(t){return t.tweetId}),s=this.$node.find(this.idsToSelector(i));e=s.find(this.attr.conversationModuleSelector)}else e=this.select("conversationModuleSelector");this.collapseConversations(e)},this.collapseConversations=function(t){var i={},s={};t.get().reverse().forEach(function(t){var o=e(t),n=o.attr("data-ancestors"),a=o.find(".conversation-root .tweet").attr("data-item-id");o.hasClass("dont-collapse")||(i[n]?this.collapseAncestors(o):s[a]&&this.collapseRoot(o)),o.hasClass(this.attr.toBeRemovedClass)||(i[n]=!0,s[a]=!0)}.bind(this))},this.uncollapseConversationHandler=function(t,e){t.preventDefault();var i=this.conversationModuleFromEvent(t);this.uncollapseConversation(i),i.addClass("dont-collapse")},this.uncollapseConversation=function(t){t.find(".conversation-tweet-item.conversation-ancestor:visible").length>0?this.expandRoot(t):this.expandAncestors(t)},this.setSelectionToRoot=function(t){this.trigger(t.find(".conversation-root.conversation-tweet-item"),"uiSelectItem",{setFocus:!0})},this.expandAncestors=function(t){var e=t.find(this.attr.conversationHeaderSelector),i=t.find(".conversation-tweet-item, .missing-tweets-bar"),s=t.find(".original-tweet-item");this.slideAndFadeContent(e,i,s,function(){t.removeClass(this.attr.collapsedAncestorsClass).removeClass(this.attr.collapsedRootClass),this.setSelectionToRoot(t)}.bind(this))},this.expandRoot=function(t){var e=t.find(this.attr.conversationHeaderSelector),i=t.find(".conversation-tweet-item.conversation-root, .missing-tweets-bar"),s=t.find(".conversation-tweet-item.conversation-ancestor:not(.conversation-root):first");0===s.length&&(s=t.find(".original-tweet-item")),this.slideAndFadeContent(e,i,s,function(){this.setSelectionToRoot(t),t.removeClass(this.attr.collapsedAncestorsClass).removeClass(this.attr.collapsedRootClass)}.bind(this))},this.collapseAncestors=function(t){var e=t.find(".conversation-tweet-item, .missing-tweets-bar"),i=t.find(this.attr.conversationHeaderSelector),s=t.find(".original-tweet-item");this.slideAndFadeContent(e,i,s),t.addClass(this.attr.collapsedAncestorsClass)},this.collapseRoot=function(t){var e=t.find(".conversation-tweet-item.conversation-root, .missing-tweets-bar"),i=t.find(this.attr.conversationHeaderSelector),s=t.find(".conversation-tweet-item.conversation-ancestor:not(.conversation-root):first");0===s.length&&(s=t.find(".original-tweet-item")),this.slideAndFadeContent(e,i,s),1===t.find(".conversation-tweet-item").length?t.addClass(this.attr.collapsedAncestorsClass):t.addClass(this.attr.collapsedRootClass)},this.updateConversationItemClasses=function(t){var i=e(t.target),s=i.find(this.attr.conversationItemsSelector);s.removeClass(this.attr.unselectableStreamItemClass),s.removeClass(this.attr.firstNavigableStreamItemClass),s.removeClass(this.attr.lastNavigableStreamItemClass),s.filter(":hidden").addClass(this.attr.unselectableStreamItemClass);var o=s.filter(":visible");o.first().addClass(this.attr.firstNavigableStreamItemClass),o.last().addClass(this.attr.lastNavigableStreamItemClass),i.find(this.attr.conversationTweetsSelector).removeClass(this.attr.conversationFirstVisibleTweetClass).filter(":visible").first().addClass(this.attr.conversationFirstVisibleTweetClass)},this.conversationModuleFromEvent=function(t){return e(t.target).closest(this.attr.conversationModuleSelector)},this.after("initialize",function(){this.on(document,"uiHasInjectedOldTimelineItems",this.dedupAndCollapse),this.on(document,"uiHasInjectedNewTimeline",this.dedupAndCollapseNew),this.on("click",{uncollapseSelector:this.uncollapseConversationHandler}),this.on("uiShortcutEnter",{conversationHeaderSelector:this.uncollapseConversationHandler}),this.on("uiUncollapseConversation",this.uncollapseConversationHandler),this.on("uiConversationModuleUpdated",this.updateConversationItemClasses),this.dedupAndCollapse()})}}).call(e,i(10))},918:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({animationTime:200}),this.slideAndFadeContent=function(t,e,i,s){if(!t.is(":hidden")){var n=this.getCombinedHeight(t);t.hide(),e.show();var a=this.getCombinedHeight(e);this.setAbsolutePosition(e),e.hide(),t.show(),this.setAbsolutePosition(t),i.css("paddingTop",n),t.fadeOut(o(this.attr.animationTime)),e.fadeIn(o(this.attr.animationTime)),i.animate({paddingTop:a},o(this.attr.animationTime),function(){this.resetCss(t),this.resetCss(e),this.resetCss(i),this.trigger(i.closest(this.attr.conversationModuleSelector),"uiConversationModuleUpdated"),s&&s()}.bind(this))}},this.getCombinedHeight=function(t){var i=0;return t.each(function(){i+=e(this).outerHeight()}),i},this.setAbsolutePosition=function(t){t.get().reverse().forEach(function(t){var i=e(t),s=i.width(),o=i.height();i.css({position:"absolute",top:i.position().top}),i.width(s),i.height(o)})},this.resetCss=function(t){var e={position:"",top:"",width:"",height:"",paddingTop:""};t.css(e)}}var o=i(919);t.exports=s}).call(e,i(10))},919:function(t,e,i){"use strict";var s=i(247);t.exports=function(t){var e=s.fromQuery(location).multiplier,i=window.DEBUG.multiplier||e||1;return t*i}},920:function(t,e,i){(function(e){"use strict";var s=i(121),o=i(918);t.exports=function(){s.mixin(this,[o]),this.defaultAttrs({unchosenActionClass:"unchosen-action",dismissedModuleClass:"dismissed",dismissibleSelector:".dismissible-content",dismissModuleSelector:".dismiss-module",feedbackActionClickSelector:".dropdown .action-prompt",feedbackActionSelector:".feedback-action",undoActionSelector:".dismissed-module .undo-action",conversationTweetSelector:".conversation-module .tweet",converationModuleSelector:".conversation-module"}),this.getStreamItemFromEvent=function(t){return e(t.target).closest(this.attr.topLevelStreamItemSelector)},this.getSuggestionInfoFromStreamItem=function(t){var e=t.attr("data-suggestion-json");return e&&JSON.parse(e)},this.suggestionFeedback=function(t,e,i){var s=this.getSuggestionInfoFromStreamItem(t),o=e.attr("data-feedback-type");this.trigger("uiSuggestionFeedback",{suggestionInfo:s,feedbackType:o,undo:i})},this.selectAction=function(t,i){var s=e(t.target).closest(this.attr.feedbackActionClickSelector),o=s.attr("data-feedback-type"),n=this.getStreamItemFromEvent(t);n.addClass(this.attr.dismissedModuleClass),this.slideAndFadeContent(n.children(this.attr.dismissibleSelector),n.children(this.attr.dismissModuleSelector),n);var a=n.children(this.attr.dismissModuleSelector).find(this.attr.feedbackActionSelector);if(a.each(function(t,i){var s=e(i);s.toggleClass(this.attr.unchosenActionClass,s.attr("data-feedback-type")!==o)}.bind(this)),0!==n.find(this.attr.converationModuleSelector).length){var r=e(t.target).closest(this.attr.conversationTweetSelector),l=this.getSuggestionInfoFromStreamItem(n);l.tweet_ids=r.attr("data-tweet-id"),n.attr("data-suggestion-json",JSON.stringify(l))}this.suggestionFeedback(n,s,!1)},this.undoSelectAction=function(t,i){var s=e(t.target).closest(this.attr.feedbackActionSelector),o=this.getStreamItemFromEvent(t);o.removeClass(this.attr.dismissedModuleClass),this.slideAndFadeContent(o.children(this.attr.dismissModuleSelector),o.children(this.attr.dismissibleSelector),o),o.children(this.attr.dismissModuleSelector).find(this.attr.feedbackActionSelector).removeClass(this.attr.unchosenActionClass),this.suggestionFeedback(o,s,!0)},this.after("initialize",function(){this.on("click",{feedbackActionClickSelector:this.selectAction,undoActionSelector:this.undoSelectAction})})}}).call(e,i(10))},921:function(t,e,i){(function(e){"use strict";var s=i(142),o=i(121);t.exports=function(){o.mixin(this,[s]),this.defaultAttrs({messageStreamItemSelector:".MessageStreamItem",dismissButtonSelector:".MessageStreamItem .Icon--close.js-dismiss",dismissSelector:".MessageStreamItem .js-dismiss",primaryActionSelector:".MessageStreamItem .js-primary-action",secondaryActionSelector:".MessageStreamItem .js-secondary-action"}),this.dismissMessage=function(t){this.scribe({component:this.getScribeComponent(t),action:"dismiss"});var e=this.getStreamItem(t);e.fadeOut(function(){e.remove()})},this.scribeDismissButton=function(t){this.scribeClick(t,"dismiss")},this.scribePrimaryAction=function(t){this.scribeClick(t,"primary_action")},this.scribeSecondaryAction=function(t){this.scribeClick(t,"secondary_action")},this.scribeClick=function(t,e){this.scribe({component:this.getScribeComponent(t),element:e,action:"click"})},this.getScribeComponent=function(t){var e=this.getStreamItem(t);return e.attr("data-component-context")},this.getStreamItem=function(t){return e(t.target).closest(this.attr.messageStreamItemSelector)},this.after("initialize",function(){this.on("click",{dismissButtonSelector:this.scribeDismissButton,dismissSelector:this.dismissMessage,primaryActionSelector:this.scribePrimaryAction,secondaryActionSelector:this.scribeSecondaryAction})})}}).call(e,i(10))},926:function(t,e,i){"use strict";function s(){var t=/:[A-Z0-9_-]+$/i;this.scribeMediaThumbnailResults=function(e,i){var s=i.thumbnails.length,o=s?"results":"no_results",n={};s&&(n.items=i.thumbnails.map(function(e){return{name:e.replace(t,"")}})),this.scribe({action:o},i,n)},this.scribeMediaThumbnailClick=function(e,i){var s={url:i.url&&i.url.replace(t,"")},o={element:i.mediaType,action:"click"};this.scribe(o,i,s)},this.after("initialize",function(){
this.on(document,"uiMediaGalleryResults",this.scribeMediaThumbnailResults),this.on(document,"uiMediaThumbnailsVisible",this.scribeMediaThumbnailResults),this.on(document,"uiMediaThumbnailClick",this.scribeMediaThumbnailClick)})}var o=i(111),n=i(142);t.exports=o(s,n)},933:function(t,e,i){(function(e){"use strict";var s=i(176),o=i(161),n=i(1255),a=i(1256),r=i(951),l=i(393),h=i(1604),c=i(1444),d=i(566),u=i(1607),p=i(1608),m=i(1610),f=i(1611),g=i(904),v=i(822),S=i(1612),w=i(508),b=i(965),C=i(1137),y=i(1138),T=i(1613),I=i(248),P=i(1614),D=i(1067),x=i(1127),E=i(991),k=i(992),M=i(1615),A=i(1616),O=i(126),R=i(1082),z=i(1085),F=i(1086),L=i(1087),H=i(1617),N=i(1619),$=i(1620),B=i(926),W=i(1621),U=i(1624),V=i(1625),j=".LiveVideoHomePageModuleContainer";t.exports=function(t){var i="#timeline";o(t),D(t),t.uiWalkthrough&&(A.attachTo("#ui-walkthrough-dialog"),M.attachTo("#ui-walkthrough-dialog",t.uiWalkthrough)),x(O.merge(t,{preservedScrollEnabled:!0,useDeduping:!0}),t.timeline_url,"swift_home_timeline","tweet","tweet"),w.attachTo(document);var G=O.merge(t,{eventData:{scribeContext:{component:"user_recommendations"}}});a.attachTo(document),n.attachTo(document),c.attachTo("#import-loading-dialog"),P.attachTo(document),L.attachTo(".dashboard .js-wtf-module",G),R.attachTo(".dashboard .js-wtf-module",G),F.attachTo(".dashboard .js-wtf-module",G),d.attachTo(".dashboard .import-prompt",t,{otherServicesSelector:".other-services",eventData:{scribeContext:{component:"user_recommendations",element:"wtf_import_prompt"}}}),z.attachTo(document,G),r.attachTo(".home-tweet-box",{autoplayDisabled:t.autoplayDisabled,draftTweetId:"home",hasDefaultText:!1,suppressSuccessMessage:!0,environment:t.environment,eventData:{scribeContext:{component:"tweet_box"}}}),T.attachTo(".dashboard .mini-profile"),l.attachTo(window,{containerSelector:i,unloadedCardsFilter:".mf-website [data-card-name=promo_website], .leadgen-card-forward [data-card-name=promotion], .cards-forward .js-macaw-cards-iframe-container"}),E.attachTo(i,{eventData:t.eventData}),k.attachTo(i,{page:"home"}),t.inlineTweetComposeEnabled&&u.attachTo(document,{text:t.inlineTweetComposeOptions.text});var q=I.queryMap(t.href);if(q.screen_name&&q.tweet_id&&b(O.merge(t,{urlHasTweetId:!0})),e("#profile_image_upload_dialog").length>0&&!e("#profile_image_upload_dialog").attr("data-upload-complete")&&V.attachTo(document,t),B.attachTo(document,t),C.attachTo(i,t),y.attachTo(document),H.attachTo(i,t),N.attachTo(i,t),$.attachTo(i,t),v.attachTo(document),S.attachTo(i),t.liveVideo.enabled&&(p.attachTo(j,{isPollingState:t.liveVideo.pollingEnabled,stateRefreshIntervalInSeconds:t.liveVideo.stateRefreshIntervalInSeconds}),m.attachTo(document),f.attachTo(document),s.attachTo(j,t),g.attachTo(j,O.merge(t,{hideOnGeoblockError:".PlayableMedia-player > iframe"}))),t.smartNuxEnabled&&W(t),U.attachTo(".ReonboardingCallout",t),t.deciders&&t.deciders.edge_probe_enabled){var Y=t.edgeProbeConfig,K=h(Y,{environment:t.environment});window.requestIdleCallback(K.sendProbe.bind(K))}}}).call(e,i(10))},951:function(t,e,i){"use strict";function s(){this.defaultAttrs({autoplayDisabled:!1,hasDefaultText:!0,defaultTextFrom:"data-screen-name",prependText:"@",cursorPosition:void 0}),this.getText=function(){return this.$node.attr(this.attr.defaultTextFrom)||""},this.getDefaultText=function(){return this.attr.hasDefaultText?this.attr.prependText+this.getText()+" ":void 0},this.getCondensedText=function(){return this.attr.hasDefaultText?this.attr.prependText+this.getText():void 0},this.after("initialize",function(t){this.initTweetbox({autoplayDisabled:this.attr.autoplayDisabled,condensedText:this.getCondensedText(),defaultText:this.getDefaultText(),environment:this.attr.environment,videoSupport:!0,cursorPosition:this.attr.cursorPosition,preventDropdownsOpeningUp:!0})})}var o=i(111),n=i(442);t.exports=o(n,s)},991:function(t,e,i){(function(e){"use strict";function s(){this.viewportHelpers=r,this.defaultAttrs({tweetSelector:".tweet",cursorSelector:".ThreadedConversation-showMoreThreads",itemType:"tweet",checkVisibilityInterval:500}),this.checkTweetVisibility=function(){var t=this,i=this.allVisibleTweets(),s=i.map(function(t){return this.interactionDataWithCard(t)},this),o=this.select("cursorSelector").filter(function(i,s){r.isWithinBounds(t.$window,e(s))}).toArray().map(function(t){return{type:e(t).data("cursor-type-name"),cursor:e(t).find("[data-cursor]").data("cursor")}});this.trigger("uiTweetsVisible",{tweetData:s,cursorData:o})},this.allVisibleTweets=function(){var t=this.select("tweetSelector"),e=this.findVisibleTweet(t);if(e===-1)return[];for(var i=[],s=e;t[s]&&r.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s--;for(i.reverse(),s=e+1;t[s]&&r.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s++;return i},this.findVisibleTweet=function(t){var e=r.getContainerRect(this.$window);return this.findVisibleTweetRecursive(t.length,0,t,0,e)},this.findVisibleTweetRecursive=function(t,e,i,s,o){var n=Math.floor((t-e)/2+e);return n===e||s>100?-1:r.isAboveViewport(this.$window,i.eq(n),0,o)?this.findVisibleTweetRecursive(t,n,i,s+1,o):r.isBelowViewport(this.$window,i.eq(n),0,o)?this.findVisibleTweetRecursive(n,e,i,s+1,o):n},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.$window=e(window),this.pollingInterval=a.setIntervalEvent("uiCheckTweetVisibility",this.attr.checkVisibilityInterval),this.on(document,"uiCheckTweetVisibility",this.checkTweetVisibility)})}var o=i(111),n=i(138),a=i(110),r=i(177);t.exports=o(s,n)}).call(e,i(10))},992:function(t,e,i){"use strict";function s(){this.defaultAttrs({scribeInterval:6e4,page:void 0}),this.getTime=function(){return Date.now()},this.handleTweetsVisible=function(t,e){this.recordVisibleTweets(e.tweetData),e.cursorData&&this.recordVisibleCursors(e.cursorData)},this.recordVisibleCursors=function(t){var e=this,i={};t.forEach(function(t){e.visibleCursors[t.cursor]&&(e.previouslyVisibleCursors[t.cursor]=t.type),i[t.cursor]=t.type}),this.visibleCursors=i},this.recordVisibleTweets=function(t){var e={},i=this.getTime();t.forEach(function(t){this.visibleTweets[t.tweetId]?e[t.tweetId]=n.merge(this.visibleTweets[t.tweetId],{visibility_end:i}):e[t.tweetId]=n.merge(t,{visibility_start:i,visibility_end:i})},this),this.visibleTweetKeys().forEach(function(t){var i=this.visibleTweets[t],s=!e[t],o=i.visibility_start!==i.visibility_end;s&&o&&this.previouslyVisibleTweets.push(this.visibleTweets[t])},this),this.visibleTweets=e},this.flushVisibleTweets=function(t,e){var i=this.getTime();this.visibleTweetKeys().forEach(function(t){this.visibleTweets[t].visibility_end=i},this),this.recordVisibleTweets([]),this.scribeVisibilityResults()},this.onScribeVisibilityResults=function(t,e){e.page===this.attr.page&&(this.scribeVisibilityResults(),this.scribeCursorVisibilityResults())},this.scribeCursorVisibilityResults=function(){var t=this;if(Object.keys(this.previouslyVisibleCursors).length){var e={component:"tweet",element:"cursor",action:"impression"};Object.keys(this.previouslyVisibleCursors).forEach(function(i){t.previouslyScribedCursors[i]||(t.scribe(e,{event_info:t.previouslyVisibleCursors[i]}),t.previouslyScribedCursors[i]=!0)}),this.previouslyVisibleCursors={}}},this.scribeVisibilityResults=function(){if(this.previouslyVisibleTweets.length){var t={component:"stream",element:"linger",action:"results"},e={items:this.previouslyVisibleTweets.map(function(t){return this.interactionItem(t)},this)};this.previouslyVisibleTweets=[],this.scribe(t,e)}},this.visibleTweetKeys=function(){return Object.keys(this.visibleTweets).filter(function(t){return this.visibleTweets.propertyIsEnumerable(t)},this)},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.visibleTweets={},this.previouslyVisibleTweets=[],this.visibleCursors={},this.previouslyVisibleCursors={},this.previouslyScribedCursors={},this.pollingInterval=l.setIntervalEvent("uiScribeVisibilityResults",this.attr.scribeInterval,{page:this.attr.page}),this.on(document,"uiScribeVisibilityResults",this.onScribeVisibilityResults),this.on(document,"uiBeforePageChanged uiTeardown",this.flushVisibleTweets),this.on("uiTweetsVisible",this.handleTweetsVisible)})}var o=i(111),n=i(126),a=i(142),r=i(141),l=i(110);t.exports=o(s,a,r)},1012:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({promotedTweetStoreCookieName:"h"}),this.cookie=o,this.promotedTweetDismissed=function(t,e){e.impressionId&&this.removeFromPromotedTweetStoreCookie(e)},this.removePromotedTweetsFromBlockedUser=function(t,i){var s=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet.promoted-tweet"),o=this;e.each(s,function(t,i){var s=e(i).attr("data-tweet-id");s&&o.removeFromPromotedTweetStoreCookie({id:s})})},this.removeFromPromotedTweetStoreCookie=function(t){var i=void 0;try{i=JSON.parse(o(this.attr.promotedTweetStoreCookieName))}catch(s){i=[]}e.isArray(i)||(i=[i]),i=i.filter(function(e){return e&&e.tweet_id&&e.tweet_id!==t.id}),i=0===i.length?null:JSON.stringify(i),o(this.attr.promotedTweetStoreCookieName,i)},this.after("initialize",function(){this.on("uiTweetDismissed",this.promotedTweetDismissed),this.on(document,"jsClearReinjectionCookiesForUser",this.removePromotedTweetsFromBlockedUser)})}var o=i(154);t.exports=s}).call(e,i(10))},1014:function(t,e){"use strict";function i(){this.defaultAttrs({dismissTweetSelector:".tweet .js-action-dismiss"}),this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{dismissTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDismissTweet"))})})}t.exports=i},1023:function(t,e,i){"use strict";function s(){this.showMessage=function(t,e){this.trigger("uiShowMessage",e)},this.after("initialize",function(){this.on("uiAlertBanner",this.showMessage)})}var o=i(111);t.exports=o(s)},1024:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.saveField=function(t,e){this.fields[e.field]=e.newValue},this.clearFields=function(){this.fields={},this.validationErrors=[]},this.addValidationError=function(t,e){this.validationErrors.push(e.message)},this.validateAndSaveProfile=function(t,e){t.preventDefault(),this.validateProfile()&&this.saveProfile(e)},this.validateProfile=function(){return!(this.validationErrors.length>0)||(this.saveProfileFailed({message:this.validationErrors.join(", ")}),!1)},this.saveProfile=function(t){Object.keys(this.fields).length>0?(this.trigger("dataInlineEditSaveStarted"),this.fields.page_context=this.attr.pageName,this.fields.section_context=this.attr.sectionName,this.post({url:"/i/profiles/update",data:this.fields,eventData:t,success:this.saveProfileSucceeded.bind(this),error:this.saveProfileFailed.bind(this)})):this.trigger("dataInlineEditSaveSuccess")},this.saveProfileSucceeded=function(t){return t.error===!0?this.saveProfileFailed(t):(this.trigger("dataInlineEditSaveSuccess",t),void this.clearFields())},this.saveProfileFailed=function(t){this.trigger("dataInlineEditSaveError",t),this.clearFields()},this.after("initialize",function(){this.fields={},this.validationErrors=[],this.on("uiInlineEditSave",this.saveField),this.on("uiInlineEditSaveValidationError",this.addValidationError),this.on("uiEditProfileSave",this.validateAndSaveProfile)})}var o=i(111),n=i(240);t.exports=o(s,n)},1025:function(t,e,i){(function(e){"use strict";function s(){this.reset=function(){},this.syncValue=function(){var t=this.getVisibleText().trim();this.oldTextValue!==t&&this.trigger("uiInlineEditSave",{newValue:t,field:this.$text.attr("name")})},this.saveOldValue=function(){this.oldTextValue=this.getVisibleText().trim(),this.generatePictographsDeferred()},this.resetToOldValue=function(){this.setVisibleText(this.oldTextValue)},this.updateProfileField=function(){var t=e(this.attr.globalProfileFieldSelector);this.getVisibleText().trim()||t.html(""),t.attr("dir",this.$text.attr("dir"))},this.after("initialize",function(){this.initTextNode(),this.on(document,"uiEditProfileSaveFields",this.syncValue),this.on(document,"uiEditProfileStart",this.saveOldValue),this.on(document,"uiEditProfileCancel",this.resetToOldValue),this.on(document,"uiEditProfileEnd",this.updateProfileField)})}var o=i(111),n=i(229),a=i(337),r=i(336),l=i(224),h=i(335),c=o(s,l,a,n,r,h);t.exports=c}).call(e,i(10))},1026:function(t,e,i){"use strict";function s(){this.defaultAttrs({buttonSelector:".BirthdateSelect-button",fieldsSelector:".BirthdateSelect-fields",birthyearSelector:".BirthdateSelect-birthyear",expandedClass:"is-expanded",hasShownWarningPopoverClass:"hasShownWarningPopover",notSetClass:"is-notSet",showFieldsAnimationDuration:550,minAgeForYearVisibility:18,shouldShowVisibilityPopover:!1,visibilitySettingsLearnMorePath:null,userId:null,maximumNumberOfBirthdateChanges:6,environment:""});var t=12096e5;this.localStorage=new l("dob_select"),this.initialBirthdateData={},this.selectedBirthdateData={},this.showFields=function(){this.maybeAddVisibilityHelpPopover(),this.$node.addClass(this.attr.expandedClass),setTimeout(function(){this.select("fieldsSelector").addClass(this.attr.expandedClass)}.bind(this),this.attr.showFieldsAnimationDuration),this.select("fieldsSelector").focus(),this.trigger("uiBirthdateSelectFieldsExpanded"),this.hasChangedDateMoreThanAllowed()&&this.trigger("uiBirthdateSelectHasReachedChangeLimit")},this.resetFields=function(){this.$node.removeClass(this.attr.expandedClass),this.$node.removeClass(this.attr.hasShownWarningPopoverClass),this.selectedBirthdateData=this.initialBirthdateData,this.select("fieldsSelector").removeClass(this.attr.expandedClass)},this.updateYearVisibility=function(t,e){var i=this.select("birthyearSelector");this.shouldHideYearVisibility(e)?this.hideOptions(i,function(t){return t.data("option-value")>0}):this.unhideOptions(i)},this.shouldHideYearVisibility=function(t){var e=t.year.value,i=t.month.value,s=t.day.value,o=new Date,n=o.getUTCFullYear()-e,a=o.getUTCMonth()+1,r=o.getUTCDate(),l=n<this.attr.minAgeForYearVisibility,h=n===this.attr.minAgeForYearVisibility,c=h&&a<i,d=h&&a===parseInt(i,10),u=d&&r<s;return l||c||u},this.hasChangedDateMoreThanAllowed=function(){var t=this.localStorage.getItem(this.numChangesStorageKey)||0;return"selenium"===this.attr.environment?t>=1:t>=this.attr.maximumNumberOfBirthdateChanges},this.initializeSelectedBirthdateData=function(){var e=this.localStorage.getItem(this.lastBirthdateChangeStorageKey)||0,i=e+t>Date.now(),s=this.hasChangedDateMoreThanAllowed();i&&s?this.disableDateOptions():this.enableDateOptions(),!i&&s&&this.localStorage.setItem(this.numChangesStorageKey,0),this.initialBirthdateData=this.selectedBirthdateData=h.merge(this.getDateSelectedData(),this.getSelectedVisibilitySettingsData()),this.trigger("uiBirthdateSelectDataInitialized",this.selectedBirthdateData),this.maybeAddBirthdateChangePopover()},this.updateSelectedBirthdateData=function(t,e){this.selectedBirthdateData=h.merge(this.selectedBirthdateData,e),this.isChangingDateFields()&&this.hasChangedDateMoreThanAllowed()?(this.trigger("uiShowError",{message:"You can only change your birthday a limited number of times"}),this.selectedBirthdateData=this.initialBirthdateData,this.trigger("uiBirthdateSelectSetFields",this.initialBirthdateData)):(this.trigger("uiBirthdateSelectDataUpdated",this.selectedBirthdateData),this.maybeAddBirthdateChangePopover())},this.setBirthdateSelectFields=function(t,e){Object.keys(e).forEach(function(t){var i=e[t];"date_select"===i.type?this.setDateSelectorOption(i.name,i.value):"visibility_setting"===i.type&&this.setVisibilitySettingOption(i.name,i.value)},this)},this.notifyInvalidDate=function(){var t=this.getDateSelected(),e=void 0;e=t.year||t.month?t.year||t.day?t.month||t.day?t.year?t.month?t.day?"Complete your birthday":"Complete your birthday by entering the day":"Complete your birthday by entering the month":"Complete your birthday by entering the year":"Complete your birthday by entering the month and day":"Complete your birthday by entering the year and day":"Complete your birthday by entering the year and month",this.trigger("uiBirthdateSelectGotInvalidDateMessage",{message:e})},this.maybeAddBirthdateChangePopover=function(){var t=this.isChangingDateFields()||this.hasChangedDateMoreThanAllowed(),e=this.$node.hasClass(this.attr.hasShownWarningPopoverClass);!e&&t&&(this.addPopover("You can only change your birthday a limited number of times"),this.$node.addClass(this.attr.hasShownWarningPopoverClass))},this.isChangingDateFields=function(){return Object.keys(this.selectedBirthdateData).some(function(t){var e=this.selectedBirthdateData[t],i=this.initialBirthdateData[t];return"date_select"===e.type&&e.value>0&&i.value>0&&e.value!==i.value},this)},this.maybeAddVisibilityHelpPopover=function(){if(this.attr.shouldShowVisibilityPopover&&!this.localStorage.getItem(this.popoverStorageKey)){this.localStorage.setItem(this.popoverStorageKey,!0);var t=void 0;t=this.attr.visibilitySettingsLearnMorePath?_('You can control who sees your birthday on Twitter.<br /><a href="{{learn_more_path}}" target="_blank">Learn More</a>',{learn_more_path:this.attr.visibilitySettingsLearnMorePath}):"You can control who sees your birthday on Twitter.",this.addPopover(t)}},this.maybeRemovePopovers=function(){this.select("fieldsSelector").hasClass(this.attr.expandedClass)&&this.hideAndClearPopover()},this.setButtonTitle=function(t,e){e.has_birthdate?this.select("buttonSelector").text(e.title).removeClass(this.attr.notSetClass):this.select("buttonSelector").text("Birthday").addClass(this.attr.notSetClass)},this.storeNumberOfTimesBirthdateChanged=function(){if(this.isChangingDateFields()){var t=this.localStorage.getItem(this.numChangesStorageKey)||0;this.localStorage.setItem(this.numChangesStorageKey,t+1),this.localStorage.setItem(this.lastBirthdateChangeStorageKey,Date.now())}},this.after("initialize",function(){this.popoverStorageKey=this.attr.userId+"_hasShownVisibilityHelpPopover",this.numChangesStorageKey=this.attr.userId+"_timesBirthdateHasBeenChanged",this.lastBirthdateChangeStorageKey=this.attr.userId+"_msBirthdateWasLastChanged",this.on(document,"uiEditProfileStart",this.initializeSelectedBirthdateData),this.on("uiVisibilitySettingSelected uiDateSelectorOptionsChanged",this.updateSelectedBirthdateData),this.on("uiBirthdateSelectHasInvalidDate",this.notifyInvalidDate),this.on(this.select("buttonSelector"),"click",this.showFields),this.on(document,"uiEditProfileEnd uiBeforePageChanged",this.resetFields),this.on(document,"uiEditProfileSuccess",this.storeNumberOfTimesBirthdateChanged),this.on("uiVisibilitySettingSelected",this.close),this.on("uiDateSelectorOptionsChanged",this.updateYearVisibility),this.on("uiBirthdateSelectSetFields",this.setBirthdateSelectFields),this.on(document,"uiBirthdateSelectGotTitle",this.setButtonTitle),this.on(document,"click",this.maybeRemovePopovers)})}var _=i(123),o=i(111),n=i(1027),a=i(1028),r=i(1029),l=i(202),h=i(126);t.exports=o(s,n,a,r)},1027:function(t,e){"use strict";function i(){this.defaultAttrs({genericSelectSelector:".js-dateSelector",daySelectSelector:".js-dateSelectDay",monthSelectSelector:".js-dateSelectMonth",yearSelectSelector:".js-dateSelectYear",missingFieldClass:"is-missing",maximumDateAvailable:void 0}),this.dayOptions,this.monthOptions,this.yearOptions,this.isLeapYear=function(t){return t%4===0&&t%100!==0||t%400===0},this.getDaysInMonth=function(t,e){var i=+t||1,s=+(e||this.yearOptions[1].value);switch(i){case 2:return this.isLeapYear(s)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},this.getDateSelected=function(){var t=this.select("daySelectSelector"),e=this.select("monthSelectSelector"),i=this.select("yearSelectSelector");return{day:t.val(),month:e.val(),year:i.val()}},this.getDateSelectedData=function(){var t=this.select("daySelectSelector"),e=this.select("monthSelectSelector"),i=this.select("yearSelectSelector");return{day:{value:t.val(),name:t.attr("name"),type:"date_select"},month:{value:e.val(),name:e.attr("name"),type:"date_select"},year:{value:i.val(),name:i.attr("name"),type:"date_select"}}},this.setDateSelectorOption=function(t,e){var i=this.select("genericSelectSelector").filter('[name="'+t+'"]');i.val()!==e&&(i.val(e),this.updateDateOptions())},this.hasSelectedMaximumYear=function(t){return this.attr.maximumDateAvailable&&t.year>=this.attr.maximumDateAvailable.year},this.hasSelectedMaximumMonth=function(t){return this.attr.maximumDateAvailable&&t.month>=this.attr.maximumDateAvailable.month},this.updateDateOptions=function(){this.setFieldsWidth(),this.updateYearOptions(),this.updateMonthOptions(),this.updateDayOptions(),this.swapSelectedAttrs(),this.trigger("uiDateSelectorOptionsChanged",this.getDateSelectedData())},this.setFieldsWidth=function(){var t=this.select("daySelectSelector"),e=this.select("monthSelectSelector"),i=this.select("yearSelectSelector");t.is(":visible")&&t.css({width:t.css("width")}),e.is(":visible")&&e.css({width:e.css("width")}),i.is(":visible")&&i.css({width:i.css("width")})},this.updateDayOptions=function(){var t=this.select("daySelectSelector"),e=this.getDateSelected(),i=this.getDaysInMonth(e.month,e.year),s=this.hasSelectedMaximumYear(e)&&this.hasSelectedMaximumMonth(e),o=e.day,n=o,a=this.dayOptions.filter(function(t,e){var o=+e.value;return s?o<=this.attr.maximumDateAvailable.day:o<=i}.bind(this));o>0&&s&&o>=this.attr.maximumDateAvailable.day?n=this.attr.maximumDateAvailable.day:o>0&&o>i&&(n=i),t.empty().append(a).val(n);var r=!n&&(e.year>0||e.month>0);t.toggleClass(this.attr.missingFieldClass,r)},this.updateMonthOptions=function(){var t=this.select("monthSelectSelector"),e=this.getDateSelected(),i=this.monthOptions,s=e.month,o=s;this.hasSelectedMaximumYear(e)&&(i=i.filter(function(t,i){var s=+i.value;return s===this.attr.maximumDateAvailable.month&&e.day<=this.attr.maximumDateAvailable.day||s<this.attr.maximumDateAvailable.month}.bind(this)),s>0&&s>this.attr.maximumDateAvailable.month&&(o=this.attr.maximumDateAvailable.month)),t.empty().append(i).val(o);var n=!o&&(e.year>0||e.day>0);t.toggleClass(this.attr.missingFieldClass,n)},this.updateYearOptions=function(){var t=this.select("yearSelectSelector"),e=this.getDateSelected(),i=this.yearOptions,s=e.year,o=s;this.hasSelectedMaximumMonth(e)&&(e.month>this.attr.maximumDateAvailable.month||e.day>this.attr.maximumDateAvailable.day)&&(i=i.filter(function(t,e){var i=+e.value;return i<this.attr.maximumDateAvailable.year}.bind(this)),s===this.attr.maximumDateAvailable.year&&(o=this.attr.maximumDateAvailable.year-1)),t.empty().append(i).val(o);var n=!o&&(e.month>0||e.day>0);t.toggleClass(this.attr.missingFieldClass,n)},this.swapSelectedAttrs=function(){var t=this.getDateSelected();this.dayOptions.prop("selected",!1).filter('[value="'+t.day+'"]').prop("selected",!0),this.monthOptions.prop("selected",!1).filter('[value="'+t.month+'"]').prop("selected",!0),this.yearOptions.prop("selected",!1).filter('[value="'+t.year+'"]').prop("selected",!0)},this.after("initialize",function(){this.dayOptions=this.select("daySelectSelector").find("option"),this.monthOptions=this.select("monthSelectSelector").find("option"),this.yearOptions=this.select("yearSelectSelector").find("option"),this.on(document,"uiEditProfileStart",this.updateDateOptions),this.on("change",{genericSelectSelector:this.updateDateOptions})}),this.disableDateOptions=function(){var t=this.getDateSelected();this.dayOptions.filter('[value!=""]').prop("disabled",!0),this.dayOptions.filter('[value="'+t.day+'"]').prop("disabled",!1),this.monthOptions.filter('[value!=""]').prop("disabled",!0),this.monthOptions.filter('[value="'+t.month+'"]').prop("disabled",!1),this.yearOptions.filter('[value!=""]').prop("disabled",!0),this.yearOptions.filter('[value="'+t.year+'"]').prop("disabled",!1)},this.enableDateOptions=function(){this.dayOptions.prop("disabled",!1),this.monthOptions.prop("disabled",!1),this.yearOptions.prop("disabled",!1)}}t.exports=i},1028:function(t,e,i){(function(e){"use strict";function s(){o.mixin(this,[n]),this.defaultAttrs({settingsSelector:".VisibilitySettings",dropdownIconSelector:".VisibilitySettings-dropdownIcon",selectedDropdownIconSelector:".VisibilitySettings-dropdownIcon:not(.u-hidden)",hiddenClass:"u-hidden",hiddenSelector:".u-hidden",visibilityButtonSelector:".VisibilitySettings-button",visibilityOptionSelector:".VisibilitySettings-option",visibilityRadioSelector:".js-visibilitySettingsRadio"}),this.updateSelectionFromEvent=function(t){var i=e(t.target).closest(this.attr.visibilityOptionSelector);this.updateSelection(i)},this.updateSelection=function(t){var e=t.closest(this.attr.settingsSelector),i=t.find(this.attr.visibilityRadioSelector),s=e.find(this.attr.visibilityButtonSelector),o=e.find(this.attr.dropdownIconSelector),n=e.find(this.attr.selectedDropdownIconSelector),a=i.data("dropdown-icon-selector");this.clearSelection(e),i.prop("checked",!0),n.addClass(this.attr.hiddenClass),o.filter(a).removeClass(this.attr.hiddenClass),s.attr("data-original-title",i.data("setting-name")),s.focus(),this.trigger("uiVisibilitySettingSelected",this.getSelectedVisibilitySettingsData())},this.setVisibilitySettingOption=function(t,e){var i=this.$node.find('input[name="'+t+'"][value="'+e+'"]'),s=i.closest(this.attr.visibilityOptionSelector);this.updateSelection(s)},this.clearSelection=function(t){t.find(this.attr.visibilityRadioSelector).each(function(t,i){e(i).prop("checked",!1)})},this.hideOptions=function(t,i){var s=t.find(this.attr.visibilityOptionSelector);if(s.each(function(t,s){var o=e(s);"function"==typeof i&&i(o)&&o.addClass(this.attr.hiddenClass)}.bind(this)),this.selectedOptionIsHidden(t)){var o=s.not(this.attr.hiddenSelector).first();this.updateSelection(o)}},this.selectedOptionIsHidden=function(t){return t.find(this.attr.visibilityRadioSelector).filter(":checked").closest(this.attr.visibilityOptionSelector).hasClass(this.attr.hiddenClass)},this.unhideOptions=function(t,i){t.find(this.attr.visibilityOptionSelector).each(function(t,s){var o=e(s);("function"==typeof i&&i(o)||"undefined"==typeof i)&&o.removeClass(this.attr.hiddenClass)}.bind(this))},this.getSelectedVisibilitySettingsData=function(){var t={};return this.select("visibilityRadioSelector").filter(":checked").each(function(i,s){var o=e(s);t[o.attr("name")]=this.getRadioOptionData(o)}.bind(this)),t},this.getRadioOptionData=function(t){return{value:t.val(),name:t.attr("name"),type:"visibility_setting"}},this.after("initialize",function(){this.on("click",{visibilityOptionSelector:this.updateSelectionFromEvent})})}var o=i(121),n=i(445);t.exports=s}).call(e,i(10))},1029:function(t,e,i){(function(e){"use strict";function i(){this.addPopover=function(t){this.$popover?this.hideAndClearPopover():this.initializePopover(),this.$popoverText.html(t),this.$node.append(this.$popover)},this.hideAndClearPopover=function(){this.$popover&&this.$popoverText&&(this.$popover.remove(),this.$popoverText.empty())},this.initializePopover=function(){this.$popover=e('<div class="Popover"><div class="Popover-text"></div></div>"'),this.$popoverText=this.$popover.children(),this.$node.addClass("Popover-container"),this.on(this.$popover,"click",this.hideAndClearPopover)}}t.exports=i}).call(e,i(10))},1031:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({fileInputSelector:".file-input",uploadType:"avatar",chooseExistingSelector:"#photo-choose-existing",chooseWebcamSelector:"#photo-choose-webcam",deleteImageSelector:"#photo-delete-image",caretSelector:".dropdown-caret",photoSelector:"div.photo-selector",showDeleteSuccessMessage:!0,alwaysOpen:!1,confirmDelete:!1,defaultToFileInputOpen:!1,supportsAutoOpen:!0}),this.openWebCamDialog=function(t){t.preventDefault(),this.trigger("uiCropperWebcam",{uploadType:this.attr.uploadType})},this.webcamDetected=function(){l.hasCanvas()&&this.updateDropdownItemVisibility(this.select("chooseWebcamSelector"),!0)},this.dropdownOpened=function(t,e){var i=e&&e.scribeContext||this.attr.eventData.scribeContext;this.scribe(h.merge(i,{action:"open"}))},this.deleteImage=function(){if("background"!==this.attr.uploadType){this.attr.confirmDelete&&(this.preventMenuClose=!0);var t=this.attr.confirmDelete?"uiConfirmDeleteImage":"uiDeleteImage";this.trigger(t,{uploadType:this.attr.uploadType})}else this.hideFileName();this.attr.confirmDelete||this.hideDeleteLink()},this.handleSaveImageSuccess=function(t,e){e.message&&this.attr.showSaveSuccessMessage&&this.trigger("uiAlertBanner",e),this.showDeleteLink()},this.handleSaveImageFailure=function(t,e){e.message=e.message||_("Sorry! Something went wrong saving your photo. Please try again.",this.attr),this.trigger("uiAlertBanner",e)},this.handleDeleteImageSuccess=function(t,e){e.message&&this.attr.showDeleteSuccessMessage&&this.trigger("uiAlertBanner",e)},this.handleDeleteImageFailure=function(t,e){e.message=e.message||_("Sorry! Something went wrong deleting your photo. Please try again.",this.attr),this.trigger("uiAlertBanner",e),this.showDeleteLink()},this.showDeleteLinkForTargetedButton=function(t,e){"background"===e.uploadType&&this.showDeleteLink()},this.showDeleteLink=function(t,e){this.updateDropdownItemVisibility(this.select("deleteImageSelector"),!0)},this.hideDeleteLink=function(t,e){this.updateDropdownItemVisibility(this.select("deleteImageSelector"),!1)},this.showFileName=function(t,e){this.$node.siblings(".display-file-requirement").hide(),this.$node.siblings(".display-file-name").text(e.fileName).show()},this.hideFileName=function(){this.$node.siblings(".display-file-requirement").show(),this.$node.siblings(".display-file-name").hide()},this.updateDropdownItemVisibility=function(t,e){t.toggleClass("u-hidden",!e),this.updateMenuHierarchy()},this.upliftFilePicker=function(){var t=this.select("photoSelector");this.select("togglerSelector").hide(),t.find("button").prop("disabled",!1),t.appendTo(this.$node)},this.moveFilePickerBackIntoMenu=function(){var t=this.select("photoSelector");t.appendTo(this.select("chooseExistingSelector")),this.select("togglerSelector").show()},this.updateMenuHierarchy=function(){this.attr.alwaysOpen||(1===this.availableDropdownItems().length?this.upliftFilePicker():this.moveFilePickerBackIntoMenu())},this.availableDropdownItems=function(){return this.select("menuItemSelector").filter(function(){return"none"!==e(this).css("display")})},this.addCaretHover=function(){this.select("caretSelector").addClass("hover")},this.removeCaretHover=function(){this.select("caretSelector").removeClass("hover")},this.handleCloseRequest=function(t){(this.attr.alwaysOpen||this.preventMenuClose)&&t.preventDefault()},this.handleOpenRequest=function(t){var e=this.availableDropdownItems();1===e.length&&this.attr.supportsAutoOpen&&l.supportsCropper()&&(t.preventDefault(),this.attr.defaultToFileInputOpen?(this.trigger("uiEditProfileHideOptions"),e.find(this.attr.fileInputSelector).click()):e.click())},this.preventIncompatibleBrowsersUploadingPhotos=function(t){l.supportsCropper()||(this.trigger("uiAlertBanner",{message:"Please upgrade your browser to upload photos."}),t.preventDefault())},this.after("initialize",function(){this.on(document,"uiFileSelected",this.verifyUploadType(this.showDeleteLinkForTargetedButton)),this.on(document,"uiFileNameReady",this.verifyUploadType(this.showFileName)),this.on(document,"uiHideDeleteLink",this.verifyUploadType(this.hideDeleteLink)),this.on(document,"dataSaveImageSuccess",this.verifyUploadType(this.handleSaveImageSuccess)),this.on(document,"dataSaveImageFailure",this.verifyUploadType(this.handleSaveImageFailure)),this.on(document,"dataDeleteImageSuccess",this.verifyUploadType(this.handleDeleteImageSuccess)),this.on(document,"dataDeleteImageFailure",this.verifyUploadType(this.handleDeleteImageFailure)),this.on("uiDropdownOpened",this.dropdownOpened),this.on("uiDropdownOpenRequested",this.handleOpenRequest),this.on("uiDropdownCloseRequested",this.handleCloseRequest),this.on("click",{chooseWebcamSelector:this.openWebCamDialog,deleteImageSelector:this.deleteImage,
chooseExistingSelector:this.preventIncompatibleBrowsersUploadingPhotos}),this.on("mouseover focusin",{firstMenuItemSelector:this.addCaretHover}),this.on("mouseout focusout",{firstMenuItemSelector:this.removeCaretHover}),this.updateMenuHierarchy()}),this.before("teardown",function(){delete window.webcam})}var o=i(111),n=i(445),a=i(142),r=i(1032),l=i(302),h=i(126),_=i(123);t.exports=o(s,n,a,r)}).call(e,i(10))},1032:function(t,e){"use strict";function i(){this.verifyUploadType=function(t){return function(e,i){if(i&&(i.uploadType||i.sourceEventData&&i.sourceEventData.uploadType)===this.attr.uploadType)return t.apply(this,arguments)}}}t.exports=i},1037:function(t,e,i){"use strict";function s(){this.defaults={uploadType:"",fileNameTextSelector:".photo-file-name",alertEvent:"uiAlertBanner"},this.updateFileNameText=function(t,e){var i=this.truncate(e.fileName,18);this.select("fileNameSelector").val(e.fileName),this.select("fileNameTextSelector").text(i),this.trigger("uiFileNameReady",{fileName:i})},this.addFileError=function(t){var e=t===a.FILE_TOO_LARGE?this.attr.fileTooBigMessage:n(t);e&&this.trigger(this.attr.alertEvent,{message:e}),this.scribe({component:"profile_image",element:"upload",action:"failure"}),"function"==typeof this.attr.onError&&this.attr.onError(),this.reset()},this.truncate=function(t,e){if(t.length<=e)return t;var i=Math.ceil(e/2),s=Math.floor(e/2),o=t.substr(0,i),n=t.substr(t.length-s,s);return o+""+n},this.initializeButton=function(){this.select("buttonSelector").prop("disabled",!1),this.updateAcceptedFormats()},this.resetUploader=function(){this.select("fileNameSelector").val(""),this.select("fileNameTextSelector").text("No file selected")},this.after("initialize",function(){this.maxSizeInBytes=this.attr.maxSizeInBytes,this.initializeButton(),this.on(this.$node,"uiPreviewThumbnailShow",this.updateFileNameText),this.on("uiResetUploader",this.resetUploader)})}var o=i(111),n=i(305),a=i(296),r=i(306),l=i(142),h=(i(123),o(s,r,l));t.exports=h},1041:function(t,e,i){"use strict";function s(){this.oldBirthdateData={},this.newBirthdateData={},this.saveOldBirthdateData=function(t,e){this.oldBirthdateData=e},this.setNewBirthdateData=function(t,e){this.newBirthdateData=e},this.isNewBirthdateDifferentThanOldBirthdate=function(){return Object.keys(this.newBirthdateData).some(function(t){return this.newBirthdateData[t].value!==this.oldBirthdateData[t].value},this)},this.isValidNewBirthdate=function(){var t=!1,e=!1;for(var i in this.newBirthdateData)"date_select"===this.newBirthdateData[i].type&&(0===this.newBirthdateData[i].value?t=!0:e=!0);return e&&!t||t&&!e},this.syncBirthdateData=function(){if(this.isNewBirthdateDifferentThanOldBirthdate())if(this.isValidNewBirthdate())for(var t in this.newBirthdateData)this.trigger("uiInlineEditSave",{newValue:this.newBirthdateData[t].value,field:this.newBirthdateData[t].name});else this.trigger("uiBirthdateSelectHasInvalidDate")},this.replaceOldBirthdateData=function(){this.oldBirthdateData=this.newBirthdateData},this.resetOldBirthdateData=function(){this.isNewBirthdateDifferentThanOldBirthdate()&&this.trigger("uiBirthdateSelectSetFields",this.oldBirthdateData)},this.after("initialize",function(){this.on("uiBirthdateSelectDataInitialized",this.saveOldBirthdateData),this.on("uiBirthdateSelectDataUpdated",this.setNewBirthdateData),this.on("uiBirthdateSelectGotInvalidDateMessage","uiInlineEditSaveValidationError"),this.on(document,"uiEditProfileSaveFields",this.syncBirthdateData),this.on(document,"uiEditProfileSuccess",this.replaceOldBirthdateData),this.on(document,"uiEditProfileCancel uiBeforePageChanged",this.resetOldBirthdateData)})}var o=i(111);t.exports=o(s)},1043:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({editableLocationFieldSelector:".ProfileHeaderCardEditing-editableField",placeIdFieldSelector:".ProfileHeaderCardEditing-locationPlaceId",globalProfileFieldSelector:".ProfileHeaderCard-locationText",globalProfileFieldContainerSelector:".ProfileHeaderCard-location",hiddenClass:"u-hidden"}),this.saveOldLocationValues=function(){this.oldLocationValue=this.editableLocationFieldValue(),this.oldPlaceIdValue=this.$placeIdField.val(),this.oldHtmlValue=this.$profileField.html(),this.savedLocation=!1,this.savedLocationId=!1},this.resetProfileLocationField=function(){this.$profileField.html(this.oldHtmlValue)},this.resetToOldLocationValues=function(){this.$editableLocationField.val(this.oldLocationValue),this.$placeIdField.val(this.oldPlaceIdValue),this.resetProfileLocationField(),this.updateProfileFieldContainerVisibility()},this.syncLocationValues=function(){var t=!1,e=this.editableLocationFieldValue(),i=this.$placeIdField.val();this.oldPlaceIdValue!==i&&""!==i?(t=!0,this.trigger("uiInlineEditSave",{newValue:e,field:this.$editableLocationField.attr("name")}),this.trigger("uiInlineEditSave",{newValue:i,field:this.$placeIdField.attr("name")})):this.oldLocationValue!==e&&(t=!0,this.trigger("uiInlineEditSave",{newValue:e,field:this.$editableLocationField.attr("name")})),t&&(this.setProfileLocationField(),this.trigger("uiEditProfileSaveLocation"))},this.trackSavedLocationFields=function(t,e){e.field===this.$editableLocationField.attr("name")?this.savedLocation=!0:e.field===this.$placeIdField.attr("name")&&(this.savedLocationId=!0)},this.setProfileLocationField=function(){var t=this.editableLocationFieldValue(),e=this.$placeIdField.val();t=e?t:t.substring(0,30);var i={location:t,place_id:e};this.$profileField.html(n.render(i)),this.updateProfileFieldContainerVisibility()},this.editableLocationFieldValue=function(){return this.$editableLocationField.val()},this.updateProfileFieldContainerVisibility=function(){var t=""===this.editableLocationFieldValue().trim();this.$profileFieldContainer.toggleClass(this.attr.hiddenClass,t)},this.preventLeadingSpace=function(t){32!==t.keyCode||this.editableLocationFieldValue()||(t.preventDefault(),t.stopImmediatePropagation())},this.startEditLocation=function(t){var i=e(t.target);i.trigger("uiStartEditGeoLocation")},this.finishEditLocation=function(t){var i=e(t.target);i.trigger("uiFinishEditGeoLocation")},this.after("initialize",function(){this.$editableLocationField=this.select("editableLocationFieldSelector"),this.$placeIdField=this.select("placeIdFieldSelector"),this.$profileField=e(this.attr.globalProfileFieldSelector),this.$profileFieldContainer=e(this.attr.globalProfileFieldContainerSelector),this.on(document,"uiEditProfileSaveFields",this.syncLocationValues),this.on(document,"uiEditProfileStart",this.saveOldLocationValues),this.on(document,"uiEditProfileCancel",this.resetToOldLocationValues),this.on(document,"uiShowProfileEditError",this.resetProfileLocationField),this.on(document,"uiInlineEditSave",this.trackSavedLocationFields),this.on(this.$editableLocationField,"keydown",this.preventLeadingSpace),this.on(this.$editableLocationField,"focus","uiEditProfileHideOptions"),this.on(this.$editableLocationField,"focus",this.startEditLocation),this.on(this.$editableLocationField,"focusout",this.finishEditLocation)})}var o=i(111),n=i(1044);t.exports=o(s)}).call(e,i(10))},1044:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("place_id",t,e,1),t,e,0,13,103,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <a href="/search?q=place%3A'),i.b(i.v(i.f("place_id",t,e,0))),i.b('" data-place-id="'),i.b(i.v(i.f("place_id",t,e,0))),i.b('">'),i.b(i.v(i.f("location",t,e,0))),i.b("</a>\n")}),t.pop()),s.s(s.f("place_id",t,e,1),t,e,1,0,0,"")||(s.b("  "),s.b(s.v(s.f("location",t,e,0))),s.b("\n"+i)),s.fl()},partials:{},subs:{}})}).call(e,i(1))},1045:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({cancelProfileButtonSelector:".cancel-profile-btn",saveProfileButtonSelector:".save-profile-btn",saveProfileFooterSelector:".save-profile-footer",bioProfileFieldSelector:".bio.profile-field",locationSelector:".location",urlProfileFieldSelector:".url .profile-field",dividerSelector:".location-and-url .divider",anchorSelector:"a",ignoreInTabIndex:".js-tooltip",keepTabIndexSelector:".js-keepTabIndex",tooltipSelector:".js-tooltip",updateSaveMessage:"Your profile has been saved.",scrollResetDuration:300,profileSavingClass:"profile-saving",profileEditingClass:"profile-editing",updateErrorMessage:"There was an error updating your profile.",useProfileErrorDialog:!0,firstActiveControlSelector:".ProfileCanopy",lastActiveControlSelector:".ProfilePage-editingButtons",firstEditableFieldSelector:".ProfileHeaderCardEditing",birthdateFieldSelector:".ProfileHeaderCard-birthdateText",birthdateContainerSelector:".ProfileHeaderCard-birthdate",nameProfileFieldSelector:".ProfileHeaderCard-nameLink",endEditOnSave:!0,onProfile:!0}),this.saveProfile=function(t,e){t.preventDefault(),this.trigger("uiEditProfileSaveFields"),this.trigger("uiEditProfileSave")},this.cancelProfileEditing=function(t,i){t.preventDefault();var s=e(t.target).attr("data-scribe-element");this.trigger("uiEditProfileCancel",{scribeContext:{element:s}}),this.trigger("uiEditProfileEnd")},this.isEditing=function(){return this.$body.hasClass(this.attr.profileEditingClass)},this.editModeOn=function(){this.attr.onProfile&&(o(0,this.attr.scrollResetDuration,function(){this.trigger(document,"uiProfileEditingOn")}.bind(this)),this.calculateScrollbarWidth(),this.$body.addClass(this.attr.profileEditingClass))},this.editModeOff=function(){this.$body.removeClass(this.attr.profileEditingClass),this.trigger(document,"uiProfileEditingOff")},this.fieldEditingModeOn=function(){this.$body.addClass("profile-field-editing"),this.select("dividerSelector").show()},this.fieldEditingModeOff=function(){this.$body.removeClass("profile-field-editing"),r(this.$node,this.attr.dividerSelector,this.attr.locationSelector,this.attr.urlProfileFieldSelector)},this.catchAnchorClicks=function(t){var i="_blank"===e(t.target).attr("target");this.isEditing()&&!i&&t.preventDefault()},this.focusFirstActiveControl=function(t){this.focusNextAvailableControl("first",this.select("firstActiveControlSelector")),t.preventDefault()},this.focusLastActiveControl=function(t){this.focusNextAvailableControl("last",this.select("lastActiveControlSelector")),t.preventDefault()},this.disabledTabbing=function(){this.select("ignoreInTabIndex").not(this.attr.keepTabIndexSelector).attr("tabindex","-1"),this.createFirstLastTabStop(this.$node,1,4),this.focusNextAvailableControl("first",this.select("firstEditableFieldSelector")),this.on(this.$node.find(this.attr.lastTabStopSelector),"focus",this.focusFirstActiveControl),this.on(this.$node.find(this.attr.firstTabStopSelector),"focus",this.focusLastActiveControl)},this.enableTabbing=function(){this.select("ignoreInTabIndex").not(this.attr.keepTabIndexSelector).removeAttr("tabindex"),this.removeFirstLastTabStop(this.$node),this.off(this.$node.find(this.attr.lastTabStopSelector),"focus",this.focusFirstActiveControl),this.off(this.$node.find(this.attr.firstTabStopSelector),"focus",this.focusLastActiveControl)},this.saving=function(){this.$body.addClass(this.attr.profileSavingClass)},this.handleError=function(t,e){this.doneSaving(),this.fieldEditingModeOn();var i={message:e.message||this.attr.updateErrorMessage};this.trigger("uiShowProfileEditError",i),this.attr.useProfileErrorDialog||this.trigger("uiShowError",i)},this.savingError=function(t,e){n.setTimeoutEvent("uiHandleSaveError",1e3,{message:e.message})},this.saveSuccess=function(t,e){this.doneSaving(),this.trigger("uiShowMessage",{message:this.attr.updateSaveMessage}),this.trigger("uiEditProfileSuccess")},this.doneSaving=function(){this.$body.removeClass(this.attr.profileSavingClass)},this.disableTooltips=function(){this.select("tooltipSelector").tooltip("disable").tooltip("hide")},this.enableTooltips=function(){this.select("tooltipSelector").tooltip("enable")},this.finishedProcessing=function(t,e){e&&(e.emojified_name&&this.select("nameProfileFieldSelector").html(e.emojified_name),e.linkified_description&&this.select("bioProfileFieldSelector").html(e.linkified_description),e.user_url&&this.select("urlProfileFieldSelector").html(e.user_url),e.has_birthdate&&e.birthdate&&(this.select("birthdateFieldSelector").html(e.birthdate),e.autoplay_balloon_animation&&this.trigger("uiBalloonAnimationRequested",{autoplay:!0})),"undefined"!=typeof e.has_birthdate&&(this.select("birthdateContainerSelector").toggleClass(this.attr.hiddenClass,!e.has_birthdate),this.trigger("uiBirthdateSelectGotTitle",{title:e.formatted_birthdate,has_birthdate:e.has_birthdate}))),this.attr.endEditOnSave&&this.trigger("uiEditProfileEnd")},this.after("initialize",function(){this.$body=e("body"),this.on("click",{cancelProfileButtonSelector:this.cancelProfileEditing,saveProfileButtonSelector:this.saveProfile,anchorSelector:this.catchAnchorClicks}),this.on("uiEditProfileStart",this.editModeOn),this.on("uiEditProfileEnd",this.editModeOff),this.on("uiEditProfileStart",this.disableTooltips),this.on("uiEditProfileEnd",this.enableTooltips),this.on("uiEditProfileStart",this.fieldEditingModeOn),this.on("uiEditProfileSave",this.fieldEditingModeOff),this.on("uiEditProfileEnd",this.fieldEditingModeOff),this.on("uiEditProfileStart",this.disabledTabbing),this.on("uiEditProfileEnd",this.enableTabbing),this.on(document,"dataInlineEditSaveStarted",this.saving),this.on(document,"dataInlineEditSaveSuccess",this.saveSuccess),this.on(document,"dataInlineEditSaveError",this.savingError),this.on(document,"uiHandleSaveError",this.handleError),this.on(document,"dataInlineEditSaveSuccess",this.finishedProcessing)})}var o=(i(123),i(832)),n=i(110),a=i(111),r=i(1046),l=i(1047),h=i(166),c=i(165);t.exports=a(s,c,l,h)}).call(e,i(10))},1046:function(t,e,i){(function(e){"use strict";t.exports=function(t,i,s,o){var n=t.find(i),a=!!e.trim(t.find(s).text()),r=!!e.trim(t.find(o).text());a&&r?n.show():n.hide()}}).call(e,i(10))},1047:function(t,e,i){(function(e){"use strict";function s(){o.mixin(this,[n]),this.defaultAttrs({avatarSelector:".avatar:first",avatarContainerSelector:".profile-picture:first",avatarPlaceholderSelector:".profile-picture-placeholder",hiddenClass:"hidden",removeFromPreview:".profile-editing-dialogs, .edit-header-target, input, label, textarea, .controls, .inline-edit-icon",avatarEditingSelector:".ProfileAvatarEditing",headerImageUploadDialogSelector:"#header_image_upload_dialog",headerCropperSelector:"#header_image_upload_dialog .cropper-mask",profileHeaderEditingClass:"is-editingHeader",profileHeaderInnerSelector:".ProfileCanopy-header",profileHeaderImageContainerSelector:".ProfileCanopy-headerBg",profileHeaderImageSelector:".ProfileCanopy-headerBg img",headerEditingSelector:".ProfileHeaderEditing",hasHeaderClass:"is-withHeader",iframeSavingClass:"is-iframeSaving"}),this.editHeaderModeOn=function(){this.$body.addClass(this.attr.profileHeaderEditingClass),this.hideHeaderOptions()},this.editHeaderModeOff=function(){this.$body.removeClass(this.attr.profileHeaderEditingClass),this.removeHeaderPreview()},this.removeHeaderPreview=function(){this.$headerPreview&&this.$headerPreview.remove()},this.updateImage=function(t,e){var i=e.status;this.isOfType("header",e)&&this.updateHeader(i),this.isOfType("avatar",e)&&(this.select("avatarSelector").attr("src",i),this.showAvatar())},this.updateHeader=function(t){var e=this.select("profileHeaderImageSelector");e.attr("src",t),e.removeClass(this.attr.hiddenClass),this.trigger("uiProfileHeaderUpdated"),this.select("headerEditingSelector").addClass(this.attr.hasHeaderClass)},this.useDefaultHeader=function(){this.select("profileHeaderImageSelector").addClass(this.attr.hiddenClass),this.select("headerEditingSelector").removeClass(this.attr.hasHeaderClass),this.trigger("uiProfileHeaderUpdated")},this.hasHeader=function(){return this.select("headerEditingSelector").hasClass(this.attr.hasHeaderClass)},this.showAvatar=function(){this.select("avatarContainerSelector").removeClass(this.attr.hiddenClass),this.select("avatarPlaceholderSelector").addClass(this.attr.hiddenClass),this.trigger("uiProfileAvatarUpdated"),this.select("avatarEditingSelector").addClass("is-withAvatar")},this.showAvatarPlaceholder=function(){this.select("avatarContainerSelector").addClass(this.attr.hiddenClass),this.select("avatarPlaceholderSelector").removeClass(this.attr.hiddenClass),this.trigger("uiProfileAvatarUpdated"),this.select("avatarEditingSelector").removeClass("is-withAvatar")},this.showDefaultImage=function(t,e){this.isOfType("avatar",e)&&this.showAvatarPlaceholder(),this.isOfType("header",e)&&this.useDefaultHeader()},this.isOfType=function(t,e){if(e)return e.sourceEventData&&e.sourceEventData.uploadType===t||e.uploadType===t},this.showLargeCanopy=function(){this.trigger("uiShowLargeCanopy")},this.showNormalCanopy=function(){this.trigger(this.hasHeader()?"uiShowLargeCanopy":"uiShowSmallCanopy")},this.showSavingHelp=function(t,e){this.isOfType("header",e)?this.select("headerEditingSelector").addClass(this.attr.iframeSavingClass):this.isOfType("avatar",e)&&this.select("avatarEditingSelector").addClass(this.attr.iframeSavingClass)},this.hideSavingHelp=function(t,e){this.isOfType("header",e)?this.select("headerEditingSelector").removeClass(this.attr.iframeSavingClass):this.isOfType("avatar",e)&&this.select("avatarEditingSelector").removeClass(this.attr.iframeSavingClass)},this.after("initialize",function(){this.$body=e("body"),this.on("uiDialogOpened",{headerImageUploadDialogSelector:this.editHeaderModeOn}),this.on("uiDialogClosed",{headerImageUploadDialogSelector:this.editHeaderModeOff}),this.on(document,"dataSaveImageSuccess",this.updateImage),this.on(document,"dataDeleteImageSuccess",this.showDefaultImage),this.on(document,"uiEditProfileStart",this.showLargeCanopy),this.on(document,"uiEditProfileEnd",this.showNormalCanopy),this.on(document,"dataLegacySaveImageStart",this.showSavingHelp),this.on(document,"dataLegacySaveImageFinish",this.hideSavingHelp)})}var o=i(121),n=i(1048);t.exports=s}).call(e,i(10))},1048:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({editHeaderSelector:".edit-header-target",editAvatarSelector:".profile-picture",cancelOptionsSelector:".cancel-options",changePhotoSelector:"#choose-photo",changeHeaderSelector:"#choose-header",canToggleHeaderOptions:!1}),this.isShowingHeaderOptions=function(){return this.$body.hasClass("show-header-options")},this.optionsEnabled=function(){this.canShowOptions=!0},this.optionsDisabled=function(){this.canShowOptions=!1},this.toggleAvatarOptions=function(t){t.preventDefault(),this.hideHeaderOptions(),o()?this.hideAvatarOptions():this.showAvatarOptions()},this.showAvatarOptions=function(){this.canShowOptions&&!o()&&(this.$body.addClass("show-avatar-options"),this.trigger(this.select("changePhotoSelector"),"uiShouldShowDropdown"))},this.hideAvatarOptions=function(){this.$body.hasClass("show-avatar-options")&&(this.$body.removeClass("show-avatar-options"),this.trigger(document,"uiForceDropdownClosed"))},this.toggleHeaderOptions=function(t){t.preventDefault(),this.hideAvatarOptions(),this.isShowingHeaderOptions()?this.hideHeaderOptions():this.showHeaderOptions()},this.showHeaderOptions=function(){this.canShowOptions&&!this.$body.hasClass("show-header-options")&&(this.$body.addClass("show-header-options"),this.trigger(this.select("changeHeaderSelector"),"uiShouldShowDropdown"))},this.hideHeaderOptions=function(){this.$body.hasClass("show-header-options")&&(this.$body.removeClass("show-header-options"),this.trigger(document,"uiForceDropdownClosed"))},this.hideOptions=function(){this.hideHeaderOptions(),this.hideAvatarOptions()},this.after("initialize",function(){this.$body=e("body"),this.on("click",{editAvatarSelector:this.toggleAvatarOptions,editHeaderSelector:this.attr.canToggleHeaderOptions?this.toggleHeaderOptions:this.showHeaderOptions,cancelOptionsSelector:this.hideOptions}),this.attr.canToggleHeaderOptions||this.on("uiDropdownCloseRequested",function(t){this.isShowingHeaderOptions()&&t.preventDefault()}),this.on("uiEditProfileStart",this.optionsEnabled),this.on("uiEditProfileEnd",this.optionsDisabled),this.on("uiProfileHeaderUpdated uiProfileAvatarUpdated uiEditProfileEnd uiEditProfileHideOptions",this.hideOptions),this.on(document,"uiShortcutEsc",this.hideOptions),this.on(document,"uiShowEditAvatarOptions",this.showAvatarOptions),this.on(document,"uiShowEditHeaderOptions",this.showHeaderOptions)})}var o=i(1049);t.exports=s}).call(e,i(10))},1049:function(t,e,i){(function(e){"use strict";t.exports=function(){return e("body").hasClass("show-avatar-options")}}).call(e,i(10))},1050:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({profileEditingCSSBundle:""}),this.initializeInlineProfileEditing=function(t,e){n.loadOnce(this.attr.profileEditingCSSBundle,this.triggerStart.bind(this,e.scribeElement))},this.editHeader=function(t,i){e(document).one("uiEditProfileStart",this.showHeaderOptions.bind(this)),this.trigger("uiEditProfileInitialize",{scribeElement:i.scribeElement})},this.showHeaderOptions=function(){this.trigger("uiShowEditHeaderOptions")},this.triggerStart=function(t){this.trigger("uiEditProfileStart",{scribeContext:{element:t}})},this.after("initialize",function(){this.retryCount=0,this.on(document,"uiEditProfileInitialize",this.initializeInlineProfileEditing),this.on(document,"uiEditProfileInitializeAndFocusOnHeaderOptions",this.editHeader)})}var o=i(111),n=i(1051);t.exports=o(s)}).call(e,i(10))},1051:function(t,e){function i(t,e){var i="function"==typeof e;if(n.indexOf(t)>-1)i&&e();else{var a=s(t);o(a,function(){n.push(t),i&&e()})}}function s(t,e,i){function s(t){return a.body?t():void setTimeout(function(){s(t)})}function o(){r.addEventListener&&r.removeEventListener("load",o),r.media=i||"all"}var n,a=window.document,r=a.createElement("link");if(e)n=e;else{var l=(a.body||a.getElementsByTagName("head")[0]).childNodes;n=l[l.length-1]}var h=a.styleSheets;r.rel="stylesheet",r.href=t,r.media="only x",s(function(){n.parentNode.insertBefore(r,e?n:n.nextSibling)});var c=function(t){for(var e=r.href,i=h.length;i--;)if(h[i].href===e)return t();setTimeout(function(){c(t)})};return r.addEventListener&&r.addEventListener("load",o),r.onloadcssdefined=c,c(o),r}function o(t,e){function i(){!s&&e&&(s=!0,e.call(t))}var s;t.addEventListener&&t.addEventListener("load",i),t.attachEvent&&t.attachEvent("onload",i),"isApplicationInstalled"in navigator&&"onloadcssdefined"in t&&t.onloadcssdefined(i)}/*! loadCSS: load a CSS file asynchronously. [c]2016 @scottjehl, Filament Group, Inc. Licensed MIT */
/*! onloadCSS: adds onload support for asynchronous stylesheets loaded with loadCSS. [c]2016 @zachleat, Filament Group, Inc. Licensed MIT */
var n=[];t.exports={load:s,loadOnce:i,onload:o}},1057:function(t,e,i){"use strict";function s(){this.defaultAttrs({placeIdSelector:".GeoSearch-placeId",searchStatusSelector:".GeoSearch-searchStatus",searchResultsContainerSelector:".GeoSearch-resultsContainer"}),this.setDefaultProfileLocations=function(t,e){this.defaultProfileLocationsHtml=e.html||""},this.hasDefaultLocations=function(){return!!this.defaultProfileLocationsHtml},this.showDefaultLocations=function(){this.select("searchStatusSelector").hide(),this.select("searchResultsContainerSelector").html(this.defaultProfileLocationsHtml),this.applyAriaAttrsToResultsAndAnnounceNumResults()},this.prepareInitialDropdown=function(){var t=this.getQuery();this.lastQuery=t,t.trim()?this.selectedNewLocation||(this.trigger("uiShouldShowDropdown"),this.doSearch(t)):this.setDefaultDropdown(),this.selectedNewLocation=!1},this.setDefaultDropdown=function(){this.hasDefaultLocations()?(this.isTypeaheadSearch=!1,this.clearDropdownResults(),this.showDefaultLocations(),this.trigger("uiShouldShowDropdown"),this.applyAriaAttrsToResultsAndAnnounceNumResults()):this.isOpen()&&this.closeDropdown()},this.after("openDropdown",function(){this.isEditingProfileLocation||(this.isEditingProfileLocation=!0,this.trigger("uiLocationPickerOpened"))}),this.after("closeDropdown",function(){this.clearDropdownResults()}),this.finishSaveLocation=function(){var t=this.getQuery();this.hasStructuredLocation()||this.trigger("uiLocationPickerInput",{context:"typeahead",referring_event:t})},this.clearDropdownResults=function(){this.select("searchResultsContainerSelector").empty()},this.clearPlaceId=function(){this.select("placeIdSelector").val("")},this.hasStructuredLocation=function(){return""!==this.select("placeIdSelector").val()},this.changeLocation=function(t,e){var i=this.getQuery(),s=e.placeId;e.placeName&&this.select("querySelector").val(e.placeName),s&&this.select("placeIdSelector").val(e.placeId),this.isEditingProfileLocation=!1,this.selectedNewLocation=!0,this.closeDropdown(),this.isTypeaheadSearch?this.trigger("uiLocationPickerSelect",{context:"typeahead",referring_event:i,message:s}):this.trigger("uiLocationPickerSelect",{context:"default",referring_event:i,message:s})},this.searchAutocomplete=function(){setTimeout(function(){this.searchIfQueryChanged()}.bind(this),0)},this.searchIfQueryChanged=function(){var t=this.getQuery();this.lastQuery!==t&&(this.lastQuery=t,this.clearPlaceId(),""===t?this.setDefaultDropdown():this.doSearch(t))},this.doSearch=function(t){this.isTypeaheadSearch=!0,this.select("searchStatusSelector").text("Searching places...").show(),this.trigger("uiGeoProfileSearch",{query:t})},this.searchResults=function(t,e){var i=e.sourceEventData;i&&i.query===this.select("querySelector").val()&&("unavailable"===e.status?this.closeDropdown():(this.clearDropdownResults(),e.html?(this.trigger("uiShouldShowDropdown"),this.select("searchStatusSelector").hide(),this.select("searchResultsContainerSelector").html(e.html),this.applyAriaAttrsToResultsAndAnnounceNumResults()):this.closeDropdown()))},this.after("initialize",function(){this.isEditingProfileLocation=!1,this.isTypeaheadSearch=!1,this.on(document,"uiEditProfileStart","uiRequestDefaultProfileLocations"),this.on(document,"uiEditProfileSaveLocation",this.finishSaveLocation),this.on(document,"dataDefaultProfileLocations",this.setDefaultProfileLocations),this.on(document,"dataProfileGeoSearchResults",this.searchResults),this.on(document,"dataProfileGeoSearchResultsUnavailable",this.closeDropdown),this.on("uiStartEditGeoLocation",{querySelector:this.prepareInitialDropdown}),this.on(this.select("querySelector"),"uiFinishEditGeoLocation",function(){this.isEditingProfileLocation=!1}),this.on("uiGeoSearchEnter",this.closeDropdown),this.on("uiGeoSearchTab",this.closeDropdown),this.on("uiGeoSearchChangeLocation",this.changeLocation),this.on("uiGeoSearchAutocomplete",this.searchAutocomplete)})}var o=i(111),n=(i(123),i(1058));t.exports=o(n,s)},1061:function(t,e,i){"use strict";function s(){this.defaultAttrs({webcamTitle:"Smile!",titleSelector:".modal-title",profileImageCropDivSelector:".image-upload-crop",profileImageWebcamDivSelector:".image-upload-webcam",cancelSelector:".profile-image-cancel",saveSelector:".profile-image-save",cropperSliderSelector:".cropper-slider",cropImageSelector:".crop-image",cropMaskSelector:".cropper-mask",cropOverlaySelector:".cropper-overlay",cropZoneSelector:".crop-zone",captureWebcamSelector:".profile-image-capture-webcam",webcamContainerSelector:".webcam-container",webcamCanvasSelector:".webcam-canvas",videoSelector:"video",videoOverlaySelector:".video-overlay",videoCountdownSelector:".video-countdown",retakeButtonSelector:".profile-image-previous",videoPermissionExplain:".video-permission-explain",videoPermissionFail:".video-permission-fail",imageUploadSpinnerSelector:".image-upload-spinner",maskPadding:40,top:50,uploadType:"",drawSurfaceSelector:".drawsurface",showSuccessMessage:!0,maximumWidth:2048,maximumHeight:2048,savingClass:"saving",isAvatarWhenShowingAvatarOptions:!0,alertMessageEvent:"uiAlertBanner"}),this.showCropper=function(t){this.setTitle(this.attr.originalTitle),this.select("captureWebcamSelector").hide(),this.select("videoSelector").hide(),this.select("saveSelector").show(),this.fileId=t,this.trigger(this.$dialog,"uiDialogContentChanged"),this.trigger("uiShowingCropper",{scribeElement:this.getScribeElement()})},this.setScribeElement=function(t){this.scribeElement=t},this.getScribeElement=function(){return this.scribeElement||"upload"},this.reset=function(){this.select("cropImageSelector").attr("src",""),this.select("cropImageSelector").attr("style",""),this.select("webcamContainerSelector").empty(),this.select("cancelSelector").show(),this.select("saveSelector").prop("disabled",!1).hide(),this.$node.removeClass(this.attr.savingClass),this.select("profileImageWebcamDivSelector").hide(),this.select("profileImageCropDivSelector").hide(),this.select("captureWebcamSelector").hide(),this.select("retakeButtonSelector").hide(),this.select("videoSelector").hide(),this.select("videoPermissionExplain").hide(),this.select("videoPermissionFail").hide()},this.swapVisibility=function(t,e){this.$node.find(t).hide(),this.$node.find(e).show()},this.haveImageSelected=function(t,e){var i=r.get(e.fileId);i&&(t.preventDefault(),this.gotImageData(e.uploadType,i),this.trigger("uiCloseDropdowns"))},this.gotImageData=function(t,e,i){this.openDialog(),this.trigger("uiUploadReceived"),this.select("cropImageSelector").attr("src",n.getObjectUrl(e.fileHandle)),this.select("profileImageCropDivSelector").show(),this.setScribeElement("upload"),this.showCropper(e.fileId),i&&this.trigger("uiDropped")},this.openDialog=function(){this.open(),this.reset()},this.setTitle=function(t){this.select("titleSelector").text(t)},this.showWebcam=function(t,e){this.setTitle(this.attr.webcamTitle),this.openDialog(),this.select("profileImageWebcamDivSelector").show(),this.select("captureWebcamSelector").show(),this.initializeWebcam(),this.trigger("uiShowingWebcam")},this.webcamCaptured=function(t,e){this.swapVisibility(this.attr.profileImageWebcamDivSelector,this.attr.profileImageCropDivSelector),this.setScribeElement("webcam"),this.select("retakeButtonSelector").show(),this.showCropper(e.fileId)},this.save=function(t,e){if(!this.$node.hasClass(this.attr.savingClass))return this.prepareCroppedImage(),t.preventDefault(),!1},this.readyToCrop=function(){var t=this.fileId,e=r.get(t);if(e){var i=this.clientsideCrop(this.determineCrop());r.update(this.fileId,{fileHandle:n.getBlobFromDataUri(i.fileData)}),this.trigger("uiImageSave",{fileId:t,uploadType:this.attr.uploadType,scribeData:{scribeElement:this.getScribeElement()},cropData:i.cropData}),this.enterSavingState()}},this.enterSavingState=function(){this.select("imageUploadSpinnerSelector").css("height",this.select("profileImageCropDivSelector").height()),this.$node.addClass(this.attr.savingClass),this.select("saveSelector").prop("disabled",!0),this.select("cancelSelector").hide()},this.resetState=function(){var t=r.get(this.fileId);t&&(n.revokeObjectUrl(this.select("cropImageSelector").attr("src")),r.remove(this.fileId),this.fileId=null)},this.uploadSuccess=function(t,e){if(this.attr.showSuccessMessage){var i={avatar:"Your profile photo was published successfully.",header:"Your header was published successfully.",background:"Your background was published successfully."};this.trigger("uiAlertBanner",{message:i[this.attr.uploadType]||"Published successfully."})}this.trigger("uiProfileImagePublished",{scribeElement:this.getScribeElement()}),this.close(),this.resetState()},this.uploadFailed=function(t,e){this.trigger("uiProfileImageDialogFailure",{scribeElement:this.getScribeElement()}),this.trigger(this.attr.alertMessageEvent,{message:e.message}),this.close(),this.resetState()},this.interceptGotProfileImageData=function(t,e){var i=this.attr.isAvatarWhenShowingAvatarOptions&&"header"===e.uploadType&&a(),s=i?"avatar":e.uploadType,o=r.get(e.fileId);o&&s===this.attr.uploadType&&this.gotImageData(s,o,e.wasDropped)},this.proxyTakePhoto=function(t,e){this.takePhoto(t,e)},this.after("initialize",function(){this.attr.originalTitle=this.select("titleSelector").text(),this.on(document,"uiCropperWebcam",this.verifyUploadType(this.showWebcam)),this.on(document,"uiFileSelected",this.verifyUploadType(this.haveImageSelected)),this.on("jsCamCapture",this.webcamCaptured),this.on(this.select("captureWebcamSelector"),"click",this.proxyTakePhoto),this.on(this.select("retakeButtonSelector"),"click",this.showWebcam),this.on(this.select("saveSelector"),"click",this.save),this.on(this.attr.cancelSelector,"click",this.close),this.on("uiCroppedImageReady",this.readyToCrop),this.on(document,"dataSaveImageSuccess",this.verifyUploadType(this.uploadSuccess)),this.on(document,"dataSaveImageFailure",this.verifyUploadType(this.uploadFailed)),this.on(document,"uiGotProfileImageData",this.interceptGotProfileImageData),this.on("uiDialogClosed",function(){this.reset(),this.trigger("uiProfileImageDialogClose")})})}var o=(i(123),i(111)),n=i(292),a=i(1049),r=i(220),l=i(1062),h=i(163),c=i(1032),d=i(1064);t.exports=o(s,l,h,c,d)},1062:function(t,e,i){(function(e){"use strict";function s(t){return t%2!==0}function o(){this.defaultAttrs({maxImageSize:3072e3}),this.determineCrop=function(){var t=this.$cropImage.offset(),e=this.$cropImage.width(),i=this.$cropImage.height(),s=this.$cropMask.offset(),o=this.$cropMask.width(),n=this.$cropMask.height(),a=this.originalWidth/e,r=this.attr.maskPadding,l=s.top-t.top+r,h=s.left-t.left+r,c=s.left+r>t.left?s.left+r:t.left,d=s.top+r>t.top?s.top+r:t.top,u=s.left+o-r<t.left+e?s.left+o-r:t.left+e,p=s.top+n-r<t.top+i?s.top+n-r:t.top+i,m=Math.round(a*(h>=0?h:0)),f=Math.round(a*(l>=0?l:0)),g=this.originalWidth-m,v=this.originalHeight-f;return{maskWidth:o-2*r,maskHeight:n-2*r,imageLeft:m,imageTop:f,imageWidth:Math.min(Math.round(a*(u-c)),g),imageHeight:Math.min(Math.round(a*(p-d)),v),maskY:l<0?-l:0,maskX:h<0?-h:0}},this.determineImageType=function(t){return 0===t.substr(t.indexOf(","),4).indexOf(",/9j")?"image/jpeg":"image/png"},this.compressionImageQuality=function(){var t=void 0;return t=n.getDecider("hqImageUploads")?h:n.getDecider("mqImageUploads")?l:r},this.canvasToDataURI=function(t,e){return t.width>d||t.height>c?null:"image/jpeg"===e?t.toDataURL("image/jpeg",this.compressionImageQuality()):t.toDataURL("image/png")},this.prepareCroppedImage=function(){this.$croppedImage=e("<img>"),this.requiresCrossOriginCroppedImage()&&this.$croppedImage.attr("crossorigin","Anonymous"),this.on(this.$croppedImage,"load",this.croppedImageReady),this.$croppedImage.attr("src",this.$cropImage.attr("src"))},this.requiresCrossOriginCroppedImage=function(){var t=this.$cropImage.attr("src");return t&&0!==t.indexOf("data:")},this.croppedImageReady=function(){this.trigger("uiCroppedImageReady")},this.computeTargetRect=function(t){var e=Math.min(Math.max(t.maskWidth,t.imageWidth),this.attr.maximumWidth),i=Math.min(Math.max(t.maskHeight,t.imageHeight),this.attr.maximumHeight);return{width:e,height:i,x:Math.round(t.maskX*(e/t.maskWidth)),y:Math.round(t.maskY*(i/t.maskHeight))}},this.getHeaderCropData=function(t){var e=t.getContext("2d");return{offsetTop:0,offsetLeft:0,width:e.canvas.width,height:e.canvas.height}},this.clientsideCrop=function(t){var e=this.determineImageType(this.$cropImage.attr("src")),i="header"===this.attr.uploadType,s=i?this.clientsideCropLarge(t,e):this.clientsideCropStandard(t),o={fileData:this.canvasToDataURI(s,e)};return i?o:a.merge(o,{cropData:this.getHeaderCropData(s)})},this.clientsideCropStandard=function(t){var e=this.select("drawSurfaceSelector"),i=e[0].getContext("2d"),s=this.computeTargetRect(t);return this.$croppedImage.height(this.originalHeight).width(this.originalWidth),i.canvas.width=s.width,i.canvas.height=s.height,i.fillStyle="white",i.fillRect(0,0,s.width,s.height),i.drawImage(this.$croppedImage[0],t.imageLeft,t.imageTop,t.imageWidth,t.imageHeight,s.x,s.y,s.width,s.height),e[0]},this.clientsideCropLarge=function(t,e){var i=t.imageHeight,s=t.imageWidth,o=t.imageTop,n=t.imageLeft,a=this.createCanvas(s,i),r=a.getContext("2d");r.imageSmoothingEnabled=!1,r.drawImage(this.$croppedImage[0],n,o,s,i,0,0,s,i);for(var l=i,h=s,c=this.canvasToDataURI(a,e);null==c||c.length>this.attr.maxImageSize;){var d=Math.ceil(.5*h),u=Math.ceil(.5*l),p=this.createCanvas(d,u),m=p.getContext("2d");m.imageSmoothingEnabled=!0,m.drawImage(a,0,0,h,l,0,0,d,u),c=this.canvasToDataURI(p,e),a=p,h=d,l=u}return a},this.createCanvas=function(t,e){var i=document.createElement("canvas");return i.width=t,i.height=e,i},this.cropDimensions=function(){var t=this.$cropMask.offset();return{top:t.top,left:t.left,maskWidth:this.$cropMask.width(),maskHeight:this.$cropMask.height(),cropWidth:this.$cropMask.width()-2*this.attr.maskPadding,cropHeight:this.$cropMask.height()-2*this.attr.maskPadding}},this.bestFitImage=function(){var t=this.cropDimensions(),e=this.originalWidth,i=this.originalHeight;this.cropWidth=t.cropWidth,this.cropHeight=t.cropHeight;var s=e/i;e>=i&&t.cropWidth>=t.cropHeight&&s>=t.cropWidth/t.cropHeight?(i=t.cropHeight,e=Math.round(e*(i/this.originalHeight))):(e=t.cropWidth,i=Math.round(i*(e/this.originalWidth))),this.$cropImage.width(e).height(i).offset({top:t.maskHeight/2-i/2+t.top,left:t.maskWidth/2-e/2+t.left}),this.bestFitHeight=i,this.bestFitWidth=e},this.onDragStart=function(t,e){this.attr.imageStartOffset=this.select("cropImageSelector").offset()},this.getOffsetConstraints=function(){var t=this.$cropMask.offset(),e=this.attr.maskPadding,i=t.left+e,s=i+this.$cropMask.width()-this.$cropImage.width()-2*e,o=t.top+e,n=o+this.$cropMask.height()-this.$cropImage.height()-2*e;return{minLeft:s,maxLeft:i,minTop:n,maxTop:o,rangeLeft:i-s,rangeTop:o-n}},this.setImageOffsetConstrainedToFit=function(t){var e=this.getOffsetConstraints();this.$cropImage.offset({left:Math.min(Math.max(e.minLeft,t.left),e.maxLeft),top:Math.min(Math.max(e.minTop,t.top),e.maxTop)})},this.onDragHandler=function(t,e){this.setImageOffsetConstrainedToFit({top:this.attr.imageStartOffset.top+e.position.top-e.originalPosition.top,left:this.attr.imageStartOffset.left+e.position.left-e.originalPosition.left})},this.onDragStop=function(t,e){this.select("cropOverlaySelector").offset(this.select("cropMaskSelector").offset())},this.setScaleValue=function(t){var e=this.$cropImage.offset(),i=Math.round(e.left+this.$cropImage.width()/2),o=Math.round(e.top+this.$cropImage.height()/2),n=Math.round(this.bestFitHeight*(1+t/100)),a=Math.round(this.bestFitWidth*(1+t/100));n=s(n)?n+=1:n,a=s(a)?a+=1:a,this.$cropImage.height(n).width(a),this.setImageOffsetConstrainedToFit({top:Math.round(o-n/2),left:Math.round(i-a/2)})},this.onSlide=function(t,e){e.value!==this.lastScaleValue&&(this.lastScaleValue=e.value,this.setScaleValue(e.value))},this.imageLoaded=function(t,e){this.originalHeight=this.$cropImage.height(),this.originalWidth=this.$cropImage.width(),this.$slider.slider({value:0,max:100,min:0,slide:this.onSlide.bind(this)}).slider("option","value",0),this.lastScaleValue=0,this.bestFitImage(),this.select("cropOverlaySelector").draggable({drag:this.onDragHandler.bind(this),stop:this.onDragStop.bind(this),start:this.onDragStart.bind(this),containment:this.attr.cropContainerSelector,scroll:!1})},this.getNormalizedOffset=function(){var t=this.getOffsetConstraints(),e=this.$cropImage.offset();return{left:(e.left-t.minLeft)/(t.rangeLeft||1),top:(e.top-t.minTop)/(t.rangeTop||1)}},this.setNormalizedOffset=function(t){var e=this.getOffsetConstraints();this.$cropImage.offset({left:e.minLeft+e.rangeLeft*t.left,top:e.minTop+e.rangeTop*t.top})},this.setCropMetrics=function(t,e){var i=this.getNormalizedOffset();this.select("cropZoneSelector").height(e.zoneHeight).width(e.zoneWidth),this.$cropMask.css({left:e.left,top:e.top,width:e.width,height:e.height}),this.cropWidth===e.width&&this.cropHeight===e.height||(this.bestFitImage(),this.setScaleValue(this.lastScaleValue),this.setNormalizedOffset(i))},this.after("initialize",function(){this.$cropImage=this.select("cropImageSelector"),this.$cropMask=this.select("cropMaskSelector"),this.$slider=this.select("cropperSliderSelector"),this.on(this.attr.cropImageSelector,"load",this.imageLoaded),this.on("uiSetCropMetrics",this.setCropMetrics)})}i(1063);var n=i(136),a=i(126),r=.75,l=.85,h=.9,c=4096,d=4096;t.exports=o}).call(e,i(10))},1063:function(t,e,i){/*! jQuery UI - v1.11.4 - 2016-06-20
	* http://jqueryui.com
	* Includes: core.js, widget.js, mouse.js, draggable.js, resizable.js, slider.js
	* Copyright jQuery Foundation and other contributors; Licensed MIT */
!function(e){var s=i(10);e(s),t.exports=s}(function(t){function e(e,s){var o,n,a,r=e.nodeName.toLowerCase();return"area"===r?(o=e.parentNode,n=o.name,!(!e.href||!n||"map"!==o.nodeName.toLowerCase())&&(a=t("img[usemap='#"+n+"']")[0],!!a&&i(a))):(/^(input|select|textarea|button|object)$/.test(r)?!e.disabled:"a"===r?e.href||s:s)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}/*!
	 * jQuery UI Core 1.11.4
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/category/ui-core/
	 */
t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var i=this.css("position"),s="absolute"===i,o=e?/(auto|scroll|hidden)/:/(auto|scroll)/,n=this.parents().filter(function(){var e=t(this);return(!s||"static"!==e.css("position"))&&o.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var s=t.attr(i,"tabindex"),o=isNaN(s);return(o||s>=0)&&e(i,!o)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function s(e,i,s,n){return t.each(o,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var o="Width"===i?["Left","Right"]:["Top","Bottom"],n=i.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?a["inner"+i].call(this):this.each(function(){t(this).css(n,s(this,e)+"px")})},t.fn["outer"+i]=function(e,o){return"number"!=typeof e?a["outer"+i].call(this,e):this.each(function(){t(this).css(n,s(this,e,!0,o)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,s){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),s&&s.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,s,o=t(this[0]);o.length&&o[0]!==document;){if(i=o.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(o.css("zIndex"),10),!isNaN(s)&&0!==s))return s;o=o.parent()}return 0}}),t.ui.plugin={add:function(e,i,s){var o,n=t.ui[e].prototype;for(o in s)n.plugins[o]=n.plugins[o]||[],n.plugins[o].push([i,s[o]])},call:function(t,e,i,s){var o,n=t.plugins[e];if(n&&(s||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(o=0;o<n.length;o++)t.options[n[o][0]]&&n[o][1].apply(t.element,i)}};/*!
	 * jQuery UI Widget 1.11.4
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/jQuery.widget/
	 */
var s=0,o=Array.prototype.slice;t.cleanData=function(e){return function(i){var s,o,n;for(n=0;null!=(o=i[n]);n++)try{s=t._data(o,"events"),s&&s.remove&&t(o).triggerHandler("remove")}catch(a){}e(i)}}(t.cleanData),t.widget=function(e,i,s){var o,n,a,r,l={},h=e.split(".")[0];return e=e.split(".")[1],o=h+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[h]=t[h]||{},n=t[h][e],a=t[h][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,n,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(s,function(e,s){return t.isFunction(s)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},o=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,n=this._superApply;return this._super=t,this._superApply=o,e=s.apply(this,arguments),this._super=i,this._superApply=n,e}}()):void(l[e]=s)}),a.prototype=t.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix||e:e},l,{constructor:a,namespace:h,widgetName:e,widgetFullName:o}),n?(t.each(n._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,a,i._proto)}),delete n._childConstructors):i._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var i,s,n=o.call(arguments,1),a=0,r=n.length;a<r;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t.isPlainObject(s)?e[i]=t.isPlainObject(e[i])?t.widget.extend({},e[i],s):t.widget.extend({},s):e[i]=s);return e},t.widget.bridge=function(e,i){var s=i.prototype.widgetFullName||e;t.fn[e]=function(n){var a="string"==typeof n,r=o.call(arguments,1),l=this;return a?this.each(function(){var i,o=t.data(this,s);return"instance"===n?(l=o,!1):o?t.isFunction(o[n])&&"_"!==n.charAt(0)?(i=o[n].apply(o,r),i!==o&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+n+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+n+"'")}):(r.length&&(n=t.widget.extend.apply(null,[n].concat(r))),this.each(function(){var e=t.data(this,s);e?(e.option(n||{}),e._init&&e._init()):t.data(this,s,new i(n,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var s,o,n,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},s=e.split("."),e=s.shift(),s.length){for(o=a[e]=t.widget.extend({},this.options[e]),n=0;n<s.length-1;n++)o[s[n]]=o[s[n]]||{},o=o[s[n]];if(e=s.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=i}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,s){var o,n=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=o=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,o=this.widget()),t.each(s,function(s,a){function r(){if(e||n.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof a?n[a]:a).apply(n,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||t.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),h=l[1]+n.eventNamespace,c=l[2];c?o.delegate(c,h,r):i.bind(h,r)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(i).undelegate(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var o,n,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(o in n)o in i||(i[o]=n[o]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,o,n){"string"==typeof o&&(o={effect:o});var a,r=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),a=!t.isEmptyObject(o),o.complete=n,o.delay&&s.delay(o.delay),a&&t.effects&&t.effects.effect[r]?s[e](o):r!==e&&s[r]?s[r](o.duration,o.easing,n):s.queue(function(i){t(this)[e](),n&&n.call(s[0]),i()})}});var n=(t.widget,!1);t(document).mouseup(function(){n=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!n){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,s=1===e.which,o=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&t(e.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(e))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),n=!0,!0))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),n=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});/*!
	 * jQuery UI Draggable 1.11.4
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/draggable/
	 */
t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return this._blurActiveElement(e),!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(e),!!this.handle&&(this._blockFrames(i.iframeFix===!0?"iframe":i.iframeFix),!0))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=this.document[0];if(this.handleElement.is(e.target))try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(s){}},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(this._trigger("drag",e,s)===!1)return this._mouseUp({}),!1;this.position=s.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,s=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(s=t.ui.ddmanager.drop(this,e)),this.dropped&&(s=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper),o=s?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,s,o=this.options,n=this.document[0];return this.relativeContainer=null,o.containment?"window"===o.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,t(n).width()-this.helperProportions.width-this.margins.left,(t(n).height()||n.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=t(o.containment),s=i[0],void(s&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,s=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,s,o,n,a=this.options,r=this._isRootNode(this.scrollParent[0]),l=t.pageX,h=t.pageY;return r&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(s=this.relativeContainer.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),a.grid&&(o=a.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,h=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-a.grid[1]:o+a.grid[1]:o,n=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=i?n-this.offset.click.left>=i[0]||n-this.offset.click.left>i[2]?n:n-this.offset.click.left>=i[0]?n-a.grid[0]:n+a.grid[0]:n),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(h=this.originalPageY)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:r?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:r?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),s.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,s){var o=t.extend({},i,{item:s.element});s.sortables=[],t(s.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(s.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,s){var o=t.extend({},i,{item:s.element});s.cancelHelperRemoval=!1,t.each(s.sortables,function(){var t=this;t.isOver?(t.isOver=0,s.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,o))})},drag:function(e,i,s){t.each(s.sortables,function(){var o=!1,n=this;n.positionAbs=s.positionAbs,n.helperProportions=s.helperProportions,n.offset.click=s.offset.click,n._intersectsWith(n.containerCache)&&(o=!0,t.each(s.sortables,function(){return this.positionAbs=s.positionAbs,this.helperProportions=s.helperProportions,this.offset.click=s.offset.click,this!==n&&this._intersectsWith(this.containerCache)&&t.contains(n.element[0],this.element[0])&&(o=!1),o})),o?(n.isOver||(n.isOver=1,s._parent=i.helper.parent(),n.currentItem=i.helper.appendTo(n.element).data("ui-sortable-item",!0),n.options._helper=n.options.helper,n.options.helper=function(){return i.helper[0]},e.target=n.currentItem[0],n._mouseCapture(e,!0),n._mouseStart(e,!0,!0),n.offset.click.top=s.offset.click.top,n.offset.click.left=s.offset.click.left,n.offset.parent.left-=s.offset.parent.left-n.offset.parent.left,n.offset.parent.top-=s.offset.parent.top-n.offset.parent.top,s._trigger("toSortable",e),s.dropped=n.element,t.each(s.sortables,function(){this.refreshPositions()}),s.currentItem=s.element,n.fromOutside=s),n.currentItem&&(n._mouseDrag(e),i.position=n.position)):n.isOver&&(n.isOver=0,n.cancelHelperRemoval=!0,n.options._revert=n.options.revert,n.options.revert=!1,n._trigger("out",e,n._uiHash(n)),n._mouseStop(e,!0),n.options.revert=n.options._revert,n.options.helper=n.options._helper,n.placeholder&&n.placeholder.remove(),i.helper.appendTo(s._parent),s._refreshOffsets(e),i.position=s._generatePosition(e,!0),s._trigger("fromSortable",e),s.dropped=!1,t.each(s.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,s){var o=t("body"),n=s.options;o.css("cursor")&&(n._cursor=o.css("cursor")),o.css("cursor",n.cursor)},stop:function(e,i,s){var o=s.options;o._cursor&&t("body").css("cursor",o._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,s){var o=t(i.helper),n=s.options;o.css("opacity")&&(n._opacity=o.css("opacity")),o.css("opacity",n.opacity)},stop:function(e,i,s){var o=s.options;o._opacity&&t(i.helper).css("opacity",o._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,s){var o=s.options,n=!1,a=s.scrollParentNotHidden[0],r=s.document[0];a!==r&&"HTML"!==a.tagName?(o.axis&&"x"===o.axis||(s.overflowOffset.top+a.offsetHeight-e.pageY<o.scrollSensitivity?a.scrollTop=n=a.scrollTop+o.scrollSpeed:e.pageY-s.overflowOffset.top<o.scrollSensitivity&&(a.scrollTop=n=a.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(s.overflowOffset.left+a.offsetWidth-e.pageX<o.scrollSensitivity?a.scrollLeft=n=a.scrollLeft+o.scrollSpeed:e.pageX-s.overflowOffset.left<o.scrollSensitivity&&(a.scrollLeft=n=a.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(e.pageY-t(r).scrollTop()<o.scrollSensitivity?n=t(r).scrollTop(t(r).scrollTop()-o.scrollSpeed):t(window).height()-(e.pageY-t(r).scrollTop())<o.scrollSensitivity&&(n=t(r).scrollTop(t(r).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(e.pageX-t(r).scrollLeft()<o.scrollSensitivity?n=t(r).scrollLeft(t(r).scrollLeft()-o.scrollSpeed):t(window).width()-(e.pageX-t(r).scrollLeft())<o.scrollSensitivity&&(n=t(r).scrollLeft(t(r).scrollLeft()+o.scrollSpeed)))),n!==!1&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(s,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,s){var o=s.options;s.snapElements=[],t(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var e=t(this),i=e.offset();this!==s.element[0]&&s.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,s){var o,n,a,r,l,h,c,d,u,p,m=s.options,f=m.snapTolerance,g=i.offset.left,v=g+s.helperProportions.width,S=i.offset.top,w=S+s.helperProportions.height;for(u=s.snapElements.length-1;u>=0;u--)l=s.snapElements[u].left-s.margins.left,h=l+s.snapElements[u].width,c=s.snapElements[u].top-s.margins.top,d=c+s.snapElements[u].height,v<l-f||g>h+f||w<c-f||S>d+f||!t.contains(s.snapElements[u].item.ownerDocument,s.snapElements[u].item)?(s.snapElements[u].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[u].item})),s.snapElements[u].snapping=!1):("inner"!==m.snapMode&&(o=Math.abs(c-w)<=f,n=Math.abs(d-S)<=f,a=Math.abs(l-v)<=f,r=Math.abs(h-g)<=f,o&&(i.position.top=s._convertPositionTo("relative",{top:c-s.helperProportions.height,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:d,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l-s.helperProportions.width}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h}).left)),p=o||n||a||r,"outer"!==m.snapMode&&(o=Math.abs(c-S)<=f,n=Math.abs(d-w)<=f,a=Math.abs(l-g)<=f,r=Math.abs(h-v)<=f,o&&(i.position.top=s._convertPositionTo("relative",{top:c,left:0}).top),n&&(i.position.top=s._convertPositionTo("relative",{top:d-s.helperProportions.height,left:0}).top),a&&(i.position.left=s._convertPositionTo("relative",{top:0,left:l}).left),r&&(i.position.left=s._convertPositionTo("relative",{top:0,left:h-s.helperProportions.width}).left)),!s.snapElements[u].snapping&&(o||n||a||r||p)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[u].item})),s.snapElements[u].snapping=o||n||a||r||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,s){var o,n=s.options,a=t.makeArray(t(n.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});a.length&&(o=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",o+e)}),this.css("zIndex",o+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,s){var o=t(i.helper),n=s.options;o.css("zIndex")&&(n._zIndex=o.css("zIndex")),o.css("zIndex",n.zIndex)},stop:function(e,i,s){var o=s.options;o._zIndex&&t(i.helper).css("zIndex",o._zIndex)}});t.ui.draggable;/*!
	 * jQuery UI Resizable 1.11.4
	 * http://jqueryui.com
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license.
	 * http://jquery.org/license
	 *
	 * http://api.jqueryui.com/resizable/
	 */
t.widget("ui.resizable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(t){return parseInt(t,10)||0},_isNumber:function(t){return!isNaN(parseInt(t,10))},_hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return e[s]>0||(e[s]=1,o=e[s]>0,e[s]=0,o)},_create:function(){var e,i,s,o,n,a=this,r=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),n="ui-resizable-"+s,o=t("<div class='ui-resizable-handle "+n+"'></div>"),o.css({zIndex:r.zIndex}),this.handles[s]=".ui-resizable-"+s,this.element.append(o);this._renderAxis=function(e){var i,s,o,n;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=t(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(o,n),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),r.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(t(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){r.disabled||a.resizing||(t(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,o=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(e){var i,s,o,n=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),n.containment&&(i+=t(n.containment).scrollLeft()||0,s+=t(n.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof n.aspectRatio?n.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),a.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s,o=this.originalMousePosition,n=this.axis,a=e.pageX-o.left||0,r=e.pageY-o.top||0,l=this._change[n];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[e,a,r]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,o,n,a,r,l,h=this.options,c=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&this._hasScroll(i[0],"left")?0:c.sizeDiff.height,n=s?0:c.sizeDiff.width,a={width:c.helper.width()-n,height:c.helper.height()-o},r=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(t.extend(a,{top:l,left:r})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},_updateVirtualBoundaries:function(t){var e,i,s,o,n,a=this.options;n={minWidth:this._isNumber(a.minWidth)?a.minWidth:0,maxWidth:this._isNumber(a.maxWidth)?a.maxWidth:1/0,minHeight:this._isNumber(a.minHeight)?a.minHeight:0,maxHeight:this._isNumber(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=n.minHeight*this.aspectRatio,s=n.minWidth/this.aspectRatio,i=n.maxHeight*this.aspectRatio,o=n.maxWidth/this.aspectRatio,e>n.minWidth&&(n.minWidth=e),s>n.minHeight&&(n.minHeight=s),i<n.maxWidth&&(n.maxWidth=i),o<n.maxHeight&&(n.maxHeight=o)),this._vBoundaries=n},_updateCache:function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,s=this.axis;return this._isNumber(t.height)?t.width=t.height*this.aspectRatio:this._isNumber(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,s=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,n=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,a=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,r=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,h=/sw|nw|w/.test(i),c=/nw|ne|n/.test(i);return n&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),n&&h&&(t.left=r-e.minWidth),s&&h&&(t.left=r-e.maxWidth),a&&c&&(t.top=l-e.minHeight),o&&c&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_getPaddingPlusBorderDimensions:function(t){for(var e=0,i=[],s=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],o=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")];e<4;e++)i[e]=parseInt(s[e],10)||0,i[e]+=parseInt(o[e],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var t,e=0,i=this.helper||this.element;e<this._proportionallyResizeElements.length;e++)t=this._proportionallyResizeElements[e],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(t)),t.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).resizable("instance"),s=i.options,o=i._proportionallyResizeElements,n=o.length&&/textarea/i.test(o[0].nodeName),a=n&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,r=n?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-a},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&t(o[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,i,s,o,n,a,r,l=t(this).resizable("instance"),h=l.options,c=l.element,d=h.containment,u=d instanceof t?d.get(0):/parent/.test(d)?c.parent().get(0):d;u&&(l.containerElement=t(u),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(u),i=[],t(["Top","Right","Left","Bottom"]).each(function(t,s){i[t]=l._num(e.css("padding"+s))}),l.containerOffset=e.offset(),l.containerPosition=e.position(),l.containerSize={height:e.innerHeight()-i[3],width:e.innerWidth()-i[1]},s=l.containerOffset,o=l.containerSize.height,n=l.containerSize.width,a=l._hasScroll(u,"left")?u.scrollWidth:n,r=l._hasScroll(u)?u.scrollHeight:o,l.parentData={element:u,left:s.left,top:s.top,width:a,height:r}))},resize:function(e){var i,s,o,n,a=t(this).resizable("instance"),r=a.options,l=a.containerOffset,h=a.position,c=a._aspectRatio||e.shiftKey,d={top:0,left:0},u=a.containerElement,p=!0;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),h.left<(a._helper?l.left:0)&&(a.size.width=a.size.width+(a._helper?a.position.left-l.left:a.position.left-d.left),c&&(a.size.height=a.size.width/a.aspectRatio,p=!1),a.position.left=r.helper?l.left:0),h.top<(a._helper?l.top:0)&&(a.size.height=a.size.height+(a._helper?a.position.top-l.top:a.position.top),c&&(a.size.width=a.size.height*a.aspectRatio,p=!1),a.position.top=a._helper?l.top:0),o=a.containerElement.get(0)===a.element.parent().get(0),n=/relative|absolute/.test(a.containerElement.css("position")),o&&n?(a.offset.left=a.parentData.left+a.position.left,a.offset.top=a.parentData.top+a.position.top):(a.offset.left=a.element.offset().left,a.offset.top=a.element.offset().top),i=Math.abs(a.sizeDiff.width+(a._helper?a.offset.left-d.left:a.offset.left-l.left)),s=Math.abs(a.sizeDiff.height+(a._helper?a.offset.top-d.top:a.offset.top-l.top)),i+a.size.width>a.parentData.width&&(a.size.width=a.parentData.width-i,c&&(a.size.height=a.size.width/a.aspectRatio,p=!1)),s+a.size.height>a.parentData.height&&(a.size.height=a.parentData.height-s,c&&(a.size.width=a.size.height*a.aspectRatio,p=!1)),p||(a.position.left=a.prevPosition.left,a.position.top=a.prevPosition.top,a.size.width=a.prevSize.width,a.size.height=a.prevSize.height)},stop:function(){var e=t(this).resizable("instance"),i=e.options,s=e.containerOffset,o=e.containerPosition,n=e.containerElement,a=t(e.helper),r=a.offset(),l=a.outerWidth()-e.sizeDiff.width,h=a.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:r.left-o.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:r.left-o.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).resizable("instance"),i=e.options;t(i.alsoResize).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})},resize:function(e,i){var s=t(this).resizable("instance"),o=s.options,n=s.originalSize,a=s.originalPosition,r={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-a.top||0,left:s.position.left-a.left||0};t(o.alsoResize).each(function(){var e=t(this),s=t(this).data("ui-resizable-alsoresize"),o={},n=e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(n,function(t,e){var i=(s[e]||0)+(r[e]||0);i&&i>=0&&(o[e]=i||null)}),e.css(o)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).resizable("instance"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).resizable("instance");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).resizable("instance");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e,i=t(this).resizable("instance"),s=i.options,o=i.size,n=i.originalSize,a=i.originalPosition,r=i.axis,l="number"==typeof s.grid?[s.grid,s.grid]:s.grid,h=l[0]||1,c=l[1]||1,d=Math.round((o.width-n.width)/h)*h,u=Math.round((o.height-n.height)/c)*c,p=n.width+d,m=n.height+u,f=s.maxWidth&&s.maxWidth<p,g=s.maxHeight&&s.maxHeight<m,v=s.minWidth&&s.minWidth>p,S=s.minHeight&&s.minHeight>m;s.grid=l,v&&(p+=h),S&&(m+=c),f&&(p-=h),g&&(m-=c),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=m):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=m,i.position.top=a.top-u):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=m,i.position.left=a.left-d):((m-c<=0||p-h<=0)&&(e=i._getPaddingPlusBorderDimensions(this)),m-c>0?(i.size.height=m,i.position.top=a.top-u):(m=c-e.height,i.size.height=m,i.position.top=a.top+n.height-m),p-h>0?(i.size.width=p,i.position.left=a.left-d):(p=h-e.width,i.size.width=p,i.position.left=a.left+n.width-p))}});t.ui.resizable,t.widget("ui.slider",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},numPages:5,_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this._calculateNewMax(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<span class='ui-slider-handle ui-state-default ui-corner-all' tabindex='0'></span>",a=[];for(i=s.values&&s.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),e=o.length;e<i;e++)a.push(n);this.handles=o.add(t(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)})},_createRange:function(){var e=this.options,i="";e.range?(e.range===!0&&(e.values?e.values.length&&2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&&(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=t("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===e.range||"max"===e.range?" ui-slider-range-"+e.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){this._off(this.handles),this._on(this.handles,this._handleEvents),this._hoverable(this.handles),this._focusable(this.handles)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,o,n,a,r,l,h,c=this,d=this.options;return!d.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-c.values(e));(o>i||o===i&&(e===c._lastChangedValue||c.values(e)===d.min))&&(o=i,n=t(this),a=e)}),r=this._start(e,a),r!==!1&&(this._mouseSliding=!0,this._handleIndex=a,n.addClass("ui-state-active").focus(),l=n.offset(),h=!t(e.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:e.pageX-l.left-n.width()/2,top:e.pageY-l.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,a,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,o,n;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),o=this._valueMax()-this._valueMin(),n=this._valueMin()+s*o,this._trimAlignValue(n)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,o,n;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&this.options.range===!0&&(0===e&&i>s||1===e&&i<s)&&(i=s),i!==this.values(e)&&(o=this.values(),o[e]=i,n=this._trigger("slide",t,{handle:this.handles[e],value:i,values:o}),s=this.values(e?0:1),n!==!1&&this.values(e,i))):i!==this.value()&&(n=this._trigger("slide",t,{handle:this.handles[e],value:i}),n!==!1&&this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,o,n;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,o=arguments[0],n=0;n<s.length;n+=1)s[n]=this._trimAlignValue(o[n]),this._change(null,n);this._refreshValue()},_setOption:function(e,i){var s,o=0;switch("range"===e&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&&(o=this.options.values.length),"disabled"===e&&this.element.toggleClass("ui-state-disabled",!!i),this._super(e,i),e){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue(),this.handles.css("horizontal"===i?"bottom":"left","");break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<o;s+=1)this._change(null,s);this._animateOff=!1;break;case"step":case"min":case"max":this._animateOff=!0,this._calculateNewMax(),this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_calculateNewMax:function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,s=Math.floor(+(t-e).toFixed(this._precision())/i)*i;t=s+e,this.max=parseFloat(t.toFixed(this._precision()))},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return i===-1?0:e.length-i-1},_valueMin:function(){return this.options.min},_valueMax:function(){return this.max},_refreshValue:function(){var e,i,s,o,n,a=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),o=this._valueMin(),n=this._valueMax(),i=n!==o?(s-o)/(n-o)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(e){var i,s,o,n,a=t(e.target).data("ui-slider-handle-index");switch(e.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(e.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(e.target).addClass("ui-state-active"),i=this._start(e,a),i===!1))return}switch(n=this.options.step,s=o=this.options.values&&this.options.values.length?this.values(a):this.value(),e.keyCode){case t.ui.keyCode.HOME:o=this._valueMin();break;case t.ui.keyCode.END:o=this._valueMax();break;case t.ui.keyCode.PAGE_UP:o=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.PAGE_DOWN:o=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/this.numPages);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;o=this._trimAlignValue(s+n);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;o=this._trimAlignValue(s-n)}this._slide(e,a,o)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}})})},1064:function(t,e,i){"use strict";function s(){this.initializeWebcam=function(){this.startHtml5Webcam(!1)},this.takePhoto=function(){this.takeHtml5Photo(3)},this.startHtml5Webcam=function(t){var e=void 0,i=void 0;t?(e={video:!0},i=this.html5LoadFailure.bind(this)):(e={video:{mandatory:{minWidth:1280,minHeight:720}}},i=function(){this.startHtml5Webcam(!0)}.bind(this)),this.select("videoPermissionExplain").show(),o.getUserMedia(e,this.html5StreamLoaded.bind(this),i)},this.html5StreamLoaded=function(t){var e=this.select("videoSelector");e.show();var i=e[0];this.cleanupStream(),void 0!==i.srcObject?i.srcObject=t:navigator.mozGetUserMedia?i.mozSrcObject=t:i.src=n.getObjectUrl(t),this.localMediaStream=t,this.select("captureWebcamSelector").prop("disabled",!1),this.select("videoPermissionExplain").hide(),this.trigger("uiWebcamFound")},this.html5LoadFailure=function(t){this.select("videoPermissionExplain").hide(),this.select("videoPermissionFail").show(),this.trigger("uiWebcamUnavailable")},this.actuallyTakeHtml5Photo=function(){var t=this.select("videoSelector"),e=t[0];t.css({width:"auto"});var i=this.select("webcamCanvasSelector")[0];i.width=e.clientWidth,i.height=e.clientHeight;var s=i.getContext("2d");s.drawImage(e,0,0),t.css({width:"100%"}),this.cleanupStream(),n.canvasToBlob(i).then(n.getFileInfo.bind(n,"avatar-from-webcam")).then(function(t){this.select("cropImageSelector").attr("src",t.thumbnail.src),this.trigger("jsCamCapture",{fileId:t.fileId})}.bind(this))},this.takeHtml5Photo=function(t){if(0===t)this.select("videoOverlaySelector").hide(),this.actuallyTakeHtml5Photo();else{var e=this.select("videoOverlaySelector");this.select("videoCountdownSelector").text(t),e.show(),setTimeout(function(){this.takeHtml5Photo(t-1)}.bind(this),1e3)}},this.cleanupStream=function(){var t=this.select("videoSelector")[0];this.localMediaStream&&(this.localMediaStream.stop?this.localMediaStream.stop():this.localMediaStream.getVideoTracks()[0].stop(),t.srcObject?t.srcObject=null:navigator.mozGetUserMedia?t.mozSrcObject=null:t.src=null,this.localMediaStream=null)},this.after("initialize",function(){this.on("uiDialogClosed",function(){this.cleanupStream()})})}var o=i(302),n=i(292);t.exports=s},1065:function(t,e,i){"use strict";function s(){this.scribeEvent=function(t,e){this.scribe(n.merge(t.scribeContext,e))},this.after("initialize",function(){this.scribeOnEvent("uiUploadReceived",{element:"upload",action:"complete"}),this.scribeOnEvent("uiShowingWebcam",{element:"webcam",action:"impression"}),this.scribeOnEvent("uiWebcamFound",{element:"webcam",action:"show"}),this.scribeOnEvent("uiWebcamUnavailable",{element:"webcam",action:"failure"}),this.scribeOnEvent("jsCamCapture",{element:"webcam",action:"complete"}),this.scribeOnEvent("uiProfileImageDialogClose",{action:"close"}),this.on("uiImageSave",function(t,e){this.scribeEvent(e,{element:"crop_"+e.scribeData.scribeElement,action:"complete"})}),this.on("uiShowingCropper",function(t,e){this.scribeEvent(e,{element:"crop_"+e.scribeElement,action:"impression"})}),this.on("uiProfileImagePublished",function(t,e){this.scribeEvent(e,{element:"save_"+e.scribeElement,action:"complete"})}),this.on("uiProfileImageDialogFailure",function(t,e){this.scribeEvent(e,{element:"save_"+e.scribeElement,action:"failure"})})})}var o=i(111),n=i(126),a=i(142),r=o(s,a);t.exports=r},1066:function(t,e,i){
"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.verifyUsername=function(t,e){this.get({url:"/users/username_available",eventData:e,data:e,success:"dataUsernameResult",error:"dataUsernameError"})},this.verifyEmail=function(t,e){this.get({url:"/users/email_available",eventData:e,data:e,success:"dataEmailResult",error:"dataEmailError"})},this.cancelPendingEmail=function(t,e){var i=function(t){this.trigger("dataCancelEmailSuccess",t)},s=function(t){this.trigger("dataCancelEmailFailure",t)};this.post({url:e.url,data:{},success:i.bind(this),error:s.bind(this)})},this.resendPendingEmail=function(t,e){var i=function(t){this.trigger("dataResendEmailSuccess",t)},s=function(t){this.trigger("dataResendEmailFailure",t)};this.post({url:e.url,data:{},success:i.bind(this),error:s.bind(this)})},this.resendPassword=function(t,e){this.post({url:e.url,data:{},dataType:"text",success:function(){this.trigger("dataForgotPasswordSuccess",{})}.bind(this)})},this.deleteGeoData=function(t){var e=function(t){this.trigger("dataGeoDeletionError",{})};this.post({url:"/account/delete_location_data",dataType:"text",data:{},error:e.bind(this)})},this.revokeAuthority=function(t,e){this.post({url:"/oauth/revoke",eventData:e,data:e,success:"dataOAuthRevokeResultSuccess",error:"dataOAuthRevokeResultFailure"})},this.revokeActiveSession=function(t,e){this.post({url:"/account/sessions/revoke",eventData:e,data:e,success:"dataActiveSessionRevokeResultSuccess",error:"dataActiveSessionRevokeResultFailure"})},this.revokeAllActiveSessions=function(t,e){this.post({url:"/account/sessions/revoke_all",eventData:e,data:e,success:"dataAllActiveSessionsRevokeResultSuccess",error:"dataAllActiveSessionsRevokeResultFailure"})},this.notifyFailure=function(t){this.trigger("dataSaveImageFailure",{uploadType:t.uploadType})},this.updateProfileImage=function(t,e){var i={header:"/i/profiles/update_profile_banner",avatar:"/i/profiles/update_profile_image"};t.page_context=this.attr.pageName,t.section_context=this.attr.sectionName,t.mediaId=e,this.post({url:i[t.uploadType],eventData:t,data:t,success:"dataSaveImageSuccess",error:"dataSaveImageFailure"})},this.saveImage=function(t,e){var i=e.fileId,s=n.get(i);if(s){this.trigger(document,"uiMediaSruInit",{fileId:i,uploadId:s.uploadId,mediaCategory:s.mediaCategory});var o={uploadType:e.uploadType},r=e.cropData||{},l=a.merge(o,e.scribeData,r);return this.mediaSruFinalize(s).then(this.updateProfileImage.bind(this,l)).catch(function(t){throw this.notifyFailure(l),t}.bind(this))}},this.deleteImage=function(t,e){var i={header:"/i/profiles/remove_profile_banner",avatar:"/i/profiles/remove_profile_image"};e.page_context=this.attr.pageName,e.section_context=this.attr.sectionName,this.destroy({url:i[e.uploadType],eventData:e,data:e,success:"dataDeleteImageSuccess",error:"dataDeleteImageFailure"})},this.resendConfirmationEmail=function(t,e){this.post({url:"/account/resend_confirmation_email",eventData:e,data:e,success:"dataResendConfirmationEmailSuccess",error:"dataResendConfirmationEmailError"})},this.tweetExport=function(t,e){this.post({url:"/account/request_tweet_export",eventData:e,data:e,success:"dataTweetExportSuccess",error:"dataTweetExportError"})},this.tweetExportResend=function(t,e){this.post({url:"/account/request_tweet_export_resend",eventData:e,data:e,success:"dataTweetExportResendSuccess",error:"dataTweetExportResendError"})},this.tweetExportIncrRateLimiter=function(t,e){this.post({url:"/account/request_tweet_export_download",eventData:e,data:e,success:"dataTweetExportDownloadSuccess",error:"dataTweetExportDownloadError"})},this.after("initialize",function(){this.on("uiUsernameChange",this.verifyUsername),this.on("uiEmailChange",this.verifyEmail),this.on("uiCancelPendingEmail",this.cancelPendingEmail),this.on("uiResendPendingEmail",this.resendPendingEmail),this.on("uiForgotPassword",this.resendPassword),this.on("uiDeleteGeoData",this.deleteGeoData),this.on("uiRevokeClick",this.revokeAuthority),this.on("uiRevokeActiveSessionClick",this.revokeActiveSession),this.on("uiRevokeAllActiveSessionsClick",this.revokeAllActiveSessions),this.on("uiImageSave",this.saveImage),this.on("uiDeleteImage",this.deleteImage),this.on("uiTweetExportButtonClicked",this.tweetExport),this.on("uiTweetExportResendButtonClicked",this.tweetExportResend),this.on("uiTweetExportConfirmEmail",this.resendConfirmationEmail),this.on("uiTweetExportIncrRateLimiter",this.tweetExportIncrRateLimiter)})}var o=i(111),n=i(220),a=i(126),r=i(240),l=i(417),h=o(s,r,l);t.exports=h},1067:function(t,e,i){"use strict";var s=i(1068),o=i(1069),n=i(1070),a=i(1071),r=i(1072),l=i(1073);t.exports=function(t){a.attachTo(document),s.attachTo(document,{src:t.src,trendsCacheKey:t.trendsCacheKey,trendsModuleEndpoint:t.trendsEndpoint,show_context:t.show_context,profileUserId:t.profile_id,query:t.query}),r.attachTo(".module.trends",{loggedIn:t.loggedIn,displaySource:t.src,eventData:{scribeContext:{component:"trends"}}}),o.attachTo(document),n.attachTo(document),l.attachTo("#trends_dialog",{typeaheadData:t.typeaheadData,eventData:{scribeContext:{component:"trends_location_dialog"}}})}},1068:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({src:"module",$backoffNode:e(window),trendsModuleEndpoint:"/i/trends",trendsCacheKey:null,show_context:!0,trendsPollingOptions:{focusedInterval:3e5,blurredInterval:12e5,eventData:{source:"clock"}}}),this.makeTrendsRequest=function(t){var e=t.woeid,i=t.source,s=function(t){t.source=i,this.trigger("dataTrendsRefreshed",t)};this.get({url:this.attr.trendsModuleEndpoint,eventData:t,data:{k:this.currentCacheKey,woeid:e,pc:!0,personalized:t.personalized,src:this.attr.src,show_context:this.attr.show_context,profileUserId:this.attr.profileUserId,query:this.attr.query},success:s.bind(this),error:"dataTrendsRefreshedError"})},this.makeTrendsDialogRequest=function(t,e){var i={woeid:t.woeid,personalized:t.personalized,pc:!0},s=function(t){this.trigger("dataGotTrendsDialog",t),this.currentWoeid&&this.currentWoeid!==t.woeid&&this.trigger("dataTrendsLocationChanged"),this.currentWoeid=t.woeid,t.trends_cache_key&&(this.currentCacheKey=t.trends_cache_key,this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)},o=e?this.post:this.get;o.call(this,{url:"/trends/dialog",eventData:t,data:i,success:s.bind(this),error:"dataGotTrendsDialogError"})},this.changeTrendsLocation=function(t,e){this.makeTrendsDialogRequest(e,!0)},this.refreshTrends=function(t,e){e=e||{},this.makeTrendsRequest(e)},this.getTrendsDialog=function(t,e){e=e||{},this.makeTrendsDialogRequest(e)},this.updateTrendsCacheKey=function(t,e){this.currentCacheKey=e.trendsCacheKey},this.after("initialize",function(){this.currentCacheKey=this.attr.trendsCacheKey,this.timer=n("uiRefreshTrends",this.attr.$backoffNode,this.attr.trendsPollingOptions),this.on("uiWantsTrendsDialog",this.getTrendsDialog),this.on("uiChangeTrendsLocation",this.changeTrendsLocation),this.on("uiRefreshTrends",this.refreshTrends),this.on("dataTempTrendsCacheKeyChanged",this.updateTrendsCacheKey)})}var o=i(111),n=i(516),a=i(240);t.exports=o(s,a)}).call(e,i(10))},1069:function(t,e,i){"use strict";function s(){this.getTrendsLocationDialog=function(t,e){var i=function(t){this.trigger("dataGotTrendsLocationDialog",t),t.trendLocations&&this.trigger("dataLoadedTrendLocations",{trendLocations:t.trendLocations})};this.get({url:"/trends/location_dialog",eventData:e,success:i.bind(this),error:"dataGotTrendsLocationDialogError"})},this.updateTrendsLocation=function(t,e){var i=e.location||{},s={woeid:i.woeid,personalized:e.personalized,pc:!0},o=function(t){this.trigger("dataChangedTrendLocation",{personalized:t.personalized,location:i}),t.trends_cache_key&&(this.trigger("dataTempTrendsCacheKeyChanged",{trendsCacheKey:t.trends_cache_key}),this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)};this.post({url:"/trends/dialog",eventData:e,data:s,success:o.bind(this),error:"dataGotTrendsLocationDialogError"})},this.after("initialize",function(){this.on("uiWantsTrendsLocationDialog",this.getTrendsLocationDialog),this.on("uiChangeLocation",this.updateTrendsLocation)})}var o=i(111),n=i(240);t.exports=o(s,n)},1070:function(t,e,i){"use strict";function s(){this.defaultAttrs({storageName:"recent_trend_locations",storageKey:"locations",maxRecentLocations:5}),this.initializeStorage=function(){var t=n({withArray:!0,withMaxElements:!0});this.storage=new t(this.attr.storageName),this.storage.setMaxElements(this.attr.storageKey,this.attr.maxRecentLocations)},this.getRecentTrendLocations=function(){this.trigger("dataGotRecentTrendLocations",{trendLocations:this.storage.getArray(this.attr.storageKey)})},this.saveRecentLocation=function(t,e){var i=e.location||{};i.woeid&&!this.hasRecentLocation(i.woeid)&&(this.storage.push(this.attr.storageKey,i),this.getRecentTrendLocations())},this.hasRecentLocation=function(t){var e=this.storage.getArray(this.attr.storageKey);return e.some(function(e){return e.woeid===t})},this.after("initialize",function(){this.initializeStorage(),this.on("uiWantsRecentTrendLocations",this.getRecentTrendLocations),this.on("dataChangedTrendLocation",this.saveRecentLocation)})}var o=i(111),n=i(242),a=i(240);t.exports=o(s,a)},1071:function(t,e,i){"use strict";function s(){this.scribeTrendClick=function(t,e){this.scribe("search",e)},this.prepareScribeData=function(t){var e=t.initial?"initial":"newer",i={referring_event:e},s=!1;return i.items=t.items.map(function(t,e){var i={name:t.name,item_type:a.trend,item_query:t.name,position:e,token:t.token,id:t.id};return t.promotedTrendId&&(i.promoted_id=t.promotedTrendId,s=!0),i}),s&&(i.promoted=s),"clock"===t.source&&(i.event_initiator=r.clientSideApp),i},this.scribeTrendsResults=function(t,e){var i=this.prepareScribeData(e),s={element:i.referring_event,action:e.items&&e.items.length?"results":"no_results"};this.scribe(s,e,i),e.initial&&this.scribeTrendsImpression(e)},this.scribeTrendsImpression=function(t){this.scribe("impression",t)},this.after("initialize",function(){this.scribeOnEvent("uiTrendsDialogOpened","open"),this.on("uiTrendSelected",this.scribeTrendClick),this.on("uiTrendsDisplayed",this.scribeTrendsResults)})}var o=i(111),n=i(142),a=i(144),r=i(859);t.exports=o(s,n)},1072:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({changeLinkSelector:".change-trends",trendsInnerSelector:".trends-inner",trendItemSelector:".js-trend-item",trendLinkItemSelector:".js-trend-item a",itemType:"trend",displaySource:"module"}),this.openChangeTrendsDialog=function(t){this.trigger("uiShowTrendsLocationDialog"),t.preventDefault()},this.updateModuleContent=function(t,e){if(e.module_html){var i=this.$node.hasClass("hidden"),s=e.source;this.select("trendsInnerSelector").html(e.module_html),this.currentWoeid=e.woeid,this.$node.removeClass("hidden");var o=this.getTrendData(this.select("trendItemSelector"));this.trigger("uiTrendsDisplayed",{items:o,initial:i,source:s,scribeData:{woeid:this.currentWoeid}})}},this.trendSelected=function(t,i){var s=e(i.el).closest(this.attr.trendItemSelector),o=this.getTrendData(s)[0],a=s.index(),r={name:o.name,item_type:n.trend,item_query:o.name,position:a,token:o.token,id:o.id},l={position:a,query:o.name,url:s.find("a").attr("href"),woeid:this.currentWoeid};o.promotedTrendId&&(r.promoted_id=o.promotedTrendId,l.promoted=!0),l.items=[r],this.trigger("uiTrendSelected",{isPromoted:!!o.promotedTrendId,promotedTrendId:o.promotedTrendId,scribeContext:{element:"trend"},scribeData:l})},this.getTrendData=function(t){return t.map(function(){var t=e(this);return{name:t.attr("data-trend-name"),promotedTrendId:t.data("promoted-trend-id"),trendingEvent:t.hasClass("event-trend"),token:t.attr("data-trend-token"),id:t.attr("data-trends-id")}}).toArray()},this.after("initialize",function(){this.on(document,"dataTrendsRefreshed",this.updateModuleContent),this.on("click",{changeLinkSelector:this.openChangeTrendsDialog,trendLinkItemSelector:this.trendSelected}),this.trigger("uiRefreshTrends")})}var o=i(111),n=i(144),a=i(440);t.exports=o(s,a)}).call(e,i(10))},1073:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({contentSelector:"#trends_dialog_content",quickSelectSelector:"#trend-locations-quick-select",dropdownSelector:"#trend-locations-dropdown-select",personalizedSelector:".trends-personalized",nonPersonalizedSelector:".trends-by-location",changeTrendsSelector:".customize-by-location",showDropdownSelector:".js-show-dropdown-select",showQuickSelectSelector:".js-show-quick-select",searchSelector:".trends-search-locations",nearbySelector:".trends-nearby-locations",recentSelector:".trends-recent-locations",currentLocationSelector:".trends-current-location",loadingSelector:"#trend-locations-loading",defaultSelector:".select-default",doneSelector:".done",errorSelector:".trends-dialog-error p",errorClass:"has-error"}),this.openDialog=function(t,e){this.trigger("uiTrendsDialogOpened"),this.initialized?this.setCurrentView():(this.trigger("uiWantsTrendsLocationDialog"),this.initialized=!0),this.$node.removeClass("has-error"),this.open()},this.setCurrentView=function(){this.attr.personalized?this.showPersonalizedView():this.showNonpersonalizedView(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showPersonalizedView=function(){this.select("nonPersonalizedSelector").hide(),this.select("personalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showNonpersonalizedView=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showQuickSelectContainer=function(t,e){this.showNonpersonalizedView(),this.select("dropdownSelector").hide(),this.select("quickSelectSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showDropdownContainer=function(t,e){this.showNonpersonalizedView(),this.select("quickSelectSelector").hide(),this.select("dropdownSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideViews=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").hide()},this.showError=function(t,e){this.hideViews(),this.hideLoading(),this.initialized=!1,this.$node.addClass(this.attr.errorClass),this.select("errorSelector").html(e.message),this.trigger(this.$dialog,"uiDialogContentChanged")},this.selectDefault=function(t,i){var s=e(t.target),o=!!s.data("personalized");o?this.setPersonalizedTrends():this.changeLocationInfo({name:s.data("name"),woeid:s.data("woeid")}),this.close()},this.reset=function(t,e){this.showQuickSelectContainer(),this.trigger("uiTrendsDialogReset")},this.initializeDialog=function(t,e){this.select("contentSelector").html(e.dialog_html),this.setLocationInfo(t,e),this.initializeComponents(),this.setCurrentView()},this.showLoading=function(){this.select("loadingSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideLoading=function(){this.select("loadingSelector").hide()},this.initializeComponents=function(t,e){l.attachTo(this.attr.currentLocationSelector,{location:this.attr.location,personalized:this.attr.personalized}),r.attachTo(this.attr.searchSelector,{typeaheadData:this.attr.typeaheadData}),a.attachTo(this.attr.dropdownSelector),h.attachTo(this.attr.nearbySelector,{location:this.attr.location,personalized:this.attr.personalized}),c.attachTo(this.attr.recentSelector,{location:this.attr.location,personalized:this.attr.personalized})},this.after("initialize",function(){this.hideViews(),this.on("uiChangeLocation",this.showLoading),this.on("uiTrendsLocationSearchNoResults",this.showDropdownContainer),this.on(document,"uiShowTrendsLocationDialog",this.openDialog),this.on("uiDialogClosed",this.reset),this.on(document,"dataGotTrendsLocationDialog",this.initializeDialog),this.on(document,"dataGotTrendsLocationDialogError",this.showError),this.on("uiLocationInfoUpdated",this.hideLoading),this.on("click",{doneSelector:this.close,defaultSelector:this.selectDefault,changeTrendsSelector:this.showNonpersonalizedView,showDropdownSelector:this.showDropdownContainer,showQuickSelectSelector:this.showQuickSelectContainer})})}var o=i(111),n=i(163),a=i(1074),r=i(1076),l=i(1077),h=i(1078),c=i(1080),d=i(1075);t.exports=o(s,n,d)}).call(e,i(10))},1074:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({regionsSelector:'select[name="regions"]',citiesSelector:'select[name="cities"]'}),this.initializeCities=function(){this.citiesByRegionWoeid={};var t=this.$cities.find("option");t.each(function(t,i){var s=e(i),o=s.data("woeid");this.citiesByRegionWoeid[o]||(this.citiesByRegionWoeid[o]=[]),this.citiesByRegionWoeid[o].push(s)}.bind(this))},this.updateDropdown=function(){var t=this.$regions.val(),e=this.citiesByRegionWoeid[t]||"";this.$cities.empty(),this.$cities.html(e)},this.updateRegion=function(){this.updateDropdown();var t=this.$cities.children().first();t.length&&(t.prop("selected",!0),t.change())},this.updateCity=function(){var t=this.$cities.find("option:selected"),e=parseInt(t.val(),10),i=t.data("name");this.currentSelection=e,this.changeLocationInfo({woeid:e,name:i})},this.possiblyClearSelection=function(){this.currentSelection!==this.attr.location.woeid&&this.reset()},this.reset=function(){this.currentSelection=null;var t=this.$regions.find('option[value=""]');t.prop("selected",!0),this.updateDropdown()},this.after("initialize",function(){this.$regions=this.select("regionsSelector"),this.$cities=this.select("citiesSelector"),this.initializeCities(),this.on(this.$regions,"change",this.updateRegion),this.on(this.$cities,"change",this.updateCity),this.on(document,"uiTrendsDialogReset",this.reset),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.updateDropdown()})}var o=i(111),n=i(1075);t.exports=o(s,n)}).call(e,i(10))},1075:function(t,e){"use strict";function i(){this.defaultAttrs({location:{},personalized:!1}),this.setLocationInfo=function(t,e){this.attr.personalized=!!e.personalized,this.attr.location=e.location||{},this.trigger("uiLocationInfoUpdated")},this.changeLocationInfo=function(t){this.trigger("uiChangeLocation",{location:t})},this.setPersonalizedTrends=function(){this.trigger("uiChangeLocation",{personalized:!0})},this.after("initialize",function(){this.on(document,"dataChangedTrendLocation",this.setLocationInfo)})}t.exports=i},1076:function(t,e,i){"use strict";function s(){this.defaultAttrs({inputSelector:"input.trends-location-search-input"}),this.executeTypeaheadSelection=function(t,e){return e.item.woeid===-1?void this.trigger("uiTrendsLocationSearchNoResults"):(this.currentSelection=e.item,void this.changeLocationInfo({woeid:e.item.woeid,name:e.item.name}))},this.possiblyClearSelection=function(){this.currentSelection&&this.currentSelection.woeid!==this.attr.location.woeid&&this.reset()},this.reset=function(t,e){this.currentSelection=null,this.$input.val("")},this.after("initialize",function(){this.$input=this.select("inputSelector"),this.on("uiTypeaheadItemSelected uiTypeaheadItemComplete",this.executeTypeaheadSelection),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.on(document,"uiTrendsDialogReset",this.reset),r.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),a.attachTo(this.$node,{inputSelector:this.attr.inputSelector,hideOnEmptyQuery:!0,blockLinkActions:!0,datasourceRenders:[["trendLocations",["trendLocations"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"trends_location_search"}}})})}var o=i(111),n=i(1075),a=i(313),r=i(328);t.exports=o(s,n)},1077:function(t,e,i){"use strict";function s(){this.defaultAttrs({personalizedSelector:".js-location-personalized",nonpersonalizedSelector:".js-location-nonpersonalized",currentLocationSelector:".current-location"}),this.updateView=function(){this.attr.personalized||this.select("currentLocationSelector").text(this.attr.location.name),this.select("nonpersonalizedSelector").toggle(!this.attr.personalized),this.select("personalizedSelector").toggle(!!this.attr.personalized)},this.after("initialize",function(){this.updateView(),this.on("uiLocationInfoUpdated",this.updateView)})}var o=i(111),n=i(1075);t.exports=o(s,n)},1078:function(t,e,i){"use strict";function s(){}var o=i(111),n=i(1079);t.exports=o(s,n)},1079:function(t,e,i){(function(e){"use strict";function s(){o.mixin(this,[n]),this.defaultAttrs({locationSelector:".trend-location-picker-item",selectedAttr:"selected"}),this.selectLocation=function(t,i){t.preventDefault();var s=e(i.el),o={woeid:s.data("woeid"),name:s.data("name")};this.changeLocationInfo(o),this.showSelected(o.woeid,!1)},this.showSelected=function(t,e){var i=this.select("locationSelector");i.removeClass(this.attr.selectedAttr),!e&&t&&i.filter('[data-woeid="'+t+'"]').addClass(this.attr.selectedAttr)},this.locationInfoUpdated=function(){this.showSelected(this.attr.location.woeid,this.attr.personalized)},this.after("initialize",function(){this.on("uiLocationInfoUpdated",this.locationInfoUpdated),this.on("click",{locationSelector:this.selectLocation}),this.showSelected(this.attr.location.woeid,this.attr.personalized)})}var o=i(121),n=i(1075);t.exports=s}).call(e,i(10))},1080:function(t,e,i){"use strict";function s(){this.defaultAttrs({listContainerSelector:".trend-location-picker"}),this.loadTrendLocations=function(t,e){var i=e.trendLocations;this.$list.empty(),i.forEach(function(t){var e=this.$template.clone(!1),i=e.find("button");i.text(t.name),i.attr("data-woeid",t.woeid),i.attr("data-name",t.name),this.$list.append(e)},this),this.$node.toggle(i.length>0)},this.after("initialize",function(){this.$list=this.select("listContainerSelector"),this.$template=this.$list.find("li:first").clone(!1),this.on(document,"dataGotRecentTrendLocations",this.loadTrendLocations),this.trigger("uiWantsRecentTrendLocations")})}var o=i(111),n=i(1079);t.exports=o(s,n)},1082:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({dashboardSelector:".dashboard-user-recommendations",recUserSelector:".js-actionable-user",dismissRecSelector:".js-action-dismiss",viewAllSelector:".js-view-all-link",findFriendsSelector:".js-find-friends-link"}),this.dismissRecommendation=function(t,i){if(!this.currentlyRefreshing){this.currentlyDismissing=!0;var s=e(t.target).closest(this.attr.recSelector),o=s.attr("data-user-id");this.trigger("uiDismissUserRecommendation",{recommended_user_id:o,impressionId:s.attr("data-impression-id"),excluded:[o],visible:this.getVisibleIds(s),token:s.attr("data-feedback-token"),dismissable:this.attr.wtfOptions.dismissable,refreshUserId:o}),this.animateContentOut(s,"animationCallback")}},this.handleDismissResponse=function(t,i){if(i=i||{},this.currentlyDismissing=!1,i.user_recommendations_html){var s=this.currentlyRefreshingUser(i),o=e(i.user_recommendations_html),n=o.attr("data-user-id");if(this.select("recSelector").is("[data-user-id="+n+"]"))return void s.find(this.attr.dismissRecSelector).click();var a=this.getItemPosition(s);this.animateContentIn(s,"animationCallback",i.user_recommendations_html,{modOp:"replaceWith",scribeCallback:function(){var t={oldUser:this.interactionData(s,{position:a})};o.length&&(t.newUser=this.interactionData(o,{position:a})),this.trigger("uiDidDismissUserRecommendation",t)}.bind(this)})}else this.handleEmptyDismissResponse(i)},this.handleDismissError=function(t,e){this.handleEmptyDismissResponse(e)},this.handleEmptyDismissResponse=function(t){var e=this.currentlyRefreshingUser(t);e&&e.remove(),this.select("recSelector").length||(this.trigger("uiShowMessage",{message:"You have no more recommendations today!"}),this.$node.remove())},this.enable=function(){this.disabled=!1,this.refreshRecommendations({type:"empty-timeline"}),this.$node.show()},this.initRecommendations=function(t,e){this.disabled?this.$node.hide():this.verifyInitialRecommendations(t,e)},this.reset=function(){this.currentlyRefreshing||this.currentlyDismissing?this.select("dashboardSelector").html(""):(this.select("dashboardSelector").css("opacity",1),this.select("recUserSelector").css("opacity",1))},this.expandWhoToFollow=function(t,e){this.currentlyExpanding=!0;var i=o.merge(this.attr.wtfOptions,{limit:3,visible:this.getVisibleIds(t),refreshUserId:e.userId,get_replacement:!0});this.trigger("uiGetUserRecommendations",i)},this.triggerLinkClickScribes=function(t){var i=this,s={import_link:this.attr.findFriendsSelector,view_all_link:this.attr.viewAllSelector,refresh_link:this.attr.refreshRecsSelector},o=e(t.target);e.each(s,function(t,e){o.is(e)&&i.trigger(document,"uiClickedWtfLink",{element:t})})},this.getNewRecommendations=function(t,e,i){var s=this.attr.wtfOptions.display_location;"wtf-component"===s&&!this.currentlyExpanding&&this.getVisibleIds(null,!0).length<=3?this.expandWhoToFollow(e,i):t(e,i)},this.after("initialize",function(){this.disabled=!!this.attr.wtfOptions&&this.attr.wtfOptions.disabled,this.on(document,"dataDidDismissRecommendation",this.handleDismissResponse),this.on(document,"dataFailedToDismissUserRecommendation",this.handleDismissError),this.on(document,"uiDidHideEmptyTimelineModule",this.enable),this.on(document,"uiSwiftLoaded uiPageChanged",this.initRecommendations),this.on(document,"uiBeforePageChanged",this.reset),this.on("click",{dismissRecSelector:this.dismissRecommendation,viewAllSelector:this.triggerLinkClickScribes,findFriendsSelector:this.triggerLinkClickScribes,refreshRecsSelector:this.triggerLinkClickScribes}),this.around("cycleRecommendation",function(t,e,i){this.getNewRecommendations(t,e,i)})})}var o=(i(123),i(126)),n=i(111),a=i(443),r=i(440),l=i(1083),h=i(1084);t.exports=n(s,a,r,l,h)}).call(e,i(10))},1083:function(t,e){"use strict";function i(){this.defaultAttrs({connectOtherSelector:".js-connect-other",otherServicesSelector:".other-services"}),this.toggleOtherServices=function(){var t=this.select("otherServicesSelector"),e=void 0;t.hasClass("hidden")?(t.removeClass("hidden"),e="open"):(t.addClass("hidden"),e="close"),this.trigger("uiWTFImportPromptToggle",{action:e})},this.after("initialize",function(){this.trigger("uiWTFImportPromptImpression"),this.on("click",{connectOtherSelector:this.toggleOtherServices})})}t.exports=i},1084:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({refreshAnimationDuration:200,cycleTimeout:1e3,experimentCycleTimeout:300,wtfOptions:{},selfPromotedAccountHtml:"",$accountPriorToPreview:null,successClass:"has-content",recListSelector:".js-recommended-followers",recSelector:".js-actionable-user",refreshRecsSelector:".js-refresh-suggestions",similarToContainerSelector:".js-expanded-similar-to",expandedContainerSelector:".js-expanded-container",itemType:"user"}),this.refreshRecommendations=function(t,e){if(!this.currentlyRefreshing){this.currentlyRefreshing=!0;var i=this.getVisibleIds(null,!0).length||this.attr.wtfOptions.limit;this.trigger("uiRefreshUserRecommendations",o.merge(this.attr.wtfOptions,{excluded:this.getVisibleIds(),limit:i,refreshType:t.type})),this.hideRecommendations()}},this.sendGetRecommendationEvent=function(t,e){this.trigger("uiGetUserRecommendations",o.merge(this.attr.wtfOptions,t||{}))},this.getUserRecommendations=function(t,e){this.sendGetRecommendationEvent(t,e),this.hideRecommendations()},this.hideRecommendations=function(){this.animateContentOut(this.select("recListSelector"),"animationCallback")},this.isNewUserDuplicate=function(t){return this.getVisibleIds().indexOf(t)!==-1},this.handleRecommendationsResponse=function(t,i){var s=this.getVisibleIds();if(!this.disabled){i=i||{},this.hasRecommendations()||(i=o.merge(i,{initialResults:!0}));var n=e.trim(i.user_recommendations_html);if(n){var a=this.currentlyRefreshingUser(i);if(this.$node.addClass(this.attr.successClass),this.shouldExpandWtf(i)){var r=e(n),l=r.filter(this.attr.recSelector).first(),h=r.filter(this.attr.expandedContainerSelector),c=h.find(".js-actionable-user").filter(function(){return s.indexOf(e(this).data("user-id")+"")===-1});h.empty(),c.each(function(){h.append(this)}),a&&!this.isNewUserDuplicate(l.data("user-id")+"")&&this.animateContentIn(a,"animationCallback",e("<div>").append(l).html(),{modOp:"replaceWith",scribeCallback:function(){this.currentlyExpanding?this.pendingScribe=!0:this.reportUsersDisplayed(i)}.bind(this)}),h.length&&this.animateExpansion(h,i)}else{if(this.isNewUserDuplicate(e(n).data("user-id")+""))return;var d=this.select("recListSelector"),u=void 0;a&&(d=a,u="replaceWith"),this.animateContentIn(d,"animationCallback",n,{modOp:u,scribeCallback:function(){this.reportUsersDisplayed(i)}.bind(this)})}}else this.handleEmptyRefreshResponse(t,i),this.trigger("uiGotEmptyRecommendationsResponse",i)}},this.handleRefreshError=function(t,e){this.handleEmptyRefreshResponse(t,e)},this.handleEmptyRefreshResponse=function(t,e){if(this.select("recSelector").length){if(this.currentlyExpanding){var i=this.currentlyRefreshingUser(e);if(e&&e.sourceEventData&&e.sourceEventData.clusterfollow&&i)return this.currentlyExpanding=!1,void this.replenishWhoToFollowDashboard(i)}var s=this.select("recListSelector"),o=this.currentlyRefreshingUser(e);o&&(s=o),this.animateContentIn(s,"animationCallback",s.html())}},this.getVisibleIds=function(t,i){var s=this.select("recSelector").not(t);return i||(s=s.not(".promoted-account")),s.map(function(){return e(this).attr("data-user-id")}).toArray()},this.originalItemCount=function(){return e(this.attr.recListSelector).children(this.attr.recSelector).length},this.doAfterFollowAction=function(t,e){if(!this.disabled&&"following"===e.newState){var i=this.expandBucket?this.attr.experimentCycleTimeout:this.attr.cycleTimeout;setTimeout(function(){if(!this.currentlyRefreshing){var t=this.select("recSelector").filter("[data-user-id='"+e.userId+"']");t.length&&this.cycleRecommendation(t,e)}}.bind(this),i)}},this.isInSimilarToSection=function(t){return!!t.closest(this.attr.similarToContainerSelector).length},this.cycleRecommendation=function(t,e){this.animateContentOut(t,"animationCallback");var i=o.merge(this.attr.wtfOptions,{limit:1,visible:this.getVisibleIds(t),refreshUserId:e.userId});this.isInSimilarToSection(t)&&(i.similar_to_user_id=this.select("similarToContainerSelector").attr("data-similar-to-user-id")),this.trigger("uiGetUserRecommendations",i)},this.animateExpansion=function(t,e){var i=this.select("recListSelector"),s=this.select("expandedContainerSelector"),o=function(){this.pendingScribe&&(this.reportUsersDisplayed(e),this.pendingScribe=!1),this.currentlyExpanding=!1};s.length?s.html(t.html()):i.append(t),t.is(":visible")?o.bind(this)():t.slideDown("slow",o.bind(this))},this.animateContentIn=function(t,e,i,s){if(t.length){s=s||{};var o=function(){t.is(this.attr.recListSelector)&&(this.currentlyRefreshing=!1),t[s.modOp||"html"](i).animate({opacity:1},this.attr.refreshAnimationDuration),s.scribeCallback&&s.scribeCallback()}.bind(this);t.is(":animated")?this[e]=o:o()}},this.animateContentOut=function(t,e){t.animate({opacity:0},{duration:this.attr.refreshAnimationDuration,complete:function(){this[e]&&this[e](),this[e]=null}.bind(this)})},this.getItemPosition=function(t){var e=this.originalItemCount();return this.isInSimilarToSection(t)?e+t.closest(this.attr.recSelector).index()-1:t.closest(this.attr.expandedContainerSelector).length?e+t.closest(this.attr.recSelector).index():t.closest(this.attr.recSelector).index()},this.currentlyRefreshingUser=function(t){return t&&t.sourceEventData&&t.sourceEventData.refreshUserId?this.select("recSelector").filter("[data-user-id="+t.sourceEventData.refreshUserId+"]"):null},this.shouldExpandWtf=function(t){return!!(t&&t.sourceEventData&&t.sourceEventData.get_replacement)},this.getUsersDisplayed=function(){var t=this.select("recSelector"),i=[];return t.each(function(t,s){var o=e(s);i.push({id:o.attr("data-user-id"),impressionId:o.attr("data-impression-id")})}),i},this.reportUsersDisplayed=function(t){var e=this.getUsersDisplayed();this.trigger("uiUsersDisplayed",{users:e}),this.trigger("uiDidGetRecommendations",t)},this.verifyInitialRecommendations=function(t,e){
this.hasRecommendations()?this.reportUsersDisplayed({initialResults:!0}):this.sendGetRecommendationEvent({initialResults:!0})},this.hasRecommendations=function(){return this.select("recSelector").length>0},this.storeSelfPromotedAccount=function(t,e){e.html&&(this.selfPromotedAccountHtml=e.html)},this.replaceUser=function(t,e){t.tooltip("hide"),t.parent().hasClass("preview-wrapper")&&t.unwrap(),t.replaceWith(e)},this.replaceUserAnimation=function(t,i){t.tooltip("hide"),this.before("teardown",function(){this.replaceUser(t,i)});var s=e("<div/>",{"class":t.attr("class"),style:t.attr("style")}).addClass("preview-wrapper");t.wrap(s);var o=t.css("minHeight");t.css({minHeight:0}).slideUp(70,function(){i.attr("style",t.attr("style")),t.replaceWith(i),i.delay(350).slideDown(70,function(){i.css({minHeight:o}),i.unwrap(),setTimeout(function(){i.tooltip("show"),setTimeout(function(){i.tooltip("hide")},8e3)},500)})})},this.handlePreviewPromotedAccount=function(){if(!this.disabled&&this.selfPromotedAccountHtml){var t=e(this.selfPromotedAccountHtml),i=this.select("recSelector").first();this.attr.$accountPriorToPreview=i.clone(),this.replaceUserAnimation(i,t),t.find("a").on("click",function(t){t.preventDefault(),t.stopPropagation()})}},this.maybeRestoreAccountPriorToPreview=function(){var t=this.attr.$accountPriorToPreview;t&&(this.replaceUser(this.select("recSelector").first(),t),this.attr.$accountPriorToPreview=null)},this.after("initialize",function(){this.on(document,"dataDidGetUserRecommendations",this.handleRecommendationsResponse),this.on(document,"dataFailedToGetUserRecommendations",this.handleRefreshError),this.on(document,"dataFollowStateChange",this.doAfterFollowAction),this.on("click",{refreshRecsSelector:this.refreshRecommendations}),this.on(document,"dataDidGetSelfPromotedAccount",this.storeSelfPromotedAccount),this.on(document,"uiPromptbirdPreviewPromotedAccount",this.handlePreviewPromotedAccount),this.on(document,"uiPromptbirdDismissPrompt",this.maybeRestoreAccountPriorToPreview)})}var o=i(126);i(345),t.exports=s}).call(e,i(10))},1085:function(t,e,i){"use strict";function s(){this.attributes({maxExcludedRecsInLocalStorage:100,endpoints:{users:{url:"/i/users/recommendations",method:"GET",successEvent:"dataDidGetUserRecommendations",errorEvent:"dataFailedToGetUserRecommendations"},dismiss:{url:"/i/users/recommendations/hide",method:"POST",successEvent:"dataDidDismissRecommendation",errorEvent:"dataFailedToDismissUserRecommendation"},promoted_self:{url:"/i/users/promoted_self",method:"GET",successEvent:"dataDidGetSelfPromotedAccount",errorEvent:"dataFailedToGetSelfPromotedAccount"}},endpointUrlOverrides:{}}),this.refreshEndpoint=function(t){return this.hitEndpoint(t,{"Cache-Control":"max-age=0",Pragma:"no-cache"})},this.hitEndpoint=function(t,e){e=e||{};var i=this.attr.endpoints[t],s=this.attr.endpointUrlOverrides[t]||i.url;return function(t,o){o=o||{},o.excluded=o.excluded||[];var a=o.visible||[];delete o.visible,this.JSONRequest({type:i.method,url:s,headers:e,dataType:"json",data:n.merge(o,{excluded:this.storage.pushAll("excluded",o.excluded).concat(a).join(",")}),eventData:o,success:i.successEvent,error:i.errorEvent},i.method)}.bind(this)},this.excludeUsers=function(t,e){this.storage.pushAll("excluded",e.userIds),this.trigger("dataDidExcludeUserRecommendations",e)},this.excludeFollowed=function(t,e){e=e||{},"following"===e.newState&&e.userId&&this.storage.push("excluded",e.userId)},this.after("initialize",function(){var t=a({withArray:!0,withMaxElements:!0,withUniqueElements:!0});this.storage=new t("excluded_wtf_recs"),this.storage.setMaxElements("excluded",this.attr.maxExcludedRecsInLocalStorage),this.on(document,"uiRefreshUserRecommendations",this.refreshEndpoint("users")),this.on(document,"uiGetUserRecommendations",this.hitEndpoint("users")),this.on(document,"uiDismissUserRecommendation",this.hitEndpoint("dismiss")),this.on(document,"uiAddWtfBlacklistUsers",this.excludeUsers),this.on(document,"dataFollowStateChange",this.excludeFollowed),this.on(document,"uiPromptbirdWantsPromotedSelf",this.hitEndpoint("promoted_self"))})}var o=i(111),n=i(126),a=i(242),r=i(240),l=o(s,r);t.exports=l},1086:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({userSelector:".js-actionable-user",itemType:"user"}),this.scribeDismissRecommendation=function(t,e){this.scribeInteraction("dismiss",e.oldUser),e.newUser&&this.scribeInteraction({element:"replace",action:"results"},e.newUser,{referring_event:"replace"})},this.scribeRecommendationResults=function(t,i){var s=[];t.emptyResponse||this.$node.find(this.attr.userSelector).map(function(t,i){s.push(this.interactionData(e(i),{position:t}))}.bind(this));var o=t.emptyResponse?"no_results":"results";this.scribeInteractiveResults({element:i,action:o},s,t,{referring_event:i})},this.scribeRecommendations=function(t,e){var i=e.sourceEventData||{},s=e.initialResults||i.initialResults;s?(this.scribeRecommendationResults(e,"initial"),e.emptyResponse||this.scribeRecommendationImpression(e)):(this.scribe({action:"refresh"},e,{event_info:i.refreshType}),this.scribeRecommendationResults(e,"newer"))},this.scribeEmptyRecommendationsResponse=function(t,e){this.scribeRecommendations(t,r.merge(e,{emptyResponse:!0}))},this.scribeRecommendationImpression=function(t){this.scribe("impression",t)},this.scribeLinkClicks=function(t,e){this.scribe({component:"user_recommendations",element:e.element,action:"click"})},this.after("initialize",function(){this.on(document,"uiDidDismissUserRecommendation",this.scribeDismissRecommendation),this.on(document,"uiDidGetRecommendations",this.scribeRecommendations),this.on(document,"uiGotEmptyRecommendationsResponse",this.scribeEmptyRecommendationsResponse),this.on(document,"uiClickedWtfLink",this.scribeLinkClicks)})}var o=i(111),n=i(138),a=i(141),r=i(126);t.exports=o(s,n,a)}).call(e,i(10))},1087:function(t,e,i){"use strict";function s(){this.scribeImpression=function(t,e){this.scribe(n.merge({},e.scribeContext,{element:"wtf_import_prompt",action:"impression"}))},this.scribeToggle=function(t,e){this.scribe(n.merge({},e.scribeContext,{element:"wtf_import_prompt",action:e.action}),{section:"other_services"})},this.after("initialize",function(){this.on("uiWTFImportPromptImpression",this.scribeImpression),this.on("uiWTFImportPromptToggle",this.scribeToggle)})}var o=i(111),n=i(126),a=i(142);t.exports=o(s,a)},1105:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({}),this.updateProfileStats=function(t,i){i.stats&&i.stats.length&&e.each(i.stats,function(t,e){var i=this.statNode(e.user_id,e.stat),s=e.html;if(void 0!==e.delta){var a=i.data("count"),r=a+e.delta;r=r<0?0:r,i.data("count",r);var l=o.getProfileStats(e.stat,r,e.user_id,n.language);s=l.html}this.isCompact(i)||i.html(s)}.bind(this))},this.statSelector=function(t,e){return'.stats[data-user-id="'+t+'"] a[data-element-term="'+e+'_stats"]'},this.statNode=function(t,e){return this.$node.find(this.statSelector(t,e))},this.isCompact=function(t){return t.data("is-compact")===!0},this.after("initialize",function(){this.on(document,"dataGotProfileStats",this.updateProfileStats)})}var o=i(1106),n=i(846);t.exports=s}).call(e,i(10))},1106:function(t,e,i){"use strict";function s(t,e,i,s){var n="follower"===t?o.getFollowerStatPhrase:o.getFollowingStatPhrase,a=o.getCommaizedFormat(e),r=o.compactOrCommaize(e,s);return{highline_stat_phrase:n(e,a),highline_stat_value:o.getNumericStatText(e,a),html:o.getProfileFollowingStat(a,r),stat:t,user_id:i}}var o=i(835);t.exports={getProfileStats:s}},1127:function(t,e,i){"use strict";function s(t,e,i,s,m){var f=u.merge(t,{endpoint:e,itemType:s,eventData:{scribeContext:{component:m||s}}});o(u.merge(f,{statsName:i})),n("#timeline",f);var g="home"===f.pageName||"me"===f.pageName||"profile"===f.pageName,v=g?[h]:[];d.mixin.apply(this,v).attachTo("#timeline",f);var S=[];g&&(S=S.concat(l),p.attachTo("#timeline",f)),r.attachTo(document),a.mixin.apply(this,S).attachTo("#timeline",f),c.attachTo("#timeline",f)}var o=i(811),n=i(814),a=i(875),r=i(878),l=i(1014),h=i(1012),c=i(504),d=i(915),u=i(126),p=i(1128);t.exports=s},1128:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({promotedTweetSelector:".promoted-tweet:not(.scribed)",promotedTweetForImpressionsSelector:".promoted-tweet:not(.presented)",scrollThrottle:100}),this.processTweets=function(){var t=a.getGlobalNavHeight(),i=this.$node.find(this.attr.promotedTweetSelector),s=this.$node.find(this.attr.promotedTweetForImpressionsSelector),o=i.filter(function(i,s){return a.isContainedInViewport(this.$window,e(s),t,0)}.bind(this)),n=s.filter(function(i,s){return a.isPartiallyContainedInViewport({$container:this.$window,$element:e(s),topThreshold:t,fractionInViewport:0})}.bind(this));if(n.length){n.addClass("presented");var r=n.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweets1pxInViewport",{items:r})}if(o.length){o.addClass("scribed");var l=o.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweetsInViewport",{items:l})}},this.after("initialize",function(t,i){this.$window=e(window),i&&i.inOverlay?this.on(t,"scroll resize",n.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)):this.on(document,"scroll resize",n.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)),this.on(document,"uiSwiftLoaded uiPageVisible uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems",this.processTweets)})}var o=i(111),n=i(126),a=i(177);t.exports=o(s)}).call(e,i(10))},1137:function(t,e,i){"use strict";function s(){this.defaultAttrs({profileCardSelector:".ProfileCard",profileCardHeaderSelector:".ProfileCard-bg",profileCardAvatarSelector:".ProfileCard-avatarLink",profileCardNameSelector:".ProfileNameTruncated",profileCardScreenNameSelector:".ProfileCard-screenname",profileCardBioMentionSelector:".ProfileCard-bio .twitter-atreply",profileCardPromotedBadgeSelector:".ProfileCard-promoted",itemType:"user"}),this.getItemPosition=function(t){return this.select("profileCardSelector").index(t.closest(this.attr.profileCardSelector))},this.handleClick=function(t,e,i){var s=a.merge(this.interactionData(e),{scribeContext:{element:t}});this.trigger(e.target,"uiProfileCardClicked",s),this.trigger(e.target,"uiShowProfileNewWindow",s)},this.after("initialize",function(){this.on("click",{profileCardHeaderSelector:this.handleClick.bind(this,"header_image"),profileCardAvatarSelector:this.handleClick.bind(this,"avatar"),profileCardNameSelector:this.handleClick.bind(this,"name"),profileCardScreenNameSelector:this.handleClick.bind(this,"screen_name"),profileCardBioMentionSelector:this.handleClick.bind(this,"description"),profileCardPromotedBadgeSelector:this.handleClick.bind(this,"promoted_badge")})})}var o=i(111),n=i(138),a=i(126);t.exports=o(s,n)},1138:function(t,e,i){(function(e){"use strict";function s(){this.getComponentTermFromDOM=function(t){return t.closest("[data-component-context]").data("component-context")||"user"},this.scribeProfileCardInteraction=function(t,i){i.scribeContext.action=i.isMentionClick?"mention_click":"profile_click",i.scribeContext.component=this.getComponentTermFromDOM(e(t.target)),this.scribeInteraction(i.scribeContext,i)},this.after("initialize",function(){this.on("uiProfileCardClicked",this.scribeProfileCardInteraction)})}var o=i(111),n=i(141);t.exports=o(s,n)}).call(e,i(10))},1255:function(t,e,i){"use strict";function s(){this.contactImportStatus=function(t,e){this.get({url:"/who_to_follow/import/status",data:{},eventData:e,success:"dataContactImportStatusSuccess",error:"dataContactImportStatusFailure"})},this.contactImportFollow=function(t,e){var i={user_ids:e.includeIds||[],unchecked_user_ids:e.excludeIds||[]};this.post({url:"/find_sources/contacts/follow_some.json",data:i,eventData:e,success:this.handleContactImportSuccess.bind(this),error:"dataContactImportFollowFailure"})},this.handleContactImportSuccess=function(t){t.followed_ids.forEach(function(t){this.trigger("dataBulkFollowStateChange",{userId:t,newState:"following"})}.bind(this)),t.requested_ids.forEach(function(t){this.trigger("dataBulkFollowStateChange",{userId:t,newState:"pending"})}.bind(this)),this.trigger("dataContactImportFollowSuccess",t)},this.wipeAddressbook=function(t,e){this.post({url:"/settings/contacts/wipe_addressbook",data:{},eventData:e,success:"dataWipeAddressbookSuccess",error:"dataWipeAddressbookFailure"})},this.getMatchesModule=function(t,e){function i(t){t.html&&this.trigger("dataContactImportMatchesSuccess",t)}this.get({url:"/who_to_follow/matches",data:{},eventData:e,success:i.bind(this),error:"dataContactImportMatchesFailure"})},this.inviteModule=function(t,e){function i(t){t.html&&this.trigger("dataInviteModuleSuccess",t)}this.get({url:"/who_to_follow/invite",data:{},eventData:e,success:i.bind(this),error:"dataInviteModuleFailure"})},this.after("initialize",function(){this.on(document,"uiWantsContactImportStatus",this.contactImportStatus),this.on(document,"uiContactImportFollow",this.contactImportFollow),this.on(document,"uiWantsAddressbookWiped",this.wipeAddressbook),this.on(document,"uiWantsContactImportMatches",this.getMatchesModule),this.on(document,"uiWantsInviteModule",this.inviteModule)})}var o=i(111),n=i(240);t.exports=o(s,n)},1256:function(t,e,i){"use strict";function s(){this.defaultAttrs({findFriendsSelector:".find-friends-btn",wipeAddressbookSelector:".js-wipe-addressbook",contactsImportSelector:".contacts-import-btn"}),this.scribeServiceLaunch=function(t,e){var i={query:e.service};e.section&&(i.section=e.section),this.scribe(n.merge({},e.scribeContext,{action:"launch_service"}),i)},this.scribeFollowSuccess=function(t,e){var i=r.user,s=e.followed_ids.map(function(t){return{id:t,item_type:i}});this.scribe({component:"stream_header",action:"follow"},{item_count:e.followed_ids.length,items:s,event_value:e.followed_ids.length,event_info:"follow_all"})},this.scribeImportSuccess=function(t,e){e.done&&this.scribe(n.merge({},e.scribeContext,{element:"email_import",action:"success"}))},this.scribeWipeAddressbookSuccess=function(t,e){this.scribe({element:"remove_all_contacts",action:"success"},{user_id:e.user_id})},this.scribeWipeAddressbookFailure=function(t,e){this.scribe({element:"remove_all_contacts",action:"failure"},{user_id:e.user_id})},this.scribeFindFriends=function(){this.scribe({component:"empty_timeline",element:"find_friends_link",action:"click"})},this.scribeWipeAddressbook=function(){this.scribe({element:"remove_all_contacts",action:"open"})},this.scribeContactsImport=function(){this.scribe({element:"contacts_import_link",action:"open"})},this.after("initialize",function(){this.on("uiImportServiceLaunched",this.scribeServiceLaunch),this.on("dataContactImportStatusSuccess",this.scribeImportSuccess),this.on("dataContactImportFollowSuccess",this.scribeFollowSuccess),this.on("dataWipeAddressbookSuccess",this.scribeWipeAddressbookSuccess),this.on("dataWipeAddressbookFailure",this.scribeWipeAddressbookFailure),this.on("click",{findFriendsSelector:this.scribeFindFriends,wipeAddressbookSelector:this.scribeWipeAddressbook,contactsImportSelector:this.scribeContactsImport})})}var o=i(111),n=i(126),a=i(142),r=i(144);t.exports=o(s,a)},1444:function(t,e,i){"use strict";function s(){this.after("afterClose",function(){this.trigger("uiImportLoadingDialogCancelled")}),this.after("initialize",function(){this.on(document,"uiOpenImportLoadingDialog",this.open),this.on(document,"uiCloseImportLoadingDialog",this.close)})}var o=i(111),n=i(163);t.exports=o(s,n)},1604:function(t,e,i){(function(e){"use strict";function s(t,i,s){var o=function(t,e){var i=t.getResponseHeader("server"),o=t.status,n="success"===e,a=void 0;if(!n)switch(e){case"timeout":case"abort":a=e;break;default:a="send failed"}s("success"===e,{errorInfo:a,serverName:i,statusCode:o})};e.ajax(t,{complete:o,headers:{"Cache-Control":"no-cache"},timeout:i})}function o(t,e){r.send(t,e,!1)}function n(t,e){return l||(l=new a(s,o,t,e)),l}var a=i(1605),r=i(131),l=void 0;t.exports=n}).call(e,i(10))},1605:function(t,e,i){function s(t){return"number"==typeof t&&t>0}function o(t){var e=s(t.probe_timeout),i=s(t.probe_max_sessions),o=s(t.probe_requests_per_session),n=Array.isArray(t.probe_urls)&&s(t.probe_urls.length)&&t.probe_urls.every(function(t){return"string"==typeof t&&s(t.length)});return e&&i&&o&&n}function n(t){for(var e=t.slice(0),i=[];e.length;){var s=Math.floor(Math.random()*e.length);i.push(e[s]),e.splice(s,1)}return i}function a(t,e,i,s){if(s=s||{},this.enabled=o(i),!this.enabled)return"development"===s.environment,this;this.probeDispatch=t,this.scribeDispatch=e;var a=function(){this.timeout=i.probe_timeout,this.remainingSessions=i.probe_max_sessions,this.urls=n(i.probe_urls).slice(0,i.probe_requests_per_session),setTimeout(a,144e5)}.bind(this);a()}var r=i(1606),l=r.ClientNetworkOperationStatus,h=r.ClientNetworkOperationType,c=r.createClientNetworkOperation,d="client_network_operation_event";a.prototype.sendProbe=function(){if(this.remainingSessions){for(var t=n(this.urls),e=0;e<t.length;e++){var i=window.btoa(Date.now()/Math.random()),s="https://"+t[e]+"/"+i,o=Date.now(),a=function(t,e){e.duration=Date.now()-o;var i=t?l.SUCCESS:l.FAILURE;this.logResult(s,i,e)}.bind(this);this.probeDispatch(s,this.timeout,a)}--this.remainingSessions}},a.prototype.logResult=function(t,e,i){i.method="GET";var s=c(h.EDGE_PROBE_BEACON,t,e,i);this.scribeDispatch(s,d)},t.exports=a},1606:function(t,e){function i(t,e,i,s){const o=document.createElement("a");o.href=e;var n=Date.now(),a={duration_ms:s.duration,http_method:s.method,http_status_code:s.statusCode,uri_scheme:o.protocol,uri_host_name:o.hostname,uri_path:o.pathname};return s.serverName&&(a.server_name=s.serverName),s.errorInfo&&(a.client_error_info=s.errorInfo),{duration_ms:s.duration,id:n,status:i,type:t,retry_count:0,requests:[a]}}var s={SUCCESS:0,FAILURE:1},o={EDGE_PROBE_BEACON:39};t.exports={ClientNetworkOperationStatus:s,ClientNetworkOperationType:o,createClientNetworkOperation:i}},1607:function(t,e,i){"use strict";function s(){this.defaultAttrs({text:null}),this.triggerTweetCompose=function(){setTimeout(function(){this.trigger("uiOpenTweetDialog",{text:this.attr.text,scribeContext:{component:"inline_tweet_compose"}})}.bind(this),1e3)},this.after("initialize",function(){this.on(document,"uiSwiftLoaded",this.triggerTweetCompose)})}var o=i(111);t.exports=o(s)},1608:function(t,e,i){(function(e){"use strict";var s=i(110),o=i(121),n=i(111),a=i(1609),r=i(126),l=i(177),h=i(227),c=i(143),d="home_page_module_visibility",u=1e3;t.exports=n(function(){o.mixin(this,[c]),this.viewportHelpers=l,this.attributes({isPollingState:!1,linkOverlaySelector:".LiveVideoHomePageModule-linkOverlay",moduleSelector:".LiveVideoHomePageModule",muteControlSelector:".LiveVideoHomePageModule-muteControl",playerContainerSelector:".LiveVideoHomePageModule-videoPlayer",playableMediaSelector:".LiveVideoHomePageModule-videoPlayer .PlayableMedia",postSlateSelector:".LiveVideoHomePageModule-postSlate",toggleButtonSelector:".LiveVideoHomePageModule-toggleButton",liveBadgeSelector:".LiveVideoHomePageModuleBadge",scrollThrottleInMillis:100,stateRefreshIntervalInSeconds:300,watchButtonSelector:".LiveVideoHomePageModule-watchButton"});var t=e(window);this.loadModule=function(t,e){e.html&&(this.$node.html(e.html),this.eventId=e.eventId,this.startPollingEventState(),e.displayThumbnail||(this.playableMediaHtml=this.select("playableMediaSelector").get(0).outerHTML),this.updateDOM(),this.afterInsertHTML())},this.onToggleClick=function(){var t=!this.isOpen;this.select("toggleButtonSelector").blur(),this.trigger(t?"uiLiveVideoHomePageModuleShow":"uiLiveVideoHomePageModuleHide",{eventId:this.eventId}),this.setSessionItem(d,t),this.isOpen=t,this.isMuted=!0,this.updateDOM()},this.updateDOM=function(){this.isPostLive?(this.detachPlayer(),this.select("playerContainerSelector").hide(),this.select("liveBadgeSelector").hide(),this.select("watchButtonSelector").hide(),this.select("postSlateSelector").show()):this.isOpen?(this.attachPlayer(),this.trigger("uiWatchPlayableMedia")):this.detachPlayer(),this.select("moduleSelector").toggleClass("is-closed",!this.isOpen)},this.onPlayableMediaReady=function(){this.startAutoplay()},this.afterInsertHTML=function(){this.attachChild(a,this.select("muteControlSelector"),{teardownOn:"uiLiveVideoHomeModuleTeardownMute"})},this.beforeRemoveHTML=function(){this.trigger("uiLiveVideoHomeModuleTeardownMute")},this.detachPlayer=function(){if(!this.isDetached){this.beforeRemoveHTML();var t=this.select("playableMediaSelector");t.trigger("uiUnloadPlayableMedia").detach(),this.isDetached=!0}},this.attachPlayer=function(){this.isDetached&&(this.select("playerContainerSelector").prepend(this.playableMediaHtml),this.isDetached=!1)},this.isInViewport=function(){var e=this.select("playableMediaSelector");return this.isOpen&&e.length>0&&l.isContainedInViewport(t,e,l.getGlobalNavHeight(),0)},this.startAutoplay=function(){this.select("playableMediaSelector").trigger("uiAutoplayMedia"),this.isPlaying=!0,this.isMuted===!1&&this.unmutePlayer()},this.stopAutoplay=function(){this.select("playableMediaSelector").trigger("uiStopAutoplayingMedia"),this.isPlaying=!1,this.isMuted=!0},this.onScroll=function(){this.isInViewport()?this.isPlaying||this.startAutoplay():this.isMuted&&this.isPlaying&&this.stopAutoplay()},this.onPageHidden=function(){this.isPlaying&&this.stopAutoplay()},this.onPageVisible=function(){this.isInViewport()&&this.startAutoplay()},this.onEventStateUpdate=function(t,e){e.stateRefreshIntervalInSeconds&&this.stateRefreshIntervalInSeconds!==e.stateRefreshIntervalInSeconds&&(this.stateRefreshIntervalInSeconds=e.stateRefreshIntervalInSeconds,this.startPollingEventState()),e.eventId===this.eventId&&"live"!==e.state&&(this.isPostLive=!0,this.updateDOM(),this.stopPollingEventState())},this.onClickThrough=function(){this.trigger("uiLiveVideoHomePageModuleClick",{eventId:this.eventId})},this.stopPollingEventState=function(){this.pollingInterval&&this.pollingInterval.clear()},this.startPollingEventState=function(){this.attr.isPollingState&&(this.stopPollingEventState(),this.pollingInterval=s.setIntervalEvent("uiLiveVideoGetEventState",this.stateRefreshIntervalInSeconds*u,{id:this.eventId}))},this.mutePlayer=function(){this.trigger("uiLiveVideoHomePageModuleMute",{eventId:this.eventId}),this.select("playableMediaSelector").trigger("uiMuteMedia")},this.unmutePlayer=function(){this.trigger("uiLiveVideoHomePageModuleUnmute",{eventId:this.eventId}),this.select("playableMediaSelector").trigger("uiUnmuteMedia")},this.onUpdateMuteState=function(t,e){this.isMuted=e.isMuted,e.isMuted?(this.mutePlayer(),this.select("playableMediaSelector").trigger("uiPreventPlayerUnloading",{preventUnload:!1})):(this.select("playableMediaSelector").trigger("uiPreventPlayerUnloading",{preventUnload:!0}),this.unmutePlayer())},this.setIsPlaying=function(t){this.select("moduleSelector").toggleClass("is-playing",t)},this.onPlay=function(){this.setIsPlaying(!0)},this.onPause=function(){this.setIsPlaying(!1)},this.before("teardown",function(){this.stopPollingEventState()}),this.after("initialize",function(){this.isPostLive=!1,this.eventId=null,this.stateRefreshIntervalInSeconds=this.attr.stateRefreshIntervalInSeconds;var t=this.getSessionItem(d);t="false"!==t,this.throttledOnScroll=r.throttle(this.onScroll.bind(this),this.attr.scrollThrottleInMillis),this.isOpen=t,this.on(document,"scroll",this.throttledOnScroll),this.on("uiPlayableMediaReady",{playableMediaSelector:this.onPlayableMediaReady}),this.on(document,"dataLiveVideoHomePageModuleSuccess",this.loadModule),this.on("click",{toggleButtonSelector:this.onToggleClick,linkOverlaySelector:this.onClickThrough,watchButtonSelector:this.onClickThrough}),this.on(document,"uiPageHidden",this.onPageHidden),this.on(document,"uiPageVisible",this.onPageVisible),this.on(document,"dataLiveVideoGetEventStateSuccess",this.onEventStateUpdate),this.on("uiLiveVideoUpdateMuteState",this.onUpdateMuteState),this.on("uiPlayableMediaPlay",this.onPlay),this.on("uiPlayableMediaPause",this.onPause),this.on("uiPlayableMediaPlaybackComplete",this.onPause)})},h)}).call(e,i(10))},1609:function(t,e,i){"use strict";var s=i(111);t.exports=s(function(){this.attributes({isMutedClassName:"is-muted"}),this.onClick=function(t){t.stopPropagation(),this.toggleState()},this.onHideModule=function(){this.isMuted=!0,this.updateDom()},this.toggleState=function(){this.isMuted=!this.isMuted,this.trigger("uiLiveVideoUpdateMuteState",{isMuted:this.isMuted}),this.updateDom()},this.updateDom=function(){this.$node.toggleClass(this.attr.isMutedClassName,this.isMuted)},this.before("teardown",function(){this.isMuted=!1,this.updateDom()}),this.after("initialize",function(){this.isMuted=!0,this.on("click",this.onClick),this.on(document,"uiLiveVideoHomePageModuleHide",this.onHideModule)})})},1610:function(t,e,i){"use strict";var s=i(111),o=i(240);t.exports=s(function(){this.getHomePageModule=function(){this.get({url:"/i/live_video_home_module",success:"dataLiveVideoHomePageModuleSuccess",error:"dataLiveVideoHomePageModuleError"})},this.getEventState=function(t,e){this.get({url:"/i/live_video_event_state/"+e.id,success:"dataLiveVideoGetEventStateSuccess",error:"dataLiveVideoGetEventStateError"})},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.getHomePageModule),this.on(document,"uiLiveVideoGetEventState",this.getEventState)})},o)},1611:function(t,e,i){"use strict";var s=i(111),o=i(142),n="28";t.exports=s(function(){this.scribeAction=function(t,e){this.scribe({component:"live_video_home_page_module",action:t},{},{items:[{item_type:n,id:e.eventId}]})},this.onShowModule=function(t,e){this.scribeAction("show",e)},this.onHideModule=function(t,e){this.scribeAction("hide",e)},this.onClickModule=function(t,e){this.scribeAction("click",e)},this.onMuteModule=function(t,e){this.scribeAction("mute",e)},this.onUnmuteModule=function(t,e){this.scribeAction("unmute",e)},this.after("initialize",function(){this.on(document,"uiLiveVideoHomePageModuleShow",this.onShowModule),this.on(document,"uiLiveVideoHomePageModuleHide",this.onHideModule),this.on(document,"uiLiveVideoHomePageModuleClick",this.onClickModule),this.on(document,"uiLiveVideoHomePageModuleMute",this.onMuteModule),this.on(document,"uiLiveVideoHomePageModuleUnmute",this.onUnmuteModule)})},o)},1612:function(t,e,i){"use strict";function s(){this.defaultAttrs({momentPivotSelector:".js-moment-pivot",momentStartEntrySelector:".MomentStreamItem--startEntry a",momentEndEntrySelector:".MomentStreamItem--endEntry a"}),this.scribeMomentPivot=function(){this.scribe({component:"moment_injection",element:"moment_pivot",action:"click"})},this.scribeEntryClick=function(t){this.scribe({component:"moment_injection",element:t,action:"click"})},this.after("initialize",function(){this.on("click",{momentPivotSelector:this.scribeMomentPivot,momentStartEntrySelector:this.scribeEntryClick.bind(this,"moment_start_entry"),momentEndEntrySelector:this.scribeEntryClick.bind(this,"moment_end_entry")})})}var o=i(111),n=i(142);t.exports=o(s,n)},1613:function(t,e,i){"use strict";var s=i(111),o=i(1105);t.exports=s(o)},1614:function(t,e,i){"use strict";function s(){this.suggestionFeedback=function(t,e){var i=e.suggestionInfo;this.scribeSuggestionFeedback(e),this.post({url:"/i/suggested_entry_feedback",data:{injection_type:i.suggestion_details.suggestion_type,feedback_type:e.feedbackType,tweet_ids:i.tweet_ids,user_ids:i.user_ids,controller_data:i.suggestion_details.controller_data,source_data:i.suggestion_details.source_data,undo:e.undo},dataType:this.DATA_TYPES.TEXT,eventData:e})},this.scribeSuggestionFeedback=function(t){var e=t.suggestionInfo.scribe_component,i=t.feedbackType,s=t.undo?"undo":"click";this.scribe({component:e,element:"feedback_"+i.toLowerCase(),action:s},t)},this.after("initialize",function(){this.on("uiSuggestionFeedback",this.suggestionFeedback)})}var o=i(111),n=i(240),a=i(142),r=o(s,n,a);t.exports=r},1615:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({immediateLaunch:!1,steps:[],backSelector:".js-previous-step",nextSelector:".js-next-step",stepContentSelector:".UIWalkthrough-step",stepProgressSelector:".UIWalkthrough-stepProgress",skipSelector:".UIWalkthrough-skip",cssPositionPrefix:"UIWalkthrough--",width:300}),this.startWalkthrough=function(){this.trigger("uiWalkthroughStart"),this.currentStepIndex=-1,e(".modal-overlay").addClass("modal-overlay--lighter"),window.scrollTo(0,0),e("html, body").scrollTop(0),this.attr.noReposition=!0,this.open(),this.nextStep(),setTimeout(this.repositionElements.bind(this),2e3)},this.finishWalkthrough=function(){this.$dialog.fadeOut(u,function(){e(".modal-overlay").animate({opacity:0},u,function(){this.trigger("uiWalkthroughComplete"),this.blurAndClose()}.bind(this))}.bind(this))},this.cleanupAfterClose=function(){e(".modal-overlay").removeClass("modal-overlay--lighter"),e(".modal-overlay").removeAttr("style"),this.$dialog.removeAttr("style")},this.previousStep=function(){this.changeStep(-1)},this.nextStep=function(){this.changeStep(1)},this.changeStep=function(t){if(this.currentStepIndex+=t,this.currentStep=this.attr.steps[this.currentStepIndex],this.currentStepIndex>=this.attr.steps.length||this.currentStepIndex<0)return this.finishWalkthrough();var i=_("{{currentStepNumeral}} of {{totalStepsNumeral}}",{currentStepNumeral:this.currentStepIndex+1,totalStepsNumeral:this.attr.steps.length});this.select("stepProgressSelector").text(i),this.select("stepContentSelector").fadeOut();var s=this.$highlightEl;if(this.$highlightEl=this.$targetEl=null,this.currentStep.targetClass&&(this.$highlightEl=this.$targetEl=e(this.currentStep.targetClass+":visible").first()),this.currentStep.highlightClass){var o=e(this.currentStep.highlightClass+":visible").first();o.length>0&&(this.$highlightEl=o)}if(!this.$pseudoEl||this.$highlightEl&&this.$highlightEl.is(s)||(this.$pseudoEl.fadeOut(u,function(){e(this).remove()}),this.$pseudoEl=null),this.$targetEl&&(0===this.$targetEl.length||0===this.$highlightEl.length))return this.changeStep(t>0?1:-1);this.sizeModalToContent(),this.$node.find(this.currentStep.contentClass).fadeIn(),this.updateButtons();var n=this.maybeScrollElementIntoView();this.trigger("uiWalkthroughProgress",{index:this.currentStepIndex}),setTimeout(function(){this.$targetEl&&!this.$highlightEl.is(s)&&this.addPseudoElement(),this.positionDialog()}.bind(this),n?h+50:1)},this.sizeModalToContent=function(){var t=this.$node.find(this.currentStep.contentClass).clone().css({height:"auto",width:this.attr.width-50}).appendTo("body"),e=Math.min(Math.max(t.outerHeight(),c),d);e+=this.select("stepProgressSelector").outerHeight(),t.remove(),this.select("modalBodySelector").height(e),this.$dialog.width(this.attr.width)},this.maybeScrollElementIntoView=function(){var t=!1;if(this.$highlightEl&&0===this.$highlightEl.closest(".topbar").length){var i=this.$highlightEl.offset().top+this.$highlightEl.height()-n.getWindow().scrollTop()-50>n.getWindow().height(),s=this.$highlightEl.offset().top-n.getWindow().scrollTop()-100<0&&this.$highlightEl.offset().top>100;i||s?(t=!0,e("html, body").animate({scrollTop:this.$highlightEl.offset().top-100},h)):this.$highlightEl.offset().top+this.$highlightEl.height()-50<=n.getWindow().height()&&0!==n.getWindow().scrollTop()&&(t=!0,e("html, body").animate({scrollTop:0},h))}return t},this.addPseudoElement=function(){this.$pseudoEl=this.$highlightEl.clone(),this.$pseudoEl.addClass(p),this.$pseudoEl.css({"box-sizing":"border-box",position:"absolute",margin:0,top:this.$highlightEl.offset().top-n.getWindow().scrollTop(),left:this.$highlightEl.offset().left,zIndex:this.$node.zIndex()+1,display:"none"}),this.$node.append(this.$pseudoEl),this.$pseudoEl.fadeIn(),this.currentStep.containerClasses&&(this.$pseudoEl=this.$pseudoEl.wrap("<div class='"+this.currentStep.containerClasses+"'></div>"),
this.$pseudoEl=this.$pseudoEl.parent())},this.repositionElements=function(){var t=this.maybeScrollElementIntoView();setTimeout(function(){if(this.$pseudoEl&&this.$highlightEl){var t="."+p;this.$pseudoEl.find(t).addBack(t).css({top:this.$highlightEl.offset().top-n.getWindow().scrollTop(),left:this.$highlightEl.offset().left})}this.positionDialog()}.bind(this),t?h+50:1)},this.positionDialog=function(){var t=void 0,i=this.attr.cssPositionPrefix;this.$node.removeClass(function(t,s){return e(this).attr("class").split(" ").filter(function(t){return t.indexOf(i)>=0}).join(" ")}),this.$targetEl?(t=this.adjacent(this.$dialog,this.$targetEl,{width:this.attr.width,allowGravitySwitch:!0}),this.$node.addClass(i+t.gravity),this.$node.addClass(i+t.weight),t.top=t.top-n.getWindow().scrollTop()):t=this.center(this.$dialog),this.attr.top=Math.round(t.top),this.attr.left=Math.round(t.left),this.$dialog.css({transform:"translate3d("+this.attr.left+"px,"+this.attr.top+"px,0)"})},this.updateButtons=function(){this.currentStepIndex+1===this.attr.steps.length?this.select("nextSelector").text("Got it"):this.select("nextSelector").text("Next"),this.select("backSelector").toggleClass("u-hidden",this.currentStepIndex<1)},this.around("close",function(t,i){e(i.target).is(this.attr.skipSelector)&&(i.preventDefault(),this.trigger("uiWalkthroughSkipAll",{index:this.currentStepIndex}),t(i))}),this.after("initialize",function(){0!==this.attr.steps.length&&(this.on(document,"uiWantsUIWalkthrough",this.startWalkthrough),this.attr.immediateLaunch&&this.on(document,"uiSwiftLoaded",this.startWalkthrough),this.on("click",{nextSelector:this.nextStep,backSelector:this.previousStep}),this.on("uiDialogClosed",this.cleanupAfterClose),this.on(document,"uiNewItemsBarVisible",function(){setTimeout(this.repositionElements.bind(this),500)}.bind(this)),this.on(window,"resize",a.debounce(this.repositionElements,200)))})}var o=i(111),n=i(164),a=i(126),r=i(163),l=i(172),_=i(123);t.exports=o(r,l,s);var h=300,c=100,d=250,u=400,p="js-pseudo-position"}).call(e,i(10))},1616:function(t,e,i){"use strict";function s(){this.defaultAttrs({componentName:"ui_walkthrough"}),this.handleStepProgress=function(t,e){if(this.lastIndex!==e.index){var i=e.index>this.lastIndex?"next":"previous";this.scribe({component:this.attr.componentName,action:i},{event_value:this.lastIndex}),this.lastIndex=e.index}},this.handleSkip=function(t,e){this.scribe({component:this.attr.componentName,action:"skip"},{event_value:this.lastIndex})},this.handleStart=function(){this.lastIndex=0,this.scribe({component:this.attr.componentName,action:"impression"})},this.handleEnd=function(){this.lastIndex=null,this.scribe({component:this.attr.componentName,action:"done"})},this.after("initialize",function(){this.on("uiWalkthroughStart",this.handleStart),this.on("uiWalkthroughComplete",this.handleEnd),this.on("uiWalkthroughProgress",this.handleStepProgress),this.on("uiWalkthroughSkipAll",this.handleSkip)})}var o=i(111),n=i(142);t.exports=o(s,n)},1617:function(t,e,i){"use strict";function s(){this.defaultAttrs({dropdownBtnSelector:".WtfLargeCarouselStreamItem-header .Icon--caretDownLight",hiddenUserSelector:".WtfLargeCarouselStreamItem-hiddenUsers .WtfLargeCarouselStreamItem-user",moduleSelector:".WtfLargeCarouselStreamItem",refreshBtnSelector:".WtfLargeCarouselStreamItem-refreshBtn",refreshBtnContainerSelector:".WtfLargeCarouselStreamItem-refreshBtnContainer",refreshDisabledBtnSelector:".WtfLargeCarouselStreamItem-refreshDisabledBtn",visibleUsersContainerSelector:".WtfLargeCarouselStreamItem-visibleUsers",visibleUserSelector:".WtfLargeCarouselStreamItem-visibleUsers .WtfLargeCarouselStreamItem-user"})}var o=i(111),n=i(1618);t.exports=o(s,n)},1618:function(t,e,i){(function(e){"use strict";function s(){o.mixin(this,[a]),this.defaultAttrs({fadeInDuration:400,scribedResultAttr:"data-scribed-result",scribedResultSelector:"[data-scribed-result]"}),this.onClickRefresh=function(t,e){var i=this.getModuleFromEvent(t);this.scribe({component:this.getSuggestionInfo(i).scribe_component,action:"refresh"});var s=i.find(this.attr.visibleUserSelector),o=s.length,n=i.find(this.attr.visibleUsersContainerSelector);n.css("height",n.height()),i.find(this.attr.visibleUserSelector).remove(),i.find(this.attr.hiddenUserSelector).slice(0,o).appendTo(n).hide().fadeIn(this.attr.fadeInDuration),this.scribeResults(i),n.css("height",""),i.find(this.attr.hiddenUserSelector).length<o&&(i.find(this.attr.refreshBtnSelector).remove(),i.find(this.attr.refreshDisabledBtnSelector).removeClass("u-hidden"))},this.onClickViewAll=function(t,e){var i=this.getModuleFromEvent(t);this.scribe({component:this.getSuggestionInfo(i).scribe_component,element:"view_all_link",action:"click"})},this.getModuleFromEvent=function(t){return e(t.target).closest(this.attr.moduleSelector)},this.getSuggestionInfo=function(t){var e=t.attr("data-suggestion-json");return e&&JSON.parse(e)||{}},this.onTimelineUpdate=function(){var t=this.select("moduleSelector").toArray();t.forEach(function(t){var i=e(t);if(i.hasClass("js-dedupe-wtf-sidebar")&&!i.is("[data-deduped-wtf-sidebar]")){var s=this.getSuggestionInfo(i).user_ids||"",o=s.split(",");this.trigger(document,"uiAddWtfBlacklistUsers",{userIds:o}),i.attr("data-deduped-wtf-sidebar",!0)}this.scribeResults(i)},this)},this.scribeResults=function(t){var i=t.find(this.attr.visibleUserSelector).not(this.attr.scribedResultSelector);if(i.length){var s=i.toArray().map(function(t){return this.getScribeItem(e(t))},this);this.scribe({component:this.getSuggestionInfo(t).scribe_component,action:"results"},{items:s}),i.attr(this.attr.scribedResultAttr,!0)}},this.getScribeItem=function(t){var e=this.getSuggestionInfo(t).suggestion_details||{};return{cursor:parseInt(t.attr("data-position"),10),id:t.attr("data-item-id"),item_type:n.user,position:t.closest(this.attr.moduleSelector).index(),suggestion_details:{suggestion_type:e.suggestion_type,controller_data:e.controller_data,source_data:e.source_data}}},this.after("initialize",function(){this.attr.refreshBtnSelector&&this.on("click",{refreshBtnSelector:this.onClickRefresh}),this.attr.viewAllLinkSelector&&this.on("click",{viewAllLinkSelector:this.onClickViewAll}),this.on(document,"uiSwiftLoaded uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.onTimelineUpdate)})}var o=i(121),n=i(144),a=i(142);t.exports=s}).call(e,i(10))},1619:function(t,e,i){"use strict";function s(){this.defaultAttrs({dropdownBtnSelector:".WtfSuggestStreamItem-header .Icon--caretDownLight",hiddenUserSelector:".WtfSuggestStreamItem-hiddenUsers .WtfSuggestStreamItem-user",moduleSelector:".WtfSuggestStreamItem",refreshBtnSelector:".WtfSuggestStreamItem-refreshBtn",refreshBtnContainerSelector:".WtfSuggestStreamItem-refreshBtnContainer",refreshDisabledBtnSelector:".WtfSuggestStreamItem-refreshDisabledBtn",viewAllLinkSelector:".WtfSuggestStreamItem-viewAllLink",visibleUsersContainerSelector:".WtfSuggestStreamItem-visibleUsers",visibleUserSelector:".WtfSuggestStreamItem-visibleUsers .WtfSuggestStreamItem-user"})}var o=i(111),n=i(1618);t.exports=o(s,n)},1620:function(t,e,i){"use strict";function s(){this.defaultAttrs({dismissBtnSelector:".WtfTweetForwardStreamItem .dismiss-btn",moduleSelector:".WtfTweetForwardStreamItem"})}var o=i(111),n=i(1618);t.exports=o(s,n)},1621:function(t,e,i){"use strict";var s=i(1024),o=i(1025),n=i(1026),a=i(1050),r=i(1045),l=i(1041),h=i(1043),c=i(1057),d=i(1622);t.exports=function(t){a.attachTo(document,t),s.attachTo(document),r.attachTo(".ProfileOnboarding",{useProfileErrorDialog:!1,endEditOnSave:!1,onProfile:!1}),h.attachTo(".ProfileHeaderCardEditing-location"),c.attachTo(".ProfileHeaderCardEditing-location",{eventData:{scribeContext:{element:"geo_picker"}}}),n.attachTo(".BirthdateSelect",{maximumDateAvailable:t.birthdateData.maximumBirthdate,shouldShowVisibilityPopover:t.birthdateData.shouldShowVisibilityPopover,visibilitySettingsLearnMorePath:t.birthdateData.visibilitySettingsLearnMorePath,userId:t.userId,environment:t.environment}),l.attachTo(".BirthdateSelect"),o.attachTo(".ProfileHeaderCardEditing-bioRich",{textSelector:".rich-editor",maxLength:160}),d.attachTo(".ProfileOnboarding",{steps:t.smartNuxProfileOnboarding.steps,totalSteps:t.smartNuxProfileOnboarding.totalSteps,initialProgressPercentage:t.smartNuxProfileOnboarding.initialProgressPercentage,userId:t.userId})}},1622:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({closeSelector:".js-action-dismiss",skipSelector:".skip-step-btn",completeSelector:".ProfileOnboarding-complete",completeCtaSelector:".ProfileOnboarding-profileButton",progressIndicatorSelector:".ProfileOnboardingProgress",ctaSelector:".ProfileOnboarding-cta",avatarContainerSelector:"#choose-photo",profilePhotoCtaClass:"ProfileOnboarding-cta--profilePhoto",profilePhotoCtaSelector:".upload-profile-photo-btn",steps:[],userId:0}),this.localStorage=new n("profile_onboarding"),this.hideModule=function(t,e){this.$node.fadeOut()},this.showModule=function(){this.$node.show()},this.skipStep=function(t){var e=this.currentStep;e&&(this.storeStepSkip(e),this.advanceToNextStep())},this.storeStepSkip=function(t){var e=this.getSkippedSteps()||{};e[t]=this.getTime(),this.localStorage.setItem(this.storageKey,e)},this.getSkippedSteps=function(){var t=this.localStorage.getItem(this.storageKey);return t||{}},this.showStep=function(t){this.currentStep=t,this.$node.find(".ProfileOnboarding-"+t).show(),t===this.profilePhotoStep&&this.select("ctaSelector").addClass(this.attr.profilePhotoCtaClass)},this.hideStep=function(t){this.$node.find(".ProfileOnboarding-"+t).hide(),t===this.profilePhotoStep&&this.select("ctaSelector").removeClass(this.attr.profilePhotoCtaClass)},this.advanceToNextStep=function(){var t=this.currentStep,e=this.eligibleSteps.indexOf(t);if(this.eligibleSteps.length===e+1)this.updateProgress(0),setTimeout(function(){this.hideStep(t),this.showCompletion()}.bind(this),700);else{this.hideStep(t),this.showStep(this.eligibleSteps[e+1]);var i=this.eligibleSteps.length-e-1;this.updateProgress(i)}},this.showCompletion=function(){this.select("completeSelector").show(),this.select("progressIndicatorSelector").hide(),this.select("ctaSelector").hide()},this.globalSkip=function(){this.storeStepSkip(this.globalSkipKey),this.hideModule()},this.showProfilePhotoDropdown=function(t){t.preventDefault(),t.stopImmediatePropagation();var i=e("body").find(this.attr.avatarContainerSelector);this.trigger(i,"uiShouldShowDropdown")},this.navigate=function(t){this.trigger("uiNavigate",{href:e(t.target).attr("href")})},this.initProfileOnboarding=function(){if(this.attr.steps.length){var t=this.getSkippedSteps();if(!t[this.globalSkipKey]){var e=this.attr.steps.filter(function(e){return Object.keys(t).indexOf(e)<0});e.length&&(this.eligibleSteps=e,this.showModule(),this.updateProgress(this.eligibleSteps.length),this.showStep(this.eligibleSteps[0]),this.trigger("uiEditProfileStart"))}}},this.getTime=function(){return(new Date).getTime()},this.after("initialize",function(){this.on("click",{closeSelector:this.globalSkip,skipSelector:this.skipStep,profilePhotoCtaSelector:this.showProfilePhotoDropdown,completeCtaSelector:this.navigate}),this.storageKey=this.attr.userId+"_skippedSteps",this.globalSkipKey="global",this.profilePhotoStep="profilePhoto",this.on("uiEditProfileSuccess",this.advanceToNextStep),this.on(document,"uiProfileImagePublished",this.advanceToNextStep),this.initProfileOnboarding()})}var o=i(111),n=i(202),a=i(1623);t.exports=o(s,a)}).call(e,i(10))},1623:function(t,e,i){"use strict";function s(){this.defaultAttrs({textSelector:".ProfileOnboardingProgress-text",completionSelector:".ProfileOnboardingProgress-barCompleted",totalSteps:0,initialProgressPercentage:0}),this.updateProgress=function(t){if(this.attr.initialProgressPercentage>0&&this.attr.totalSteps>0&&"undefined"!=typeof t){var e=(100-this.attr.initialProgressPercentage)*(this.attr.totalSteps-t)/this.attr.totalSteps,i=Math.round(this.attr.initialProgressPercentage+e);this.setProgress(i)}},this.setProgress=function(t){this.select("textSelector").text(_("{{percent}}% complete",{percent:t})),this.select("completionSelector").width(t+"%")}}var _=i(123);t.exports=s},1624:function(t,e,i){"use strict";function s(){this.defaultAttrs({dismissSelector:".js-dismiss",launchSelector:".js-launch",experiments:{}}),this.click=function(t){var e="web_unfollow_5531";this.trigger("uiABImpression",{experiment:e});var i=this.attr.experiments[e]||{},s=i.bucket;this.scribe({element:"reonbarding_callout",action:"click"}),"control"===s&&(t.preventDefault(),this.dismiss())},this.dismiss=function(){this.$node.remove(),o("res_flow_dismiss","1",{expires:1/0}),this.scribe({element:"reonbarding_callout",action:"dismiss"})},this.after("initialize",function(){this.on("click",{dismissSelector:this.dismiss,launchSelector:this.click}),this.scribe({element:"reonbarding_callout",action:"impression"})})}var o=i(154),n=i(111),a=i(142);t.exports=n(s,a)},1625:function(t,e,i){"use strict";function s(){this.defaultAttrs({userId:null,profileEditDialog:"#profile_image_upload_dialog",imageUploaderButton:".avatar-settings .uploader-image .photo-selector",dropdownContainer:".DashboardProfileCard-avatarContainer",cancelButton:".dropdown-menu .cancel-options"}),this.updateProfileImages=function(t,e){var i=e&&e.status;i&&"avatar"===e.sourceEventData.uploadType&&(this.$node.find(".avatar[data-user-id='"+this.attr.userId+"'], [data-user-id='"+this.attr.userId+"'] .avatar").attr("src",i),this.$node.find("img.DashboardProfileCard-avatarImage").attr("src",i).show(),this.$node.find("div.DashboardProfileCard-avatarImage").remove(),this.$node.find(".top-timeline-tweet-box-user-image").attr("src",i),this.select("profileEditDialog").attr("data-upload-complete","true"),this.$node.find(".DashboardProfileCard-avatarLink").removeClass("js-tooltip").removeAttr("title"),this.$node.find(".DashboardProfileCard-avatarLink img").removeClass("u-borderUserColorLightHover"))},this.after("initialize",function(t,e){this.select("dropdownContainer").find(".file-input").removeClass("js-tooltip"),this.on("dataSaveImageSuccess",this.updateProfileImages),this.on(this.attr.cancelButton,"click","uiForceDropdownClosed"),n.loadOnce(e.profileEditingCSSBundle),this.attachChild(d,document,e);var i={scribeContext:{component:"profile_image_upload"}};this.attachChild(r,this.attr.profileEditDialog),this.attachChild(h,this.attr.imageUploaderButton,{maxSizeInBytes:10485760,fileTooBigMessage:"Please select a profile image that is less than 10 MB.",uploadType:"avatar",eventData:i}),this.attachChild(a,this.attr.profileEditDialog,{uploadType:"avatar",eventData:i,isAvatarWhenShowingAvatarOptions:!1}),this.attachChild(c,this.attr.dropdownContainer,{supportsAutoOpen:!1,uploadType:"avatar",eventData:i}),this.attachChild(l,document),this.on("uiProfileImagePublished",this.teardown)})}var o=i(111),n=i(1051),a=i(1061),r=i(1065),l=i(1023),h=i(1037),c=i(1031),d=i(1066),u=i(227);i(123);t.exports=o(s,u)}});
//# sourceMappingURL=8.pages_home.en.80196d085a907c892d99.js.map