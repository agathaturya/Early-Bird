webpackJsonp([15],{814:function(t,e,i){"use strict";function s(t,e){n(e),p.attachTo(document,e),f.attachTo(document),r.attachTo(document,e),g.attachTo(document,e),d.attachTo(document,e),m.attachTo(document,e),S.attachTo(document,e),e.excludeExpandingTweets||l.attachTo(t,e);var i=".js-new-items-bar-container";u.attachTo(i,e),e.excludeUserActions||v.attachTo(t,w.merge(e,{genericItemSelector:".js-stream-item"})),a.attachTo(document),o.attachTo(document),c.attachTo(document),h.attachTo(document)}var n=i(815),r=i(819),a=i(820),o=i(821),c=i(822),h=i(823),l=i(824),d=i(830),u=i(831),m=i(374),p=i(833),f=i(848),g=i(849),v=i(850),w=i(126),S=i(852);t.exports=s},815:function(t,e,i){"use strict";function s(t){n.attachTo(document,t),a.attachTo(document,t),r.attachTo(o,t,{initialFocusSelector:".modal-close"})}var n=i(816),r=i(817),a=i(818),o="#activity-popup-dialog";t.exports=s},816:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}var n=i(111),r=i(240);t.exports=n(s,r)},817:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,s=e.contentId,n=e.component;if(this.attr.eventData=r.merge(this.attr.eventData,{scribeContext:{component:n}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[n]){this.clearContent();var a=i||"Loading...";this.setTitle(a),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===n)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:n,contentId:s})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(t,i){this.clearContent();var s=e("<p>").addClass("error").html(i.message);this.setUsers(s,!0),this.setTitle("Sorry! There was an error.")},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(t){t&&(this.select("activityUserCheckboxSelector").each(function(i,s){var n=e(s),r=n.closest(this.attr.accountSelector),a=r.attr("data-user-id");n.prop("checked",t.indexOf(a)<0)}.bind(this)),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector"),e=t.length===t.filter(":checked").length;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",e)},this.saveExcludedReplyUsers=function(){var t=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(t){return e(t).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:t})},this.toggleAllReplyUsers=function(t){this.select("activityUserCheckboxSelector").prop("checked",e(t.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}var n=(i(123),i(111)),r=i(126),a=i(163),o=i(440),c=i(443);t.exports=n(s,a,c,o)}).call(e,i(10))},818:function(t,e,i){"use strict";function s(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:r.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}var n=i(111),r=i(144),a=i(142);t.exports=n(s,a)},819:function(t,e,i){"use strict";function s(){this.curateTweets=function(t,e){function i(t){e.added.forEach(function(){this.scribe({component:"tweet",action:"add_to_timeline"},t)}.bind(this));var i="Tweet successfully added/removed.";this.trigger("uiShowMessage",{message:i}),this.trigger("dataTweetsCurated",t)}function s(t){var e="Failed to add/remove Tweet.";this.trigger("uiShowError",{message:e})}var n={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.addTweet=function(t,e){function i(t){var e=_("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:"Tweet successfully removed."}),this.trigger("dataTweetRemovedFromTimeline",t)}function s(t){this.trigger("uiShowError",{message:"Error removing tweet."}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function s(t){this.trigger("uiShowError",{message:"Error creating collection."})}var n={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=_("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function s(t){this.trigger("uiShowError",{message:"Error updating collection."})}var n={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uiShowError",{message:"Error deleting collection."})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:s.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){a.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}var n=i(111),r=i(240),a=i(136),o=i(142),_=i(123),c=n(s,r,o);t.exports=c},820:function(t,e,i){"use strict";function s(){this.updateMomentMapAndTriggerEvent=function(t){return function(e){this.momentMap=o.merge(this.momentMap,e.moment_map||{}),this.trigger(document,t,e)}.bind(this)},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?_('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.removeTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?_('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):_('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}var n=i(111),r=i(240),a=i(142),o=i(126),_=i(123);t.exports=n(s,r,a)},821:function(t,e,i){"use strict";function s(){this.createActionHandler=function(t,e){return function(i,s){this.post({url:"/i/moments/edit/"+s.moment_id+"/"+t,data:s,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}.bind(this)},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure",noAbortOnNavigate:!0})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var s=e.fileId,n=r.get(s);if(n)return this.trigger(document,"uiMediaSruInit",{fileId:s,uploadId:n.uploadId,mediaCategory:n.mediaCategory}),this.mediaSruFinalize(n).then(function(t){this.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}.bind(this)).catch(function(t){throw i(),t})},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function s(){this.trigger("uiShowError",{message:"Something went wrong. This Moment couldn't be created. Give it a minute, then try again."})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:"You do not currently have permission to perform this action."}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",h.merge(t,e))}function s(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment sensitivity updated successfully."})}function s(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:"Moment location setting updated successfully."})}function s(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}var n=i(111),r=i(220),a=i(240),o=i(249),c=i(417),h=i(126);i(123);t.exports=n(s,a,o,c)},822:function(t,e,i){"use strict";function s(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}var n=i(111),r=i(142);t.exports=n(s,r)},823:function(t,e,i){"use strict";function s(){this.scribeTweetAction=function(t,e,i){var s=i&&i.scribeContext&&i.scribeContext.component;this.scribe({component:s,element:"moment",action:t})},this.after("initialize",function(){this.on("uiMomentMakerAddTweet",this.scribeTweetAction.bind(this,"add")),this.on("uiMomentMakerRemoveTweet",this.scribeTweetAction.bind(this,"remove")),this.on("dataMomentMakerAddTweetFailure",this.scribeTweetAction.bind(this,"add_failure")),this.scribeOnEvent("uiOpenAddToMomentDialog",{component:"add_to_moment_dialog",action:"open"})})}var n=i(111),r=i(142);t.exports=n(s,r)},824:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetSelector:".tweet",tweetFormSelector:".tweet-form",conversationModuleSelector:".conversation-module",animatedGifSelector:".animated-gif"})}var n=i(111),r=i(825),a=i(826),o=i(394),c=i(827),h=i(829),l=i(377),d=i(479);t.exports=n(s,a,c,h,o,d,l,r)},825:function(t,e,i){(function(e){"use strict";var s=i(121),n=i(138);t.exports=function(){s.mixin(this,[n]),this.getPlayableMediaEventData=function(t){var e={},i=t.find("[data-media-id]").attr("data-media-id");if(i)e.playlist_url=i,e.video_uuid=i;else{var s=t.find("[data-card-url]").attr("data-card-url");e.playlist_url=s,e.video_uuid=s}return e.video_type="video",e.card_details=JSON.stringify(e),e},this.logPlayableMediaEvents=function(t,i,s){var n=i.attr("data-tweet-id"),r=void 0;r="animated_gif"===s||"__entity_animated_gif"===s?"gif_player":"vine_player";var a=e.extend({},this.interactionData(i),this.getPlayableMediaEventData(i));this.eventsFired.view[n]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_view"},a)),this.scribeInteraction({action:"video_view",element:r},a),this.eventsFired.view[n]=!0),this.eventsFired[t][n]||(this.trigger("uiPlayableMediaEvent",e.extend({name:"video_content_"+t},a)),this.scribeInteraction({action:t,element:r},a),this.eventsFired[t][n]=!0)},this.shouldCollectAnalytics=function(t,e){return"animated_gif"===e||t.data("has-vine")},this.onAutoplayStart=function(t){var i=e(t.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&(this.autoplayTimeout=setTimeout(function(){this.logPlayableMediaEvents("view_threshold",i,s)}.bind(this),3e3))}},this.onAutoplayStop=function(){this.autoplayTimeout&&clearTimeout(this.autoplayTimeout)},this.onTweetExpanded=function(t){var i=e(t.target);if(i.length){var s=i.find("[data-card2-name]").attr("data-card2-name");this.shouldCollectAnalytics(i,s)&&this.logPlayableMediaEvents("play_from_tap",i,s)}},this.after("initialize",function(){this.eventsFired={view:{},play_from_tap:{},view_threshold:{}},this.on("uiLOHPMediaPlay",this.onTweetExpanded),this.on("uiAutoplayMedia",this.onAutoplayStart),this.on("uiStopAutoplayingMedia",this.onAutoplayStop)})}}).call(e,i(10))},826:function(t,e,i){(function(e){"use strict";t.exports=function(){this.defaultAttrs({missingTweetsLinkSelector:"a.missing-tweets-link",missingTweetsBarSelector:".missing-tweets-bar",focalTweetSelector:".original-tweet",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",conversationTweetClass:"conversation-tweet",detachedConversationClass:"detached-conversation",expandingConversationClass:"expanding-conversation",selectedSelector:".selected-stream-item",awaitingAncestorsClass:".conversation-awaiting-ancestors"}),this.handleExpandConversationAndLoadMissingTweets=function(t){t.preventDefault();var e=this.streamItemFromEvent(t),i=this.getFocalPoint(e),s=i.data("permalink-path"),n=i.data("conversation-id");s&&this.trigger("uiNavigate",{href:s,conversation_id:n})},this.streamItemFromEvent=function(t){return e(t.target).closest(this.attr.topLevelStreamItemSelector)},this.getFocalPoint=function(t){return t.find(this.attr.focalTweetSelector)},this.getTweetId=function(t){return e(t).find(".tweet").attr("data-tweet-id")},this.notifyConversationMutated=function(t,i){var s=e(t.target),n=s.closest(this.attr.conversationModuleSelector);n.length&&this.trigger(n,"uiConversationModuleUpdated")},this.after("initialize",function(){this.on("click",{missingTweetsLinkSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiShortcutEnter",{missingTweetsBarSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiTweetInserted uiBeforeTweetRemoved",this.notifyConversationMutated)})}}).call(e,i(10))},827:function(t,e,i){(function(e){"use strict";function s(){this.getSize=function(t,e){var i=e.attr("data-width"),s=e.attr("data-height"),n=e.width(),r=s*(n/i);return{h:r,w:n}},this.createMediaElement=function(t,e,i){return new MediaElement(t,{pluginPath:n.path,flashName:"flashmediaelement.swf",loop:!0,defaultVideoHeight:e.h,defaultVideoWidth:e.w,pluginHeight:e.h,pluginWidth:e.w,success:i})},this.prepareMediaElement=function(t,e){var i=function(t){this.setCurrentTime(t,0),t.play()}.bind(this),s=this.createMediaElement(t,e,function(t){t.addEventListener("ended",function(){t&&i(t)},!1),t.addEventListener("timeupdate",function(){if("native"===s.pluginType&&t.duration<=t.currentTime){var e=function n(){i(t),t.removeEventListener("loadeddata",n)};t.addEventListener("loadeddata",e),t.load()}},!1),t.play()});return s},this.getPlayer=function(t){if(t.length){var e=t.find(this.attr.animatedGifSelector);if(e.length)return this.players[t.attr("data-tweet-id")]}return null},this.setCurrentTime=function(t,e){"native"===t.pluginType?t.currentTime=e:t.setCurrentTime(e)},this.autoplayGif=function(t){this.startGif(e(t.target).closest(".tweet"))},this.startGifOnEvent=function(t){this.startGif(e(t.target))},this.startGif=function(t){if(t=t.filter(":not(.animated-gif-playing)").has(this.attr.animatedGifSelector),t.length){var e=t.attr("data-tweet-id");if(!this.players[e]){var i=t.find(this.attr.animatedGifSelector),s=i.find("[video-src]");s.attr("src",s.attr("video-src"));var n=i.get(0),r=this.getSize(t,i);this.players[e]=this.prepareMediaElement(n,r),this.players[e].load()}t.addClass("animated-gif-playing"),setTimeout(function(){this.players[e]&&this.players[e].play&&this.players[e].play()}.bind(this),1)}},this.stopAutoplayingGif=function(t){this.stopGif(e(t.target).closest(".tweet"))},this.stopGifOnEvent=function(t){this.stopGif(e(t.target))},this.stopGif=function(t){var e=t.hasClass("animated-gif-playing")&&this.getPlayer(t);e&&(t.removeClass("animated-gif-playing"),t.find(".me-plugin").remove(),e.pause&&e.pause())},this.pauseGif=function(t){var i=e(t.target),s=i.hasClass("animated-gif-playing")&&this.getPlayer(i);s&&s.pause&&s.pause()},this.seekGif=function(t,i){var s=e(t.target),n=s.hasClass("animated-gif-playing")&&this.getPlayer(s);if(n){var r=i.position*n.duration;isNaN(n.duration)||(this.setCurrentTime(n,Math.min(r,n.duration)),n.pause())}},this.after("initialize",function(){this.players={},this.on("uiAutoplayMedia",this.autoplayGif),this.on("uiStartGif",this.startGifOnEvent),this.on("uiStopAutoplayingMedia",this.stopAutoplayingGif),this.on("uiStopGif",this.stopGifOnEvent),this.on("uiPauseGif",this.pauseGif),this.on("uiSeekGif",this.seekGif)})}var n=i(828);t.exports=s}).call(e,i(10))},828:function(t,e){"use strict";t.exports={path:"/flash/1/"}},829:function(t,e,i){(function(e){"use strict";var s=i(156).browser(),n=i(121),r=i(138);t.exports=function(){n.mixin(this,[r]),this.defaultAttrs({snapReelVideoSelector:"video.js-snap-reel",easingAcceleration:.5,FPS:s.chrome?20:30}),this.logInteraction=function(t){var e=t.attr("data-tweet-id");this.eventScribed[e]||(this.scribeInteraction({action:"snap_reel_interaction"},this.interactionData(t)),this.eventScribed[e]=!0)},this.mouseOver=function(t){this.video=e(t.target),this.tweet=this.video.parents(this.attr.tweetSelector),this.tweet.hasClass("animated-gif-playing")&&(this.scribeTimeout=setTimeout(function(){this.logInteraction(this.tweet,this.video)}.bind(this),3e3)),this.start()},this.mouseOut=function(t){clearTimeout(this.scribeTimeout),this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.tweet.removeClass("animated-gif-playing"),this.trigger(this.tweet,"uiStartGif")),this.stop(),this.scribeTimeout=void 0,this.tweet=void 0,this.targetPosition=void 0},this.mouseMove=function(t){this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.targetPosition=t.pageX-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){if(this.running){var t=1e3/this.attr.FPS;setTimeout(function(){requestAnimationFrame(this.tick.bind(this)),this.update()}.bind(this),t)}},this.update=function(){if(this.targetPosition){this.currentPosition+=(this.targetPosition-this.currentPosition)*this.attr.easingAcceleration;var t=this.currentPosition/this.video.width();this.trigger(this.tweet,"uiSeekGif",{position:t})}},this.after("initialize",function(t,e){this.scribeTimeout=void 0,this.eventScribed={},this.currentPosition=0,this.on("mouseover",{snapReelVideoSelector:this.mouseOver}),this.on("mouseout",{snapReelVideoSelector:this.mouseOut}),this.on("mousemove",{snapReelVideoSelector:this.mouseMove})})}}).call(e,i(10))},830:function(t,e,i){"use strict";function s(){this.deleteMediaTag=function(t,e){var i=function(t){this.trigger("dataMediaTagRemoveSuccess",t)},s=function(t,i,s){this.trigger("dataMediaTagRemoveFailure",{id:e.id,status:i,errorThrown:s})},n={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiDidRemoveMediaTag",this.deleteMediaTag)})}var n=i(111),r=i(240),a=n(s,r);t.exports=a},831:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({newItemsBarSelector:".js-new-tweets-bar",containerSelector:".stream-container",newTweetsBarVisibleClass:"new-tweets-bar-visible",scrollTopOnNewItemsClick:!0}),this.updateNewItemsBar=function(t,i){if(t.target.contains(this.node)){var s=e(i.html),n=this.select("newItemsBarSelector");n.length?(n.replaceWith(s),this.trigger("uiNewItemsBarUpdated")):(this.$node.html(s),this.$node.hide(),this.showNewItemsBar(),this.trigger("uiNewItemsBarShown")),this.trigger("uiNewItemsBarVisible")}},this.showNewItemsBar=function(){var t=this.$node.parent(),i=r.getCanvasYOffset(t),s=e(window).scrollTop();this.$node.addClass(this.attr.newTweetsBarVisibleClass),s>i?(this.$node.show(),e("html, body").scrollTop(s+this.$node.height())):this.$node.slideDown()},this.hideNewItemsBar=function(){this.trigger("uiNewItemsBarHidden");var t=this.select("newItemsBarSelector");t.remove(),this.$node.removeClass(this.attr.newTweetsBarVisibleClass)},this.handleNewItemsBarClick=function(t,i){var s=e(t.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrollTopOnNewItemsClick&&a(0,"fast"),this.trigger("uiInjectNewItems",{fromClick:!0});var n=e(t.target).attr("data-item-count"),r={unreadCount:Number(n)};if(s)try{r.items=[JSON.parse(s)]}catch(t){}this.trigger("uiNewItemsBarClick",r)},this.after("initialize",function(){this.on(document,"uiUpdateNewItemsBar",this.updateNewItemsBar),this.on(document,"uiHideNewItemsBar",this.hideNewItemsBar),this.on("click",{newItemsBarSelector:this.handleNewItemsBarClick})})}var n=i(111),r=i(178),a=i(832);t.exports=n(s)}).call(e,i(10))},848:function(t,e,i){"use strict";function s(t){this.defaultAttrs({itemType:"tweet"}),this.scribeActivityCount=function(t,e,i){var s={component:this.attr.itemType,element:t,action:"click"};this.scribe(s,this.interactionData(e))},this.after("initialize",function(){this.on("uiRequestReplyActivity",this.scribeActivityCount.bind(this,"reply_count")),this.on("uiRequestRetweetedActivity",this.scribeActivityCount.bind(this,"retweet_count")),this.on("uiRequestFavoritedActivity",this.scribeActivityCount.bind(this,"favorite_count"))})}var n=i(111),r=i(138),a=i(141),o=n(s,r,a);t.exports=o},849:function(t,e,i){"use strict";function s(){this.getTweetTranslation=function(t,e){var i=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(t.target,"dataTweetTranslationSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationError",{id:e.id,status:s,errorThrown:n})},n={id:e.tweetId,dest:e.dest};this.get({url:"/i/translations/show.json",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.submitTweetTranslation=function(t,e){var i=function(e){this.trigger(t.target,"dataTweetTranslationSuggestionSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationSuggestionError",{id:e.id,status:s,errorThrown:n})};this.post({url:"/i/translations/suggest.json",data:e,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiNeedsTweetTranslation",this.getTweetTranslation),this.on("uiSuggestTweetTranslation",this.submitTweetTranslation)})}var n=i(111),r=i(240),a=n(s,r);t.exports=a},850:function(t,e,i){"use strict";function s(){}var n=i(111),r=i(851),a=i(443);t.exports=n(s,a,r)},851:function(t,e,i){(function(e){"use strict";function i(){this.getItemPosition=function(t){return e(this.attr.genericInteractionItemSelector).index(t.closest(this.attr.genericInteractionItemSelector))}}t.exports=i}).call(e,i(10))},852:function(t,e,i){"use strict";function s(){this.scribeTweetPivotClick=function(t,e){this.scribe({component:"tweet",element:"more",action:"click"},{items:[e.item_details,e.component_details]})},this.after("initialize",function(){this.on("uiTweetPivotClick",this.scribeTweetPivotClick)})}var n=i(111),r=i(142),a=n(s,r);t.exports=a},855:function(t,e,i){"use strict";var s=i(856),n=i(863),r=i(864),a=i(868),o=i(441),c=i(476),h=i(440),l=i(866),d=i(869),u=i(870),m=i(871),p=s.mixin(n,r,a,o,c,h,l,d,u,m);t.exports=p},864:function(t,e,i){(function(e){"use strict";function s(){this.injectNewItems=function(t,e){if(!(this.latentItems.length<1)){e&&e.wasPeriodPress&&this.trigger("uiUserPressedPeriodAndSawNewTweets"),e&&e.wasPushStateInjection&&this.trigger("uiUserPushStateInjectedTweets"),e&&e.wasTopBarBirdClick&&this.trigger("uiUserClickedTopBarBirdAndSawNewTweets"),e&&e.wasComposedTweet&&this.trigger("uiUserComposedTweet"),this.trigger("uiHideNewItemsBar");var i=this.injectItems("prepend",this.latentItems.join(""),"uiHasInjectedNewTimeline",e);return this.resetLatentItems(),i}},r.mixin(this,[a,o]),this.defaultAttrs({streamItemSelector:".js-stream-item:not(.js-stream-item .js-stream-item)",refreshOnReturn:!0}),this.getNewItems=function(t,e){var i=Object.keys(this.composedThenInjectedTweetIds);this.trigger("uiWantsMoreTimelineItems",n.merge({include_new_items_bar:!(e&&e.injectImmediately),latent_count:this.latentCount,composed_count:i.length,composed_ids:i},this.getNewItemsData(),this.getNewItemsCountData&&this.getNewItemsCountData(),e));
},this.notifyNewItems=function(t){if(t.items_html&&t.items_html.trim()){var e=t.sourceEventData||{};if(this.resetStateVariables(t),t.items_html){if(this.latentItems=this.htmlToItemArray(t.items_html).concat(this.latentItems),this.latentCount=t.new_latent_count,t.new_tweets_bar_html){var i=t.new_tweets_bar_html;this.autoplay?this.autoplayNewItems(t.new_tweets_bar_html):e.injectImmediately||(this.trigger("uiUpdateNewItemsBar",{html:i}),this.trigger("uiAddPageCount",{count:this.latentCount}))}(e.injectImmediately||e.timeline_empty)&&this.trigger("uiInjectNewItems"),e.scrollToTop&&this.scrollToTop(),e.selectTopTweet&&this.trigger("uiSelectTopTweet")}}},this.htmlToItemArray=function(t){var i=e("<div>").html(t).find(this.attr.streamItemSelector).toArray();return i.map(function(t){return e("<div>").append(t).html()})},this.saveLatentItems=function(t,e){var i=this.select("containerSelector");i.attr("data-latent-items",this.latentItems.join("")),i.attr("data-latent-count",this.latentCount)},this.resetLatentItems=function(){var t=this.select("containerSelector"),e=t.attr("data-latent-items");t.removeAttr("data-latent-items"),this.latentItems=this.htmlToItemArray(e),this.latentCount=parseInt(t.attr("data-latent-count"),10)||0,t.removeAttr("data-latent-count")},this.refreshOnNavigate=function(t,e){e.fromCache&&this.attr.refreshOnReturn&&this.trigger("uiTimelineShouldRefresh",{navigated:!0})},this.refreshAndSelectTopTweet=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,selectTopTweet:!0})},this.injectComposedTweet=function(t,i){if(!i.in_reply_to_status_id&&i.tweet_html){this.injectNewItems();var s=e(i.tweet_html).filter(this.attr.streamItemSelector).first().attr("data-item-id");this.$node.find(".original-tweet[data-tweet-id='"+s+"']:first").length||(this.latentItems=this.htmlToItemArray(i.tweet_html),this.injectNewItems(null,{wasComposedTweet:"dataTweetSuccess"===t.type}),this.composedThenInjectedTweetIds[i.tweet_id]=window.location.href)}},this.refreshAndInjectImmediately=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,selectTopTweet:1===this.$selected.length})},this.resetCacheOfComposedInjectedTweets=function(t,e){this.composedThenInjectedTweetIds=c={}},this.addPageCount=function(t,e){this.latentCount&&this.trigger("uiAddPageCount",{count:this.latentCount})},this.after("initialize",function(){this.latentItems=[],this.latentCount=0,this.composedThenInjectedTweetIds=c,this.resetLatentItems(),this.injectNewItems(null,{wasPushStateInjection:!0}),this.on("uiInjectNewItems",this.injectNewItems),this.on(document,"uiTimelineShouldRefresh",this.getNewItems),this.on(document,"uiBeforePageChanged",this.saveLatentItems),this.on(document,"uiPageChanged",this.refreshOnNavigate),this.on(document,"uiGotoTopOfScreen",this.refreshAndInjectImmediately),this.on(document,"uiShortcutGotoTopOfScreen",this.refreshAndSelectTopTweet),this.on(document,"dataPageMutated",this.resetCacheOfComposedInjectedTweets),this.on(document,"uiPageNeedsCount",this.addPageCount),this.attr.injectComposedTweets&&this.on(document,"dataTweetSuccess",this.injectComposedTweet)})}var n=i(126),r=i(121),a=i(865),o=i(867),c={};t.exports=s}).call(e,i(10))},865:function(t,e,i){(function(e){"use strict";function s(){n.mixin(this,[r]);var t=700;this.defaultAttrs({streamItemsSelector:".stream-items",socialProofSelector:".tweet-stats-container"}),this.autoplayNewItems=function(t){if(t){var e=this.$window.scrollTop(),i=e+this.$window.height(),s=this.$promotedItem.length&&this.$promotedItem.offset().top>i,n=this.injectNewItems({},{autoplay:!0}),r=this.select("streamItemsSelector");this.travelingPTw&&s&&this.repositionPromotedItem(function(t){n.first().before(t),n=n.add(t),this.trigger(t,"uiShouldFixMargins")});var a=n.first().offset().top,o=a>e&&a<i,c=r.offset().top,h=n.last().next().offset().top-c+1;o?(r.css("marginTop",-h),this.animateBlockOfItems()):this.setScrollerScrollTop(e+h)}},this.animateBlockOfItems=function(){var e=this.select("streamItemsSelector"),i=this.$window.scrollTop(),s=parseFloat(e.css("marginTop"));e.parent().css("overflow","hidden"),e.animate({marginTop:0},{duration:t+Math.abs(s),step:function(t){this.lockedTimelineScroll&&this.setScrollerScrollTop(i+Math.abs(s-Math.ceil(t)))}.bind(this),complete:function(){e.parent().css("overflow","inherit"),this.afterAnimationQueue.forEach(function(t){t.call(this)},this),this.afterAnimationQueue=[]}.bind(this)})},this.setScrollerScrollTop=function(t){var i=this.attr.overflowScroll?this.$node:e(window);i.scrollTop(t)},this.enableAutoplay=function(){this.autoplay=!0,this.travelingPTw=this.attr.travelingPTw,this.lockedTimelineScroll=!1,this.afterAnimationQueue=[],this.newItemsXLine=0,this.$window=this.attr.overflowScroll?this.$node:e(window),this.on("mouseover",function(){this.lockedTimelineScroll=!0}),this.on("mouseleave",function(){this.lockedTimelineScroll=!1})},this.after("initialize",function(){this.attr.autoplay&&this.enableAutoplay()})}var n=i(121),r=i(866);t.exports=s}).call(e,i(10))},866:function(t,e){"use strict";function i(){this.repositionPromotedItem=function(t){t.call(this,this.$promotedItem.detach())},this.after("initialize",function(){this.$promotedItem=this.$node.find(".promoted-tweet").first().closest(".stream-item")})}t.exports=i},867:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({pollingWatchNode:e(window),pollingEnabled:!0}),this.pausePolling=function(){this.pollingTimer.pause(),this.pollingPaused=!0},this.resetPolling=function(){this.backoffEmptyResponseCount=0,this.pollingPaused=!1},this.pollForNewItems=function(t,e){this.trigger("uiTimelineShouldRefresh",{injectImmediately:!1,interval:this.pollingTimer.interval,fromPolling:!0})},this.onGotMoreTimelineItems=function(t,e){if(this.attr.pollingOptions&&this.attr.pollingOptions.pauseAfterBackoff&&e&&e.sourceEventData){if(e.focused_refresh_interval){var i=this.attr.pollingOptions.blurredInterval/this.attr.pollingOptions.focusedInterval;this.pollingTimer.clear(),this.attr.pollingOptions.focusedInterval=e.focused_refresh_interval,this.attr.pollingOptions.blurredInterval=e.focused_refresh_interval*i,this.pollingTimer=n("uiTimelinePollForNewItems",this.attr.pollingWatchNode,this.attr.pollingOptions)}var s=e.sourceEventData;s.fromPolling&&(this.isNewItem(e)||s.interval<this.attr.pollingOptions.blurredInterval?this.resetPolling():++this.backoffEmptyResponseCount>=this.attr.pollingOptions.backoffEmptyResponseLimit&&this.pausePolling())}},this.getNewItemsCountData=function(t){if(this.pollingPaused&&this.attr.pollingOptions)return this.resetPolling(),{count:this.attr.pollingOptions.resumeItemCount}},this.possiblyRefreshBeforeInject=function(t,e,i){return this.pollingPaused&&i&&i.fromClick&&this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0}),t(e,i)},this.around("injectNewItems",this.possiblyRefreshBeforeInject),this.before("teardown",function(){this.pollingTimer&&this.pollingTimer.clear()}),this.after("initialize",function(){this.attr.pollingEnabled&&(this.on(document,"uiTimelinePollForNewItems",this.pollForNewItems),this.on(document,"dataGotMoreTimelineItems",this.onGotMoreTimelineItems),this.pollingTimer=n("uiTimelinePollForNewItems",this.attr.pollingWatchNode,this.attr.pollingOptions),this.resetPolling())})}var n=i(516);t.exports=s}).call(e,i(10))},868:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({viewAllSelector:"button.view-all-supplements",interactionsPageViewAllToggleSelector:".stream-item-activity-notification button.view-all-supplements",additionalStreamItemsSelector:".sub-stream-item-showing, .sub-stream-item-hidden"}),this.toggleInteractionsSupplements=function(t,i){var s=e(i.el),n=s.hasClass("show");this.toggleSupplementTrigger(s,n),this.toggleSubStreamItemsVisibility(s.parent(),n)},this.toggleSupplementTrigger=function(t,e){t.toggleClass("hide",e).toggleClass("show",!e)},this.toggleSubStreamItemsVisibility=function(t,e){t.find(this.attr.additionalStreamItemsSelector).toggleClass("sub-stream-item-hidden",!e).toggleClass("sub-stream-item-showing",e)},this.after("initialize",function(){this.on("click",{interactionsPageViewAllToggleSelector:this.toggleInteractionsSupplements})})}t.exports=i}).call(e,i(10))},869:function(t,e){"use strict";function i(){this.defaultAttrs({pinnedStreamItemSelector:"li.js-pinned"}),this.keepPinnedStreamItemsOnTop=function(){this.$pinnedStreamItems.length&&(this.$pinnedStreamItems.first().css("margin-top","0"),this.$items.prepend(this.$pinnedStreamItems.detach()))},this.after("initialize",function(){this.$items=this.select("itemsSelector"),this.$pinnedStreamItems=this.select("pinnedStreamItemSelector"),this.on("uiHasInjectedNewTimeline",this.keepPinnedStreamItemsOnTop)})}t.exports=i},870:function(t,e,i){(function(e){"use strict";t.exports=function(){this.defaultAttrs({adaptivePhotoContainer:".js-adaptive-photo",adaptiveMediaContainer:".AdaptiveMedia"}),this.getPermalinkPath=function(t){return t.closest(this.attr.streamItemSelector).find(this.attr.permalinkSelector).attr("href")},this.openAdaptiveMediaGallery=function(t,i){t.preventDefault(),t.stopPropagation();var s=e(t.target).closest(this.attr.adaptivePhotoContainer);this.trigger(t.target,"uiOpenGallery",{timelineSelector:this.attr.adaptiveMediaContainer,inOverlay:this.attr.inOverlay});var n=s.closest("[data-impression-id]");n.length&&(n.attr("data-embedded-media-logged",!0),this.trigger("uiEmbeddedMedia",{impressionId:n.data("impression-id"),disclosureType:n.data("disclosure-type")})),i&&i.skipClickScribe||this.trigger("uiMediaThumbnailClick",{url:s.attr("data-image-url"),mediaType:"photo"})},this.openSelectedTweetAdaptiveMediaGallery=function(t){this.trigger(e(t.target).find(this.attr.adaptivePhotoContainer),"uiKeyboardOpenAdaptiveGallery",{skipClickScribe:!0})},this.after("initialize",function(){this.on(document,"uiOpenSelectedPhoto",this.openSelectedTweetAdaptiveMediaGallery),this.on("click uiKeyboardOpenAdaptiveGallery",{adaptivePhotoContainer:this.openAdaptiveMediaGallery})})}}).call(e,i(10))},871:function(t,e){"use strict";function i(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,s=e.newState;"following"===s?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===s?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===s&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}t.exports=i},875:function(t,e,i){"use strict";var s=i(784),n=i(876);t.exports=s.mixin(n)},876:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({selectedStreamItemSelector:".selected-stream-item",ownTweetSelector:".my-tweet"}),this.isSelected=function(t,i,s){var n=this.select("selectedStreamItemSelector"),r=n[0],a=t.target;return n.is(a)||!(!r||!e.contains(r,a))},this.getSelectedTweet=function(t,e,i){var s=this.select("selectedStreamItemSelector").find(this.attr.tweetItemSelector),n=!!s.length;return n&&(i.$tweet=s),n},this.after("initialize",function(){if(this.attr.loggedIn){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard),e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on("uiShortcutFavorite",this.composeHandler(this.isSelected,this.getSelectedTweet,t,this.toggleFavorite)),this.on("uiShortcutRetweet",this.composeHandler(this.isSelected,this.getSelectedTweet,t,this.toggleRetweet)),this.on("uiShortcutReply",this.composeHandler(this.isSelected,this.getSelectedTweet,e,this.triggerTweetAction("uiReplyToTweet")))}})}t.exports=i}).call(e,i(10))},878:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"}),this.updateTweetStats=function(t,e){e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.statElementSelectorFor(t.name));this.updateAria(i,t.count,t.title),this.updatePresentation(i,t.count,t.compact_count)}.bind(this))},this.initializeTweetStats=function(t,i){var s=this.findUninitializedTweetOrRetweet();s.each(function(t,i){this.renderTweetStats(e(i))}.bind(this))},this.renderTweetStats=function(t){t.attr("data-tweet-stat-initialized","true"),["favorite","retweet","reply"].forEach(function(e){var i=e,s=t.find(this.statElementSelectorFor(i)),n=s&&s.attr("data-tweet-stat-count");if(void 0!==n){var o=a.compactOrCommaize(n,r.language);this.updatePresentation(s,n,o)}}.bind(this))},this.updatePresentation=function(t,e,i){var s=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),s.empty()):(t.removeClass(this.attr.zeroCountClass),s.text(i))},this.updateAria=function(t,e,i){var s=t.find(this.attr.actionCountForAriaSelector);s.text(i),e<=0?(t.attr("aria-hidden","true"),s.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),s.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([data-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){var e={favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector};return e[t]},this.after("initialize",function(){this.on("uiSwiftLoaded uiPageChanged uiNeedUpdateInjectedTweetStats",this.initializeTweetStats),this.on("dataGotTweetStats",this.updateTweetStats)})}var n=i(111),r=i(846),a=i(835),o=i(879);t.exports=n(s,o)}).call(e,i(10))},879:function(t,e){"use strict";function i(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){t.target===document&&e.stats&&e.stats.forEach(function(t){var e=this.findTweetOrRetweet(t.status_id),i=e.find(this.socialProofStatElementSelectorFor(t.name));this.updateSocialProofStat(i,t)}.bind(this))},this.socialProofStatElementSelectorFor=function(t){var e={retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector};return e[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}t.exports=i},926:function(t,e,i){"use strict";function s(){var t=/:[A-Z0-9_-]+$/i;this.scribeMediaThumbnailResults=function(e,i){var s=i.thumbnails.length,n=s?"results":"no_results",r={};s&&(r.items=i.thumbnails.map(function(e){return{name:e.replace(t,"")}})),this.scribe({action:n},i,r)},this.scribeMediaThumbnailClick=function(e,i){var s={url:i.url&&i.url.replace(t,"")},n={element:i.mediaType,action:"click"};this.scribe(n,i,s)},this.after("initialize",function(){this.on(document,"uiMediaGalleryResults",this.scribeMediaThumbnailResults),this.on(document,"uiMediaThumbnailsVisible",this.scribeMediaThumbnailResults),this.on(document,"uiMediaThumbnailClick",this.scribeMediaThumbnailClick)})}var n=i(111),r=i(142);t.exports=n(s,r)},942:function(t,e,i){(function(e){"use strict";function i(){this.defaultAttrs({streamUserSelector:".stream-items .js-actionable-user"}),this.oldUsersDisplayed=function(t,e){var i=e.items||[],s=i.map(function(t){return{id:t.userId,impressionId:t.impressionId}});this.trigger("uiUsersDisplayed",{users:s})},this.usersDisplayed=function(){var t=this.select("streamUserSelector"),i=[];t.each(function(t,s){var n=e(s);i.push({id:n.attr("data-user-id"),impressionId:n.attr("data-impression-id")})}),this.trigger("uiUsersDisplayed",{users:i})},this.after("initialize",function(){this.usersDisplayed(),this.on("uiHasInjectedOldTimelineItems",this.oldUsersDisplayed)})}t.exports=i}).call(e,i(10))},943:function(t,e,i){(function(e){"use strict";function i(){this.aroundGetOldItemsData=function(t){var i=t();return this.attr.useExcludedIdsPagination&&(i.excluded=this.select("excludedUserSelector").map(function(){return e(this).attr("data-user-id")}).toArray().join(","),i.cursor=void 0),i},this.after("initialize",function(){this.around("getOldItemsData",this.aroundGetOldItemsData)})}t.exports=i}).call(e,i(10))},991:function(t,e,i){(function(e){"use strict";function s(){this.viewportHelpers=o,this.defaultAttrs({tweetSelector:".tweet",cursorSelector:".ThreadedConversation-showMoreThreads",itemType:"tweet",checkVisibilityInterval:500}),this.checkTweetVisibility=function(){var t=this,i=this.allVisibleTweets(),s=i.map(function(t){return this.interactionDataWithCard(t)},this),n=this.select("cursorSelector").filter(function(i,s){o.isWithinBounds(t.$window,e(s))}).toArray().map(function(t){return{type:e(t).data("cursor-type-name"),cursor:e(t).find("[data-cursor]").data("cursor")}});this.trigger("uiTweetsVisible",{tweetData:s,cursorData:n})},this.allVisibleTweets=function(){var t=this.select("tweetSelector"),e=this.findVisibleTweet(t);if(e===-1)return[];for(var i=[],s=e;t[s]&&o.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s--;for(i.reverse(),s=e+1;t[s]&&o.isWithinBounds(this.$window,t.eq(s));)i.push(t[s]),s++;return i},this.findVisibleTweet=function(t){var e=o.getContainerRect(this.$window);return this.findVisibleTweetRecursive(t.length,0,t,0,e)},this.findVisibleTweetRecursive=function(t,e,i,s,n){var r=Math.floor((t-e)/2+e);return r===e||s>100?-1:o.isAboveViewport(this.$window,i.eq(r),0,n)?this.findVisibleTweetRecursive(t,r,i,s+1,n):o.isBelowViewport(this.$window,i.eq(r),0,n)?this.findVisibleTweetRecursive(r,e,i,s+1,n):r},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.$window=e(window),this.pollingInterval=a.setIntervalEvent("uiCheckTweetVisibility",this.attr.checkVisibilityInterval),this.on(document,"uiCheckTweetVisibility",this.checkTweetVisibility)})}var n=i(111),r=i(138),a=i(110),o=i(177);t.exports=n(s,r)}).call(e,i(10))},992:function(t,e,i){"use strict";function s(){this.defaultAttrs({scribeInterval:6e4,page:void 0}),this.getTime=function(){return Date.now()},this.handleTweetsVisible=function(t,e){this.recordVisibleTweets(e.tweetData),e.cursorData&&this.recordVisibleCursors(e.cursorData)},this.recordVisibleCursors=function(t){var e=this,i={};t.forEach(function(t){e.visibleCursors[t.cursor]&&(e.previouslyVisibleCursors[t.cursor]=t.type),i[t.cursor]=t.type}),this.visibleCursors=i},this.recordVisibleTweets=function(t){var e={},i=this.getTime();t.forEach(function(t){this.visibleTweets[t.tweetId]?e[t.tweetId]=r.merge(this.visibleTweets[t.tweetId],{visibility_end:i}):e[t.tweetId]=r.merge(t,{visibility_start:i,visibility_end:i})},this),this.visibleTweetKeys().forEach(function(t){var i=this.visibleTweets[t],s=!e[t],n=i.visibility_start!==i.visibility_end;s&&n&&this.previouslyVisibleTweets.push(this.visibleTweets[t])},this),this.visibleTweets=e},this.flushVisibleTweets=function(t,e){var i=this.getTime();this.visibleTweetKeys().forEach(function(t){this.visibleTweets[t].visibility_end=i},this),this.recordVisibleTweets([]),this.scribeVisibilityResults()},this.onScribeVisibilityResults=function(t,e){e.page===this.attr.page&&(this.scribeVisibilityResults(),this.scribeCursorVisibilityResults())},this.scribeCursorVisibilityResults=function(){var t=this;if(Object.keys(this.previouslyVisibleCursors).length){var e={component:"tweet",element:"cursor",action:"impression"};Object.keys(this.previouslyVisibleCursors).forEach(function(i){t.previouslyScribedCursors[i]||(t.scribe(e,{event_info:t.previouslyVisibleCursors[i]}),t.previouslyScribedCursors[i]=!0)}),this.previouslyVisibleCursors={}}},this.scribeVisibilityResults=function(){if(this.previouslyVisibleTweets.length){var t={component:"stream",element:"linger",action:"results"},e={items:this.previouslyVisibleTweets.map(function(t){return this.interactionItem(t)},this)};this.previouslyVisibleTweets=[],this.scribe(t,e)}},this.visibleTweetKeys=function(){return Object.keys(this.visibleTweets).filter(function(t){return this.visibleTweets.propertyIsEnumerable(t)},this)},this.before("teardown",function(){this.pollingInterval.clear()}),this.after("initialize",function(){this.visibleTweets={},this.previouslyVisibleTweets=[],this.visibleCursors={},this.previouslyVisibleCursors={},this.previouslyScribedCursors={},this.pollingInterval=c.setIntervalEvent("uiScribeVisibilityResults",this.attr.scribeInterval,{page:this.attr.page}),this.on(document,"uiScribeVisibilityResults",this.onScribeVisibilityResults),this.on(document,"uiBeforePageChanged uiTeardown",this.flushVisibleTweets),this.on("uiTweetsVisible",this.handleTweetsVisible)})}var n=i(111),r=i(126),a=i(142),o=i(141),c=i(110);t.exports=n(s,a,o)},1012:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({promotedTweetStoreCookieName:"h"}),this.cookie=n,this.promotedTweetDismissed=function(t,e){e.impressionId&&this.removeFromPromotedTweetStoreCookie(e)},this.removePromotedTweetsFromBlockedUser=function(t,i){var s=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet.promoted-tweet"),n=this;e.each(s,function(t,i){var s=e(i).attr("data-tweet-id");s&&n.removeFromPromotedTweetStoreCookie({id:s})})},this.removeFromPromotedTweetStoreCookie=function(t){var i=void 0;try{i=JSON.parse(n(this.attr.promotedTweetStoreCookieName))}catch(s){i=[]}e.isArray(i)||(i=[i]),i=i.filter(function(e){return e&&e.tweet_id&&e.tweet_id!==t.id}),i=0===i.length?null:JSON.stringify(i),n(this.attr.promotedTweetStoreCookieName,i)},this.after("initialize",function(){this.on("uiTweetDismissed",this.promotedTweetDismissed),this.on(document,"jsClearReinjectionCookiesForUser",this.removePromotedTweetsFromBlockedUser)})}var n=i(154);t.exports=s}).call(e,i(10))},1014:function(t,e){"use strict";function i(){this.defaultAttrs({dismissTweetSelector:".tweet .js-action-dismiss"}),this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{dismissTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDismissTweet"))})})}t.exports=i},1067:function(t,e,i){"use strict";var s=i(1068),n=i(1069),r=i(1070),a=i(1071),o=i(1072),c=i(1073);t.exports=function(t){a.attachTo(document),s.attachTo(document,{src:t.src,trendsCacheKey:t.trendsCacheKey,trendsModuleEndpoint:t.trendsEndpoint,show_context:t.show_context,profileUserId:t.profile_id,query:t.query}),o.attachTo(".module.trends",{loggedIn:t.loggedIn,displaySource:t.src,eventData:{scribeContext:{component:"trends"}}}),n.attachTo(document),r.attachTo(document),c.attachTo("#trends_dialog",{typeaheadData:t.typeaheadData,eventData:{scribeContext:{component:"trends_location_dialog"}}})}},1068:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({src:"module",$backoffNode:e(window),trendsModuleEndpoint:"/i/trends",trendsCacheKey:null,show_context:!0,trendsPollingOptions:{focusedInterval:3e5,blurredInterval:12e5,eventData:{source:"clock"}}}),this.makeTrendsRequest=function(t){var e=t.woeid,i=t.source,s=function(t){t.source=i,this.trigger("dataTrendsRefreshed",t)};this.get({url:this.attr.trendsModuleEndpoint,eventData:t,data:{k:this.currentCacheKey,woeid:e,pc:!0,personalized:t.personalized,src:this.attr.src,show_context:this.attr.show_context,profileUserId:this.attr.profileUserId,query:this.attr.query},success:s.bind(this),error:"dataTrendsRefreshedError"})},this.makeTrendsDialogRequest=function(t,e){var i={woeid:t.woeid,personalized:t.personalized,pc:!0},s=function(t){this.trigger("dataGotTrendsDialog",t),this.currentWoeid&&this.currentWoeid!==t.woeid&&this.trigger("dataTrendsLocationChanged"),this.currentWoeid=t.woeid,t.trends_cache_key&&(this.currentCacheKey=t.trends_cache_key,this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)},n=e?this.post:this.get;n.call(this,{url:"/trends/dialog",eventData:t,data:i,success:s.bind(this),error:"dataGotTrendsDialogError"})},this.changeTrendsLocation=function(t,e){this.makeTrendsDialogRequest(e,!0)},this.refreshTrends=function(t,e){e=e||{},this.makeTrendsRequest(e)},this.getTrendsDialog=function(t,e){e=e||{},this.makeTrendsDialogRequest(e)},this.updateTrendsCacheKey=function(t,e){this.currentCacheKey=e.trendsCacheKey},this.after("initialize",function(){this.currentCacheKey=this.attr.trendsCacheKey,this.timer=r("uiRefreshTrends",this.attr.$backoffNode,this.attr.trendsPollingOptions),this.on("uiWantsTrendsDialog",this.getTrendsDialog),this.on("uiChangeTrendsLocation",this.changeTrendsLocation),this.on("uiRefreshTrends",this.refreshTrends),this.on("dataTempTrendsCacheKeyChanged",this.updateTrendsCacheKey)})}var n=i(111),r=i(516),a=i(240);t.exports=n(s,a)}).call(e,i(10))},1069:function(t,e,i){"use strict";function s(){this.getTrendsLocationDialog=function(t,e){var i=function(t){this.trigger("dataGotTrendsLocationDialog",t),t.trendLocations&&this.trigger("dataLoadedTrendLocations",{trendLocations:t.trendLocations})};this.get({url:"/trends/location_dialog",eventData:e,success:i.bind(this),error:"dataGotTrendsLocationDialogError"})},this.updateTrendsLocation=function(t,e){var i=e.location||{},s={woeid:i.woeid,personalized:e.personalized,pc:!0},n=function(t){this.trigger("dataChangedTrendLocation",{personalized:t.personalized,location:i}),t.trends_cache_key&&(this.trigger("dataTempTrendsCacheKeyChanged",{trendsCacheKey:t.trends_cache_key}),this.trigger("dataPageMutated")),t.update_module_html&&this.trigger("uiRefreshTrends",t)};this.post({url:"/trends/dialog",eventData:e,data:s,success:n.bind(this),error:"dataGotTrendsLocationDialogError"})},this.after("initialize",function(){this.on("uiWantsTrendsLocationDialog",this.getTrendsLocationDialog),this.on("uiChangeLocation",this.updateTrendsLocation)})}var n=i(111),r=i(240);t.exports=n(s,r)},1070:function(t,e,i){"use strict";function s(){this.defaultAttrs({storageName:"recent_trend_locations",storageKey:"locations",maxRecentLocations:5}),this.initializeStorage=function(){var t=r({withArray:!0,withMaxElements:!0});this.storage=new t(this.attr.storageName),this.storage.setMaxElements(this.attr.storageKey,this.attr.maxRecentLocations)},this.getRecentTrendLocations=function(){this.trigger("dataGotRecentTrendLocations",{trendLocations:this.storage.getArray(this.attr.storageKey)})},this.saveRecentLocation=function(t,e){var i=e.location||{};i.woeid&&!this.hasRecentLocation(i.woeid)&&(this.storage.push(this.attr.storageKey,i),this.getRecentTrendLocations())},this.hasRecentLocation=function(t){var e=this.storage.getArray(this.attr.storageKey);return e.some(function(e){return e.woeid===t})},this.after("initialize",function(){this.initializeStorage(),this.on("uiWantsRecentTrendLocations",this.getRecentTrendLocations),this.on("dataChangedTrendLocation",this.saveRecentLocation)})}var n=i(111),r=i(242),a=i(240);t.exports=n(s,a)},1071:function(t,e,i){"use strict";function s(){this.scribeTrendClick=function(t,e){this.scribe("search",e)},this.prepareScribeData=function(t){var e=t.initial?"initial":"newer",i={referring_event:e},s=!1;return i.items=t.items.map(function(t,e){var i={name:t.name,item_type:a.trend,item_query:t.name,position:e,token:t.token,id:t.id};return t.promotedTrendId&&(i.promoted_id=t.promotedTrendId,s=!0),i}),s&&(i.promoted=s),"clock"===t.source&&(i.event_initiator=o.clientSideApp),i},this.scribeTrendsResults=function(t,e){var i=this.prepareScribeData(e),s={element:i.referring_event,action:e.items&&e.items.length?"results":"no_results"};this.scribe(s,e,i),e.initial&&this.scribeTrendsImpression(e)},this.scribeTrendsImpression=function(t){this.scribe("impression",t)},this.after("initialize",function(){this.scribeOnEvent("uiTrendsDialogOpened","open"),this.on("uiTrendSelected",this.scribeTrendClick),this.on("uiTrendsDisplayed",this.scribeTrendsResults)})}var n=i(111),r=i(142),a=i(144),o=i(859);t.exports=n(s,r)},1072:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({changeLinkSelector:".change-trends",trendsInnerSelector:".trends-inner",trendItemSelector:".js-trend-item",trendLinkItemSelector:".js-trend-item a",itemType:"trend",displaySource:"module"}),this.openChangeTrendsDialog=function(t){this.trigger("uiShowTrendsLocationDialog"),t.preventDefault()},this.updateModuleContent=function(t,e){if(e.module_html){var i=this.$node.hasClass("hidden"),s=e.source;this.select("trendsInnerSelector").html(e.module_html),this.currentWoeid=e.woeid,this.$node.removeClass("hidden");var n=this.getTrendData(this.select("trendItemSelector"));this.trigger("uiTrendsDisplayed",{items:n,initial:i,source:s,scribeData:{woeid:this.currentWoeid}})}},this.trendSelected=function(t,i){var s=e(i.el).closest(this.attr.trendItemSelector),n=this.getTrendData(s)[0],a=s.index(),o={name:n.name,item_type:r.trend,item_query:n.name,position:a,token:n.token,id:n.id},c={position:a,query:n.name,url:s.find("a").attr("href"),woeid:this.currentWoeid};n.promotedTrendId&&(o.promoted_id=n.promotedTrendId,c.promoted=!0),c.items=[o],this.trigger("uiTrendSelected",{isPromoted:!!n.promotedTrendId,promotedTrendId:n.promotedTrendId,scribeContext:{element:"trend"},scribeData:c})},this.getTrendData=function(t){return t.map(function(){var t=e(this);return{name:t.attr("data-trend-name"),promotedTrendId:t.data("promoted-trend-id"),trendingEvent:t.hasClass("event-trend"),token:t.attr("data-trend-token"),id:t.attr("data-trends-id")}}).toArray()},this.after("initialize",function(){this.on(document,"dataTrendsRefreshed",this.updateModuleContent),this.on("click",{changeLinkSelector:this.openChangeTrendsDialog,trendLinkItemSelector:this.trendSelected}),this.trigger("uiRefreshTrends")})}var n=i(111),r=i(144),a=i(440);t.exports=n(s,a)}).call(e,i(10))},1073:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({contentSelector:"#trends_dialog_content",quickSelectSelector:"#trend-locations-quick-select",dropdownSelector:"#trend-locations-dropdown-select",personalizedSelector:".trends-personalized",nonPersonalizedSelector:".trends-by-location",changeTrendsSelector:".customize-by-location",showDropdownSelector:".js-show-dropdown-select",showQuickSelectSelector:".js-show-quick-select",searchSelector:".trends-search-locations",nearbySelector:".trends-nearby-locations",recentSelector:".trends-recent-locations",currentLocationSelector:".trends-current-location",loadingSelector:"#trend-locations-loading",defaultSelector:".select-default",doneSelector:".done",errorSelector:".trends-dialog-error p",errorClass:"has-error"}),this.openDialog=function(t,e){this.trigger("uiTrendsDialogOpened"),this.initialized?this.setCurrentView():(this.trigger("uiWantsTrendsLocationDialog"),this.initialized=!0),this.$node.removeClass("has-error"),
this.open()},this.setCurrentView=function(){this.attr.personalized?this.showPersonalizedView():this.showNonpersonalizedView(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showPersonalizedView=function(){this.select("nonPersonalizedSelector").hide(),this.select("personalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showNonpersonalizedView=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showQuickSelectContainer=function(t,e){this.showNonpersonalizedView(),this.select("dropdownSelector").hide(),this.select("quickSelectSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.showDropdownContainer=function(t,e){this.showNonpersonalizedView(),this.select("quickSelectSelector").hide(),this.select("dropdownSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideViews=function(){this.select("personalizedSelector").hide(),this.select("nonPersonalizedSelector").hide()},this.showError=function(t,e){this.hideViews(),this.hideLoading(),this.initialized=!1,this.$node.addClass(this.attr.errorClass),this.select("errorSelector").html(e.message),this.trigger(this.$dialog,"uiDialogContentChanged")},this.selectDefault=function(t,i){var s=e(t.target),n=!!s.data("personalized");n?this.setPersonalizedTrends():this.changeLocationInfo({name:s.data("name"),woeid:s.data("woeid")}),this.close()},this.reset=function(t,e){this.showQuickSelectContainer(),this.trigger("uiTrendsDialogReset")},this.initializeDialog=function(t,e){this.select("contentSelector").html(e.dialog_html),this.setLocationInfo(t,e),this.initializeComponents(),this.setCurrentView()},this.showLoading=function(){this.select("loadingSelector").show(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.hideLoading=function(){this.select("loadingSelector").hide()},this.initializeComponents=function(t,e){c.attachTo(this.attr.currentLocationSelector,{location:this.attr.location,personalized:this.attr.personalized}),o.attachTo(this.attr.searchSelector,{typeaheadData:this.attr.typeaheadData}),a.attachTo(this.attr.dropdownSelector),h.attachTo(this.attr.nearbySelector,{location:this.attr.location,personalized:this.attr.personalized}),l.attachTo(this.attr.recentSelector,{location:this.attr.location,personalized:this.attr.personalized})},this.after("initialize",function(){this.hideViews(),this.on("uiChangeLocation",this.showLoading),this.on("uiTrendsLocationSearchNoResults",this.showDropdownContainer),this.on(document,"uiShowTrendsLocationDialog",this.openDialog),this.on("uiDialogClosed",this.reset),this.on(document,"dataGotTrendsLocationDialog",this.initializeDialog),this.on(document,"dataGotTrendsLocationDialogError",this.showError),this.on("uiLocationInfoUpdated",this.hideLoading),this.on("click",{doneSelector:this.close,defaultSelector:this.selectDefault,changeTrendsSelector:this.showNonpersonalizedView,showDropdownSelector:this.showDropdownContainer,showQuickSelectSelector:this.showQuickSelectContainer})})}var n=i(111),r=i(163),a=i(1074),o=i(1076),c=i(1077),h=i(1078),l=i(1080),d=i(1075);t.exports=n(s,r,d)}).call(e,i(10))},1074:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({regionsSelector:'select[name="regions"]',citiesSelector:'select[name="cities"]'}),this.initializeCities=function(){this.citiesByRegionWoeid={};var t=this.$cities.find("option");t.each(function(t,i){var s=e(i),n=s.data("woeid");this.citiesByRegionWoeid[n]||(this.citiesByRegionWoeid[n]=[]),this.citiesByRegionWoeid[n].push(s)}.bind(this))},this.updateDropdown=function(){var t=this.$regions.val(),e=this.citiesByRegionWoeid[t]||"";this.$cities.empty(),this.$cities.html(e)},this.updateRegion=function(){this.updateDropdown();var t=this.$cities.children().first();t.length&&(t.prop("selected",!0),t.change())},this.updateCity=function(){var t=this.$cities.find("option:selected"),e=parseInt(t.val(),10),i=t.data("name");this.currentSelection=e,this.changeLocationInfo({woeid:e,name:i})},this.possiblyClearSelection=function(){this.currentSelection!==this.attr.location.woeid&&this.reset()},this.reset=function(){this.currentSelection=null;var t=this.$regions.find('option[value=""]');t.prop("selected",!0),this.updateDropdown()},this.after("initialize",function(){this.$regions=this.select("regionsSelector"),this.$cities=this.select("citiesSelector"),this.initializeCities(),this.on(this.$regions,"change",this.updateRegion),this.on(this.$cities,"change",this.updateCity),this.on(document,"uiTrendsDialogReset",this.reset),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.updateDropdown()})}var n=i(111),r=i(1075);t.exports=n(s,r)}).call(e,i(10))},1075:function(t,e){"use strict";function i(){this.defaultAttrs({location:{},personalized:!1}),this.setLocationInfo=function(t,e){this.attr.personalized=!!e.personalized,this.attr.location=e.location||{},this.trigger("uiLocationInfoUpdated")},this.changeLocationInfo=function(t){this.trigger("uiChangeLocation",{location:t})},this.setPersonalizedTrends=function(){this.trigger("uiChangeLocation",{personalized:!0})},this.after("initialize",function(){this.on(document,"dataChangedTrendLocation",this.setLocationInfo)})}t.exports=i},1076:function(t,e,i){"use strict";function s(){this.defaultAttrs({inputSelector:"input.trends-location-search-input"}),this.executeTypeaheadSelection=function(t,e){return e.item.woeid===-1?void this.trigger("uiTrendsLocationSearchNoResults"):(this.currentSelection=e.item,void this.changeLocationInfo({woeid:e.item.woeid,name:e.item.name}))},this.possiblyClearSelection=function(){this.currentSelection&&this.currentSelection.woeid!==this.attr.location.woeid&&this.reset()},this.reset=function(t,e){this.currentSelection=null,this.$input.val("")},this.after("initialize",function(){this.$input=this.select("inputSelector"),this.on("uiTypeaheadItemSelected uiTypeaheadItemComplete",this.executeTypeaheadSelection),this.on("uiLocationInfoUpdated",this.possiblyClearSelection),this.on(document,"uiTrendsDialogReset",this.reset),o.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),a.attachTo(this.$node,{inputSelector:this.attr.inputSelector,hideOnEmptyQuery:!0,blockLinkActions:!0,datasourceRenders:[["trendLocations",["trendLocations"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"trends_location_search"}}})})}var n=i(111),r=i(1075),a=i(313),o=i(328);t.exports=n(s,r)},1077:function(t,e,i){"use strict";function s(){this.defaultAttrs({personalizedSelector:".js-location-personalized",nonpersonalizedSelector:".js-location-nonpersonalized",currentLocationSelector:".current-location"}),this.updateView=function(){this.attr.personalized||this.select("currentLocationSelector").text(this.attr.location.name),this.select("nonpersonalizedSelector").toggle(!this.attr.personalized),this.select("personalizedSelector").toggle(!!this.attr.personalized)},this.after("initialize",function(){this.updateView(),this.on("uiLocationInfoUpdated",this.updateView)})}var n=i(111),r=i(1075);t.exports=n(s,r)},1078:function(t,e,i){"use strict";function s(){}var n=i(111),r=i(1079);t.exports=n(s,r)},1079:function(t,e,i){(function(e){"use strict";function s(){n.mixin(this,[r]),this.defaultAttrs({locationSelector:".trend-location-picker-item",selectedAttr:"selected"}),this.selectLocation=function(t,i){t.preventDefault();var s=e(i.el),n={woeid:s.data("woeid"),name:s.data("name")};this.changeLocationInfo(n),this.showSelected(n.woeid,!1)},this.showSelected=function(t,e){var i=this.select("locationSelector");i.removeClass(this.attr.selectedAttr),!e&&t&&i.filter('[data-woeid="'+t+'"]').addClass(this.attr.selectedAttr)},this.locationInfoUpdated=function(){this.showSelected(this.attr.location.woeid,this.attr.personalized)},this.after("initialize",function(){this.on("uiLocationInfoUpdated",this.locationInfoUpdated),this.on("click",{locationSelector:this.selectLocation}),this.showSelected(this.attr.location.woeid,this.attr.personalized)})}var n=i(121),r=i(1075);t.exports=s}).call(e,i(10))},1080:function(t,e,i){"use strict";function s(){this.defaultAttrs({listContainerSelector:".trend-location-picker"}),this.loadTrendLocations=function(t,e){var i=e.trendLocations;this.$list.empty(),i.forEach(function(t){var e=this.$template.clone(!1),i=e.find("button");i.text(t.name),i.attr("data-woeid",t.woeid),i.attr("data-name",t.name),this.$list.append(e)},this),this.$node.toggle(i.length>0)},this.after("initialize",function(){this.$list=this.select("listContainerSelector"),this.$template=this.$list.find("li:first").clone(!1),this.on(document,"dataGotRecentTrendLocations",this.loadTrendLocations),this.trigger("uiWantsRecentTrendLocations")})}var n=i(111),r=i(1079);t.exports=n(s,r)},1081:function(t,e,i){"use strict";var s=i(1082),n=i(1085),r=i(1086),a=i(1087),o=i(126);t.exports=function(t,e,i){var c=o.merge(e,i,{eventData:{scribeContext:{component:"user_recommendations"}}});a.attachTo(t,c),s.attachTo(t,c),n.attachTo(document,c),r.attachTo(t,c)}},1082:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({dashboardSelector:".dashboard-user-recommendations",recUserSelector:".js-actionable-user",dismissRecSelector:".js-action-dismiss",viewAllSelector:".js-view-all-link",findFriendsSelector:".js-find-friends-link"}),this.dismissRecommendation=function(t,i){if(!this.currentlyRefreshing){this.currentlyDismissing=!0;var s=e(t.target).closest(this.attr.recSelector),n=s.attr("data-user-id");this.trigger("uiDismissUserRecommendation",{recommended_user_id:n,impressionId:s.attr("data-impression-id"),excluded:[n],visible:this.getVisibleIds(s),token:s.attr("data-feedback-token"),dismissable:this.attr.wtfOptions.dismissable,refreshUserId:n}),this.animateContentOut(s,"animationCallback")}},this.handleDismissResponse=function(t,i){if(i=i||{},this.currentlyDismissing=!1,i.user_recommendations_html){var s=this.currentlyRefreshingUser(i),n=e(i.user_recommendations_html),r=n.attr("data-user-id");if(this.select("recSelector").is("[data-user-id="+r+"]"))return void s.find(this.attr.dismissRecSelector).click();var a=this.getItemPosition(s);this.animateContentIn(s,"animationCallback",i.user_recommendations_html,{modOp:"replaceWith",scribeCallback:function(){var t={oldUser:this.interactionData(s,{position:a})};n.length&&(t.newUser=this.interactionData(n,{position:a})),this.trigger("uiDidDismissUserRecommendation",t)}.bind(this)})}else this.handleEmptyDismissResponse(i)},this.handleDismissError=function(t,e){this.handleEmptyDismissResponse(e)},this.handleEmptyDismissResponse=function(t){var e=this.currentlyRefreshingUser(t);e&&e.remove(),this.select("recSelector").length||(this.trigger("uiShowMessage",{message:"You have no more recommendations today!"}),this.$node.remove())},this.enable=function(){this.disabled=!1,this.refreshRecommendations({type:"empty-timeline"}),this.$node.show()},this.initRecommendations=function(t,e){this.disabled?this.$node.hide():this.verifyInitialRecommendations(t,e)},this.reset=function(){this.currentlyRefreshing||this.currentlyDismissing?this.select("dashboardSelector").html(""):(this.select("dashboardSelector").css("opacity",1),this.select("recUserSelector").css("opacity",1))},this.expandWhoToFollow=function(t,e){this.currentlyExpanding=!0;var i=n.merge(this.attr.wtfOptions,{limit:3,visible:this.getVisibleIds(t),refreshUserId:e.userId,get_replacement:!0});this.trigger("uiGetUserRecommendations",i)},this.triggerLinkClickScribes=function(t){var i=this,s={import_link:this.attr.findFriendsSelector,view_all_link:this.attr.viewAllSelector,refresh_link:this.attr.refreshRecsSelector},n=e(t.target);e.each(s,function(t,e){n.is(e)&&i.trigger(document,"uiClickedWtfLink",{element:t})})},this.getNewRecommendations=function(t,e,i){var s=this.attr.wtfOptions.display_location;"wtf-component"===s&&!this.currentlyExpanding&&this.getVisibleIds(null,!0).length<=3?this.expandWhoToFollow(e,i):t(e,i)},this.after("initialize",function(){this.disabled=!!this.attr.wtfOptions&&this.attr.wtfOptions.disabled,this.on(document,"dataDidDismissRecommendation",this.handleDismissResponse),this.on(document,"dataFailedToDismissUserRecommendation",this.handleDismissError),this.on(document,"uiDidHideEmptyTimelineModule",this.enable),this.on(document,"uiSwiftLoaded uiPageChanged",this.initRecommendations),this.on(document,"uiBeforePageChanged",this.reset),this.on("click",{dismissRecSelector:this.dismissRecommendation,viewAllSelector:this.triggerLinkClickScribes,findFriendsSelector:this.triggerLinkClickScribes,refreshRecsSelector:this.triggerLinkClickScribes}),this.around("cycleRecommendation",function(t,e,i){this.getNewRecommendations(t,e,i)})})}var n=(i(123),i(126)),r=i(111),a=i(443),o=i(440),c=i(1083),h=i(1084);t.exports=r(s,a,o,c,h)}).call(e,i(10))},1083:function(t,e){"use strict";function i(){this.defaultAttrs({connectOtherSelector:".js-connect-other",otherServicesSelector:".other-services"}),this.toggleOtherServices=function(){var t=this.select("otherServicesSelector"),e=void 0;t.hasClass("hidden")?(t.removeClass("hidden"),e="open"):(t.addClass("hidden"),e="close"),this.trigger("uiWTFImportPromptToggle",{action:e})},this.after("initialize",function(){this.trigger("uiWTFImportPromptImpression"),this.on("click",{connectOtherSelector:this.toggleOtherServices})})}t.exports=i},1084:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({refreshAnimationDuration:200,cycleTimeout:1e3,experimentCycleTimeout:300,wtfOptions:{},selfPromotedAccountHtml:"",$accountPriorToPreview:null,successClass:"has-content",recListSelector:".js-recommended-followers",recSelector:".js-actionable-user",refreshRecsSelector:".js-refresh-suggestions",similarToContainerSelector:".js-expanded-similar-to",expandedContainerSelector:".js-expanded-container",itemType:"user"}),this.refreshRecommendations=function(t,e){if(!this.currentlyRefreshing){this.currentlyRefreshing=!0;var i=this.getVisibleIds(null,!0).length||this.attr.wtfOptions.limit;this.trigger("uiRefreshUserRecommendations",n.merge(this.attr.wtfOptions,{excluded:this.getVisibleIds(),limit:i,refreshType:t.type})),this.hideRecommendations()}},this.sendGetRecommendationEvent=function(t,e){this.trigger("uiGetUserRecommendations",n.merge(this.attr.wtfOptions,t||{}))},this.getUserRecommendations=function(t,e){this.sendGetRecommendationEvent(t,e),this.hideRecommendations()},this.hideRecommendations=function(){this.animateContentOut(this.select("recListSelector"),"animationCallback")},this.isNewUserDuplicate=function(t){return this.getVisibleIds().indexOf(t)!==-1},this.handleRecommendationsResponse=function(t,i){var s=this.getVisibleIds();if(!this.disabled){i=i||{},this.hasRecommendations()||(i=n.merge(i,{initialResults:!0}));var r=e.trim(i.user_recommendations_html);if(r){var a=this.currentlyRefreshingUser(i);if(this.$node.addClass(this.attr.successClass),this.shouldExpandWtf(i)){var o=e(r),c=o.filter(this.attr.recSelector).first(),h=o.filter(this.attr.expandedContainerSelector),l=h.find(".js-actionable-user").filter(function(){return s.indexOf(e(this).data("user-id")+"")===-1});h.empty(),l.each(function(){h.append(this)}),a&&!this.isNewUserDuplicate(c.data("user-id")+"")&&this.animateContentIn(a,"animationCallback",e("<div>").append(c).html(),{modOp:"replaceWith",scribeCallback:function(){this.currentlyExpanding?this.pendingScribe=!0:this.reportUsersDisplayed(i)}.bind(this)}),h.length&&this.animateExpansion(h,i)}else{if(this.isNewUserDuplicate(e(r).data("user-id")+""))return;var d=this.select("recListSelector"),u=void 0;a&&(d=a,u="replaceWith"),this.animateContentIn(d,"animationCallback",r,{modOp:u,scribeCallback:function(){this.reportUsersDisplayed(i)}.bind(this)})}}else this.handleEmptyRefreshResponse(t,i),this.trigger("uiGotEmptyRecommendationsResponse",i)}},this.handleRefreshError=function(t,e){this.handleEmptyRefreshResponse(t,e)},this.handleEmptyRefreshResponse=function(t,e){if(this.select("recSelector").length){if(this.currentlyExpanding){var i=this.currentlyRefreshingUser(e);if(e&&e.sourceEventData&&e.sourceEventData.clusterfollow&&i)return this.currentlyExpanding=!1,void this.replenishWhoToFollowDashboard(i)}var s=this.select("recListSelector"),n=this.currentlyRefreshingUser(e);n&&(s=n),this.animateContentIn(s,"animationCallback",s.html())}},this.getVisibleIds=function(t,i){var s=this.select("recSelector").not(t);return i||(s=s.not(".promoted-account")),s.map(function(){return e(this).attr("data-user-id")}).toArray()},this.originalItemCount=function(){return e(this.attr.recListSelector).children(this.attr.recSelector).length},this.doAfterFollowAction=function(t,e){if(!this.disabled&&"following"===e.newState){var i=this.expandBucket?this.attr.experimentCycleTimeout:this.attr.cycleTimeout;setTimeout(function(){if(!this.currentlyRefreshing){var t=this.select("recSelector").filter("[data-user-id='"+e.userId+"']");t.length&&this.cycleRecommendation(t,e)}}.bind(this),i)}},this.isInSimilarToSection=function(t){return!!t.closest(this.attr.similarToContainerSelector).length},this.cycleRecommendation=function(t,e){this.animateContentOut(t,"animationCallback");var i=n.merge(this.attr.wtfOptions,{limit:1,visible:this.getVisibleIds(t),refreshUserId:e.userId});this.isInSimilarToSection(t)&&(i.similar_to_user_id=this.select("similarToContainerSelector").attr("data-similar-to-user-id")),this.trigger("uiGetUserRecommendations",i)},this.animateExpansion=function(t,e){var i=this.select("recListSelector"),s=this.select("expandedContainerSelector"),n=function(){this.pendingScribe&&(this.reportUsersDisplayed(e),this.pendingScribe=!1),this.currentlyExpanding=!1};s.length?s.html(t.html()):i.append(t),t.is(":visible")?n.bind(this)():t.slideDown("slow",n.bind(this))},this.animateContentIn=function(t,e,i,s){if(t.length){s=s||{};var n=function(){t.is(this.attr.recListSelector)&&(this.currentlyRefreshing=!1),t[s.modOp||"html"](i).animate({opacity:1},this.attr.refreshAnimationDuration),s.scribeCallback&&s.scribeCallback()}.bind(this);t.is(":animated")?this[e]=n:n()}},this.animateContentOut=function(t,e){t.animate({opacity:0},{duration:this.attr.refreshAnimationDuration,complete:function(){this[e]&&this[e](),this[e]=null}.bind(this)})},this.getItemPosition=function(t){var e=this.originalItemCount();return this.isInSimilarToSection(t)?e+t.closest(this.attr.recSelector).index()-1:t.closest(this.attr.expandedContainerSelector).length?e+t.closest(this.attr.recSelector).index():t.closest(this.attr.recSelector).index()},this.currentlyRefreshingUser=function(t){return t&&t.sourceEventData&&t.sourceEventData.refreshUserId?this.select("recSelector").filter("[data-user-id="+t.sourceEventData.refreshUserId+"]"):null},this.shouldExpandWtf=function(t){return!!(t&&t.sourceEventData&&t.sourceEventData.get_replacement)},this.getUsersDisplayed=function(){var t=this.select("recSelector"),i=[];return t.each(function(t,s){var n=e(s);i.push({id:n.attr("data-user-id"),impressionId:n.attr("data-impression-id")})}),i},this.reportUsersDisplayed=function(t){var e=this.getUsersDisplayed();this.trigger("uiUsersDisplayed",{users:e}),this.trigger("uiDidGetRecommendations",t)},this.verifyInitialRecommendations=function(t,e){this.hasRecommendations()?this.reportUsersDisplayed({initialResults:!0}):this.sendGetRecommendationEvent({initialResults:!0})},this.hasRecommendations=function(){return this.select("recSelector").length>0},this.storeSelfPromotedAccount=function(t,e){e.html&&(this.selfPromotedAccountHtml=e.html)},this.replaceUser=function(t,e){t.tooltip("hide"),t.parent().hasClass("preview-wrapper")&&t.unwrap(),t.replaceWith(e)},this.replaceUserAnimation=function(t,i){t.tooltip("hide"),this.before("teardown",function(){this.replaceUser(t,i)});var s=e("<div/>",{"class":t.attr("class"),style:t.attr("style")}).addClass("preview-wrapper");t.wrap(s);var n=t.css("minHeight");t.css({minHeight:0}).slideUp(70,function(){i.attr("style",t.attr("style")),t.replaceWith(i),i.delay(350).slideDown(70,function(){i.css({minHeight:n}),i.unwrap(),setTimeout(function(){i.tooltip("show"),setTimeout(function(){i.tooltip("hide")},8e3)},500)})})},this.handlePreviewPromotedAccount=function(){if(!this.disabled&&this.selfPromotedAccountHtml){var t=e(this.selfPromotedAccountHtml),i=this.select("recSelector").first();this.attr.$accountPriorToPreview=i.clone(),this.replaceUserAnimation(i,t),t.find("a").on("click",function(t){t.preventDefault(),t.stopPropagation()})}},this.maybeRestoreAccountPriorToPreview=function(){var t=this.attr.$accountPriorToPreview;t&&(this.replaceUser(this.select("recSelector").first(),t),this.attr.$accountPriorToPreview=null)},this.after("initialize",function(){this.on(document,"dataDidGetUserRecommendations",this.handleRecommendationsResponse),this.on(document,"dataFailedToGetUserRecommendations",this.handleRefreshError),this.on(document,"dataFollowStateChange",this.doAfterFollowAction),this.on("click",{refreshRecsSelector:this.refreshRecommendations}),this.on(document,"dataDidGetSelfPromotedAccount",this.storeSelfPromotedAccount),this.on(document,"uiPromptbirdPreviewPromotedAccount",this.handlePreviewPromotedAccount),this.on(document,"uiPromptbirdDismissPrompt",this.maybeRestoreAccountPriorToPreview)})}var n=i(126);i(345),t.exports=s}).call(e,i(10))},1085:function(t,e,i){"use strict";function s(){this.attributes({maxExcludedRecsInLocalStorage:100,endpoints:{users:{url:"/i/users/recommendations",method:"GET",successEvent:"dataDidGetUserRecommendations",errorEvent:"dataFailedToGetUserRecommendations"},dismiss:{url:"/i/users/recommendations/hide",method:"POST",successEvent:"dataDidDismissRecommendation",errorEvent:"dataFailedToDismissUserRecommendation"},promoted_self:{url:"/i/users/promoted_self",method:"GET",successEvent:"dataDidGetSelfPromotedAccount",errorEvent:"dataFailedToGetSelfPromotedAccount"}},endpointUrlOverrides:{}}),this.refreshEndpoint=function(t){return this.hitEndpoint(t,{"Cache-Control":"max-age=0",Pragma:"no-cache"})},this.hitEndpoint=function(t,e){e=e||{};var i=this.attr.endpoints[t],s=this.attr.endpointUrlOverrides[t]||i.url;return function(t,n){n=n||{},n.excluded=n.excluded||[];var a=n.visible||[];delete n.visible,this.JSONRequest({type:i.method,url:s,headers:e,dataType:"json",data:r.merge(n,{excluded:this.storage.pushAll("excluded",n.excluded).concat(a).join(",")}),eventData:n,success:i.successEvent,error:i.errorEvent},i.method)}.bind(this)},this.excludeUsers=function(t,e){this.storage.pushAll("excluded",e.userIds),this.trigger("dataDidExcludeUserRecommendations",e)},this.excludeFollowed=function(t,e){e=e||{},"following"===e.newState&&e.userId&&this.storage.push("excluded",e.userId)},this.after("initialize",function(){var t=a({withArray:!0,withMaxElements:!0,withUniqueElements:!0});this.storage=new t("excluded_wtf_recs"),this.storage.setMaxElements("excluded",this.attr.maxExcludedRecsInLocalStorage),this.on(document,"uiRefreshUserRecommendations",this.refreshEndpoint("users")),this.on(document,"uiGetUserRecommendations",this.hitEndpoint("users")),this.on(document,"uiDismissUserRecommendation",this.hitEndpoint("dismiss")),this.on(document,"uiAddWtfBlacklistUsers",this.excludeUsers),this.on(document,"dataFollowStateChange",this.excludeFollowed),this.on(document,"uiPromptbirdWantsPromotedSelf",this.hitEndpoint("promoted_self"))})}var n=i(111),r=i(126),a=i(242),o=i(240),c=n(s,o);t.exports=c},1086:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({userSelector:".js-actionable-user",itemType:"user"}),this.scribeDismissRecommendation=function(t,e){this.scribeInteraction("dismiss",e.oldUser),e.newUser&&this.scribeInteraction({element:"replace",action:"results"},e.newUser,{referring_event:"replace"})},this.scribeRecommendationResults=function(t,i){var s=[];t.emptyResponse||this.$node.find(this.attr.userSelector).map(function(t,i){s.push(this.interactionData(e(i),{position:t}))}.bind(this));var n=t.emptyResponse?"no_results":"results";this.scribeInteractiveResults({element:i,action:n},s,t,{referring_event:i})},this.scribeRecommendations=function(t,e){var i=e.sourceEventData||{},s=e.initialResults||i.initialResults;s?(this.scribeRecommendationResults(e,"initial"),e.emptyResponse||this.scribeRecommendationImpression(e)):(this.scribe({action:"refresh"},e,{event_info:i.refreshType}),this.scribeRecommendationResults(e,"newer"))},this.scribeEmptyRecommendationsResponse=function(t,e){this.scribeRecommendations(t,o.merge(e,{emptyResponse:!0}))},this.scribeRecommendationImpression=function(t){this.scribe("impression",t)},this.scribeLinkClicks=function(t,e){this.scribe({component:"user_recommendations",element:e.element,action:"click"})},this.after("initialize",function(){this.on(document,"uiDidDismissUserRecommendation",this.scribeDismissRecommendation),this.on(document,"uiDidGetRecommendations",this.scribeRecommendations),this.on(document,"uiGotEmptyRecommendationsResponse",this.scribeEmptyRecommendationsResponse),this.on(document,"uiClickedWtfLink",this.scribeLinkClicks)})}var n=i(111),r=i(138),a=i(141),o=i(126);t.exports=n(s,r,a)}).call(e,i(10))},1087:function(t,e,i){"use strict";function s(){this.scribeImpression=function(t,e){this.scribe(r.merge({},e.scribeContext,{element:"wtf_import_prompt",action:"impression"}))},this.scribeToggle=function(t,e){this.scribe(r.merge({},e.scribeContext,{element:"wtf_import_prompt",action:e.action}),{section:"other_services"})},this.after("initialize",function(){this.on("uiWTFImportPromptImpression",this.scribeImpression),this.on("uiWTFImportPromptToggle",this.scribeToggle)})}var n=i(111),r=i(126),a=i(142);t.exports=n(s,a)},1098:function(t,e,i){"use strict";var s=i(111),n=i(445);t.exports=s(n)},1128:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({promotedTweetSelector:".promoted-tweet:not(.scribed)",promotedTweetForImpressionsSelector:".promoted-tweet:not(.presented)",scrollThrottle:100}),this.processTweets=function(){var t=a.getGlobalNavHeight(),i=this.$node.find(this.attr.promotedTweetSelector),s=this.$node.find(this.attr.promotedTweetForImpressionsSelector),n=i.filter(function(i,s){return a.isContainedInViewport(this.$window,e(s),t,0)}.bind(this)),r=s.filter(function(i,s){return a.isPartiallyContainedInViewport({$container:this.$window,$element:e(s),topThreshold:t,fractionInViewport:0})}.bind(this));if(r.length){r.addClass("presented");var o=r.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweets1pxInViewport",{items:o})}if(n.length){n.addClass("scribed");var c=n.map(function(t,i){return{impressionId:e(i).data("impression-id"),disclosureType:e(i).data("disclosure-type")}}).get();this.trigger("uiPromotedTweetsInViewport",{items:c})}},this.after("initialize",function(t,i){this.$window=e(window),i&&i.inOverlay?this.on(t,"scroll resize",r.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)):this.on(document,"scroll resize",r.throttle(this.processTweets.bind(this),this.attr.scrollThrottle)),this.on(document,"uiSwiftLoaded uiPageVisible uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems",this.processTweets)})}var n=i(111),r=i(126),a=i(177);t.exports=n(s)}).call(e,i(10))},1130:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({scribeMediaGridResults:!1,mediaGalleryScribeComponent:"media_gallery",keepUnrenderedMediaItems:!1,numMediaItemsToKeep:30,gridNumRowsLimit:2,gridRowHeight:180,gridMargin:1.5,gridRowRatio:2.5,gridPanoramaRatio:3,gridContainerSelector:"#stream-items-id",mediaSelector:".AdaptiveStreamGridImage",mediaOverlaySelector:".media-overlay",requiredAttrsForGallery:["data-resolved-url-large","data-source-url","data-tweet-id","data-status-id","data-height","data-width","class"]}),this.renderAll=function(){clearTimeout(this.renderDelay),this.renderDelay=setTimeout(this.render.bind(this),20)},this.render=function(){this.currentRow=this.getCurrentRow();var t=this.getUnprocessedMedia();if(!t.length)return void this.scribeResults();for(var e=0,i=0,s=[],n=0;n<t.length;n++){if(this.attr.gridNumRowsLimit&&this.currentRow>this.attr.gridNumRowsLimit){if(this.attr.keepUnrenderedMediaItems&&n<this.attr.numMediaItemsToKeep){this.processHiddenMedia(t.eq(n));continue}t.slice(n).remove();break}var r=t.eq(n);!e&&(e=parseInt(r.attr("data-height")));var a=this.scaleGridMedia(r,e);isNaN(a)?r.remove():(i+=a,s.push(r),i/e>=this.attr.gridRowRatio&&(this.renderGridRow(s,i,e),this.currentRow++,this.setCurrentRow(),i=0,e=0,s=[]))}this.renderLastRow(),this.scribeResults()},this.getCurrentRow=function(){var t=parseInt(this.$node.attr("data-processed-rows"));return t?this.currentRow=t:this.currentRow=1,this.currentRow},this.setCurrentRow=function(){this.$node.attr("data-processed-rows",this.currentRow)},this.processHiddenMedia=function(t){var i=this.attr.requiredAttrsForGallery,s=[];e.each(t[0].attributes,function(){this.specified&&i.indexOf(this.name)<0&&s.push(this.name)}),s.forEach(function(e){t.removeAttr(e)}),t.attr("data-grid-processed","true"),t.hide(),t.empty()},this.scaleGridMedia=function(t,e,i){var s=parseInt(t.attr("data-height")),n=parseInt(t.attr("data-width")),r=e/s*n,a=s/n;return n/s>this.attr.gridPanoramaRatio&&(t.attr("data-pano","true"),r=e*this.attr.gridPanoramaRatio,a=1/this.attr.gridPanoramaRatio),t.attr({"scaled-width":r,"height-width-ratio":a}),i&&(t.height(e),t.width(r)),r},this.renderGridRow=function(t,i,s){var n=this.currentGridWidth-t.length*this.attr.gridMargin,r=n/i,a=s*r;e.each(t,function(t,i){var s=e(i),n=parseInt(s.attr("scaled-width"))*r,o=n/this.currentGridWidth;s.height(a),s.width(Math.round(n)),s.attr("scaled-width-ratio",o),s.attr("data-grid-processed","true"),s.addClass("enabled"),0===t&&s.addClass("clear"),1===this.currentRow&&s.addClass("first-row"),s.removeAttr("scaled-width"),this.renderMediaImage(s)}.bind(this))},this.renderLastRow=function(){var t=this.getUnprocessedMedia();t.length&&t.each(function(t,i){var s=e(i);this.scaleGridMedia(s,this.attr.gridRowHeight,!0),this.renderMediaImage(s),s.addClass("enabled")}.bind(this))},this.renderMediaImage=function(t){if(!t.attr("data-loaded")){var e=function(e){this.loadMediaSuccess(t,e)}.bind(this),i=function(){this.loadMediaFail(t)}.bind(this);r.load(t.attr("data-resolved-url-small"),e,i)}},this.loadMediaSuccess=function(t,e){if(t.attr("data-pano")){var i=Math.round(t.height()/parseInt(t.attr("data-height"))*parseInt(t.attr("data-width")));e.width(i),e.css("margin-left",(t.width()-i)/2)}t.hide().prepend(e).fadeIn(),t.attr("data-loaded",!0)},this.loadMediaFail=function(t){this.markFailedMedia(t),t.remove()},this.markFailedMedia=function(t){var e=void 0;if(t.hasClass("clear")){if(e=t.next(this.attr.mediaSelector),!e.length)return}else for(e=t.prev(this.attr.mediaSelector);e.length&&!e.hasClass("clear");)e=e.prev(this.attr.mediaSelector);e.attr("data-grid-processed","false"),e.nextAll(this.attr.mediaSelector).attr("data-grid-processed","false"),e.nextAll(this.attr.mediaSelector).removeClass("clear"),clearTimeout(this.resetTimer),this.resetTimer=setTimeout(this.render.bind(this),50)},this.possiblyResizeMediaDimensions=function(){var t=this.currentGridWidth,e=this.getGridWidth(),i=this.getProcessedMedia();if(e===t||!i.length)return void this.trigger("uiMediaGridDidNotResize");for(var s=0;s<i.length;s++){var n=i.eq(s),r=parseFloat(n.attr("scaled-width-ratio")),a=parseFloat(n.attr("height-width-ratio"));if(!isNaN(r)&&!isNaN(a)){var o=r*e,c=a*o;if(n.attr("data-pano")){var h=n.find("img"),l=h.width()/t*e;h.width(Math.round(l)),h.css("margin-left",(o-l)/2)}n.width(Math.floor(o)),n.height(Math.floor(c))}}this.trigger("uiMediaGridDidResize"),this.currentGridWidth=e},this.getGridWidth=function(){var t=this.select("gridContainerSelector").length&&this.select("gridContainerSelector")[0];return Math.floor(t.getBoundingClientRect().width)},this.getMedia=function(){return this.select("mediaSelector")},this.getProcessedMedia=function(){return this.getMedia().filter('[data-grid-processed="true"]');
},this.getUnprocessedMedia=function(){return this.getMedia().filter(':not([data-grid-processed="true"])')},this.getUnscribedMedia=function(){return this.getMedia().filter(':not([data-scribed="true"])[data-grid-processed="true"]')},this.openGallery=function(t){t.preventDefault(),t.stopPropagation();var i=e(t.target).closest(this.attr.mediaSelector),s=i.hasClass("video");this.trigger(t.target,"uiOpenGallery");var n=i.attr("data-url"),r=s?"video":"photo",a={url:n,mediaType:r,scribeContext:{component:this.attr.mediaGalleryScribeComponent}};this.trigger("uiMediaThumbnailClick",a)},this.scribeResults=function(){if(this.attr.scribeMediaGridResults){var t=this.getUnscribedMedia(),i={thumbnails:[],scribeContext:{component:this.attr.mediaGalleryScribeComponent}};e.each(t,function(t,s){i.thumbnails.push(e(s).attr("data-url")),e(s).attr("data-scribed",!0)}),this.trigger("uiMediaGalleryResults",i)}},this.after("initialize",function(){this.select("gridContainerSelector").length&&(this.possiblyResizeMediaDimensions(),this.currentGridWidth=this.getGridWidth(),this.render(),this.on("uiHasInjectedOldTimelineItems",this.renderAll),this.on("click",{mediaOverlaySelector:this.openGallery}),this.on(window,"resize",n.throttle(this.possiblyResizeMediaDimensions.bind(this),100)))})}var n=i(126),r=i(475);t.exports=s}).call(e,i(10))},1151:function(t,e,i){"use strict";function s(t){n({endpoint:t.timeline_url});var e=a.mixin(o,m,c,h,l,d,u);r.attachTo(document,t),e.attachTo(".GridTimeline",t,{containerSelector:".GridTimeline-items",itemsSelector:".GridTimeline-items",timelineEndSelector:".GridTimeline-end",errorMessageSelector:".GridTimeline-footer .Icon--fail",streamItemsSelector:".GridTimeline-items",streamUserSelector:".GridTimeline-items .js-actionable-user",disableProfilePopup:null==t.disableProfilePopup||t.disableProfilePopup,selectedClass:"is-selected",selectedSelector:".js-stream-item.is-selected",firstItemSelector:".js-stream-item:first-child",profileCardSelector:".ProfileCard",itemType:"user",eventData:{scribeContext:{component:"user"}}})}var n=i(811),r=i(833),a=i(856),o=i(863),c=i(440),h=i(443),l=i(942),d=i(943),u=i(1152),m=i(872);t.exports=s},1152:function(t,e){"use strict";function i(){this.defaultAttrs({navigationContainerSelector:".GridTimeline-items > .Grid, .GridTimeline-items > .ScrollBump",navigationContainerCellSelector:".Grid-cell"}),this.around("next",function(t,e){var i=e.closest(this.attr.navigationContainerCellSelector).next().find(this.attr.genericItemSelector).first();return 0===i.length&&(i=e.closest(this.attr.navigationContainerSelector).next().find(this.attr.genericItemSelector).first()),i}),this.around("prev",function(t,e){var i=e.closest(this.attr.navigationContainerCellSelector).prev().find(this.attr.genericItemSelector).first();return 0===i.length&&(i=e.closest(this.attr.navigationContainerSelector).prev().find(this.attr.genericItemSelector).last()),i})}t.exports=i},1171:function(t,e,i){"use strict";var s=i(161),n=i(1523);t.exports=function(t){s(t),n.attachTo(".advanced-search",t)}},1172:function(t,e,i){"use strict";var s=i(1173),n=i(1174),r=i(1186),a=i(1187),o=i(1188),c=i(1189),h=i(514);t.exports=function(t){n(t),h.attachTo(".AdaptiveStreamImageGallery",s(t,t.scribeComponent.imageGallery)),h.attachTo(".AdaptiveStreamUserGallery",s(t,t.scribeComponent.userGallery)),r.attachTo(document),o.attachTo(".AdaptiveRelatedSearches",s(t,t.scribeComponent.relatedSearches)),a.attachTo(document),c.attachTo(".AdaptiveSpellingSuggestion",s(t,t.scribeComponent.spellingSuggestion))}},1173:function(t,e,i){"use strict";function s(t,e){return n.merge(t,{eventData:{scribeContext:{component:e}}})}var n=i(126);t.exports=s},1174:function(t,e,i){"use strict";var s=i(126),n=i(1173),r=i(1175),a=i(161),o=i(193),c=i(1178),h=i(1067),l=i(1151),d=i(1081),u=i(134),m=i(926),p=i(1180),f=i(1181),g=i(1182),v=i(992),w=i(1183),S=i(1098),T=i(393),y=i(508),b=i(514),C=i(991),k=i(1184),D=i(1185),I=i(178);t.exports=function(t){var e="#timeline";a(t),o(t),u.scribeData.search_details=t.searchDetails,h(t),d(".WhoToFollow",t,{wtfOptions:t.wtfOptions,dashboardSelector:".WhoToFollow-users",successClass:"is-visible"}),T.attachTo(document,{containerSelector:e}),y.attachTo(document),C.attachTo(e,{eventData:t.eventData}),v.attachTo(e,{page:"search"}),m.attachTo(document,t),t.isUserGridTimeline?l(s.merge(t,{disableProfilePopup:!1,showWithIdSelector:".ProfileCard-bg, .ProfileCard-avatarLink, .ProfileNameTruncated-link, .ProfileCard-screennameLink, .js-user-profile-link",timeline_url:t.searchEndpoint})):t.isMediaGridTimeline?c(s.merge(t,{itemsSelector:"#stream-items-id",tweetWithReplyDialogSelector:".grid-tweet",gridNumRowsLimit:null,mediaGalleryScribeComponent:"tweet"}),t.searchEndpoint,"tweet"):r(t),k.attachTo("#search-settings-dialog"),p.attachTo(document),f.attachTo(document),b.attachTo(".AdaptiveFiltersBar-target",n(t,"search_filter")),S.attachTo(".SearchExtrasDropdown"),w.attachTo(".SearchExtrasDropdown-savedSearch",t),b.attachTo(".SearchExtrasDropdown-target",n(t,"search_dropdown")),g.attachTo(document),D.attachTo(".SidebarFilterModule",n(t,t.scribeComponent.sidebarFilterModule)),b.attachTo(".SidebarFilterModule-advanced",n(t,t.scribeComponent.sidebarFilterModule)),I.setGlobalNavSelector(".SearchNavigation")}},1175:function(t,e,i){"use strict";function s(t){var e=p.merge(t,{endpoint:t.searchEndpoint});n(e),r("#timeline",p.merge(e,{excludeUserActions:!0,scrollTopOnNewItemsClick:!1}));var i=[h,l];c.attachTo(document),o.mixin.apply(this,i).attachTo("#timeline",e,{tweetItemSelector:".tweet, .grid-tweet"}),u.mixin(h).attachTo("#timeline",e);var s=".show-popup-with-id, .js-user-profile-link",f=".ProfileCard-bg, .ProfileCard-avatarLink, .ProfileNameTruncated-link, .ProfileCard-screennameLink";a.mixin(d).attachTo("#timeline",e,{scribeMediaGridResults:!0,mediaGalleryScribeComponent:e.scribeComponent.imageGallery,keepUnrenderedMediaItems:!0,gridMargin:1,gridContainerSelector:".AdaptiveStreamImageGallery-images",showWithIdSelector:s+", "+f,tweetWithReplyDialogSelector:".grid-tweet",itemType:"tweet",eventData:{scribeContext:{component:"tweet"}}}),m.attachTo("#timeline",e)}var n=i(811),r=i(814),a=i(1176),o=i(875),c=i(878),h=i(1177),l=i(1014),d=i(1012),u=i(504),m=i(1128),p=i(126);t.exports=s},1176:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({separationModuleSelector:".AdaptiveSearchTimeline-separationModule",prevToModuleClass:"AdaptiveSearchTimeline-beforeModule"}),this.setPrevToModuleClass=function(){this.select("separationModuleSelector").prev().addClass(this.attr.prevToModuleClass)},this.initialItemsDisplayed=function(){for(var t=this.select("genericItemSelector"),i=[],s=function(t,s){if(e(s).data("item-type")){var n=e(s),r=this.findFirstItemContent(n);!r.length&&n.is(this.attr.streamItemContentsSelector)&&(r=n);var a=this.interactionData(r);switch(a.itemType){case"user":i.push(a)}}}.bind(this),n=0,r=t.length;n<r;n++)s(n,t[n]);this.reportUsers(i)},this.reportItemsDisplayed=function(t,e){var i=[];e.items.forEach(function(t){switch(t.itemType){case"user":i.push(t)}}),this.reportUsers(i)},this.reportUsers=function(t){this.trigger("uiUsersDisplayed",{users:t})},this.after("initialize",function(){this.setPrevToModuleClass(),this.initialItemsDisplayed(),this.on("uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.reportItemsDisplayed),this.on("uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.setPrevToModuleClass)})}var n=i(855),r=i(872),a=i(1130),o=i(443),c=i(138),h=i(1177);t.exports=n.mixin(s,r,a,o,c,h)}).call(e,i(10))},1177:function(t,e){"use strict";function i(){this.defaultAttrs({userGallerySelector:".AdaptiveStreamUserGallery",userGalleryItemSelector:".AdaptiveStreamUserGallery-user"}),this.getItemPosition=function(t){var e=t.closest(this.attr.userGalleryItemSelector);if(!(e.length>0))return-1;var i=e.closest(this.attr.userGallerySelector),s=i.find(this.attr.userGalleryItemSelector),n=s.index(e);return n!==-1?n:void 0}}t.exports=i},1178:function(t,e,i){"use strict";function s(t,e,i){var s=n.merge(t,{endpoint:e,itemType:i,eventData:{scribeContext:{component:i}}});a("#timeline",s),r(s),c.attachTo("#timeline",s,{tweetItemSelector:".grid-tweet"}),o.attachTo("#timeline",s)}var n=i(126),r=i(811),a=i(814),o=i(1179),c=i(875);t.exports=s},1179:function(t,e,i){"use strict";function s(){this.defaultAttrs({itemType:"media"}),this.after("initialize",function(){this.attr.allowInfiniteScroll||this.hideMoreSpinner()})}var n=i(856),r=i(863),a=i(1130),o=i(872),c=i(440);t.exports=n.mixin(s,o,r,c,a)},1180:function(t,e,i){"use strict";function s(){this.getSettings=function(t,e){this.get({url:this.getUrl(),success:"dataSearchSettingsGetSuccess",error:"dataSearchSettingsGetError",useOAuthSessionAuth:!0})},this.saveSettings=function(t,e){this.post({acceptEmptyStringAsJsonResponse:!0,url:this.saveUrl(),data:e,dataType:this.DATA_TYPES.TEXT,success:"dataSearchSettingsSaveSuccess",error:"dataSearchSettingsSaveError",useOAuthSessionAuth:!0,contentType:this.CONTENT_TYPES.APPLICATION_JSON})},this.getUserId=function(){return a.user.id},this.getUrl=function(){return"https://api.twitter.com/1.1/strato/column/User/"+this.getUserId()+"/search/searchSafetyReadonly"},this.saveUrl=function(){return"https://api.twitter.com/1.1/strato/column/User/"+this.getUserId()+"/search/searchSafety"},this.after("initialize",function(){this.on("uiSearchSettingsGet",this.getSettings),this.on("uiSearchSettingsSave",this.saveSettings)})}var n=i(111),r=i(240),a=i(136);t.exports=n(s,r)},1181:function(t,e,i){"use strict";function s(){this.scribeImpression=function(t,e){this.scribe({component:"safe_search_settings",action:"impression"})},this.scribeSettingsSave=function(t,e){this.scribe({component:"safe_search_settings",element:"filtering",action:e.optInFiltering?"on":"off"}),this.scribe({component:"safe_search_settings",element:"blocking",action:e.optInBlocking?"on":"off"})},this.after("initialize",function(){this.on("uiSearchSettingsDialogOpen",this.scribeImpression),this.on("uiSearchSettingsSave",this.scribeSettingsSave)})}var n=i(111),r=i(142);t.exports=n(s,r)},1182:function(t,e,i){"use strict";function s(){this.scribeSidebarFilterClicked=function(t,e){this.scribe("navigate",e,{url:e.url})},this.scribeSidebarModuleCollapseClicked=function(t,e){this.scribe("collapse",e)},this.scribeSidebarModuleExpandClicked=function(t,e){this.scribe("expand",e)},this.after("initialize",function(){this.on("uiSearchSidebarFilterClicked",this.scribeSidebarFilterClicked),this.on("uiSearchSidebarModuleCollapsed",this.scribeSidebarModuleCollapseClicked),this.on("uiSearchSidebarModuleExpanded",this.scribeSidebarModuleExpandClicked)})}var n=i(111),r=i(142);t.exports=n(s,r)},1183:function(t,e,i){"use strict";function s(){this.defaultAttrs({saveOrRemoveSelector:".js-toggle-saved-search-link",addSavedSearchSelector:".js-add-search",removeSavedSearchSelector:".js-remove-search",textLabelSelector:".SearchExtrasDropdown-label",addSavedSearchClass:"js-add-search",removeSavedSearchClass:"js-remove-search",dataIdAttr:"data-id",dataOriginalTitleAttr:"data-original-title",query:""}),this.addSavedSearch=function(t,e){t.preventDefault(),this.trigger("uiAddSavedSearch",{query:this.attr.query,scribeComponent:"search_dropdown"}),this.trigger("uiCloseDropdowns")},this.removeSavedSearch=function(t,e){t.preventDefault(),this.savedSearchId=this.select("removeSavedSearchSelector").attr(this.attr.dataIdAttr),this.trigger("uiRemoveSavedSearch",{id:this.savedSearchId,scribeComponent:"search_dropdown"}),this.trigger("uiCloseDropdowns")},this.savedSearchAdded=function(t,e){this.trigger("uiShowMessage",{message:"Saved search added successfully."}),this.select("saveOrRemoveSelector").removeClass(this.attr.addSavedSearchClass).addClass(this.attr.removeSavedSearchClass).attr(this.attr.dataIdAttr,e.id_str).attr(this.attr.dataOriginalTitleAttr,"Remove this saved search"),this.select("textLabelSelector").text("Remove this saved search")},this.savedSearchRemoved=function(t,e){this.trigger("uiShowMessage",{message:"Saved search removed successfully."}),this.savedSearchId=this.select("removeSavedSearchSelector").attr(this.attr.dataIdAttr),e.id_str===this.savedSearchId&&(this.select("saveOrRemoveSelector").removeClass(this.attr.removeSavedSearchClass).addClass(this.attr.addSavedSearchClass).attr(this.attr.dataOriginalTitleAttr,"Save this search").removeAttr(this.attr.dataIdAttr),this.select("textLabelSelector").text("Save this search"))},this.after("initialize",function(){this.on("click",{addSavedSearchSelector:this.addSavedSearch,removeSavedSearchSelector:this.removeSavedSearch}),this.on(document,"dataAddedSavedSearch",this.savedSearchAdded),this.on(document,"dataRemovedSavedSearch",this.savedSearchRemoved)})}var n=i(111);i(123);t.exports=n(s)},1184:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({triggerSelector:".js-openSearchSettings",confirmSelector:".js-confirm",cancelSelector:".js-close",filteringCheckboxSelector:".SearchSettingsDialog-toggleInput--sensitive",blockingCheckboxSelector:".SearchSettingsDialog-toggleInput--accounts",settingsDropdownSubtextSelector:".SearchExtrasDropdown-settings .SearchExtrasDropdown-subtext"}),this.before("openWhenTriggerClicked",function(t,e){this.trigger(document,"uiSearchSettingsDialogOpen")}),this.setupDialog=function(t,e){this.state={optInFiltering:e.optInFiltering,optInBlocking:e.optInBlocking},this.dom.$filteringCheckbox.prop("checked",this.state.optInFiltering).prop("disabled",!1),this.dom.$blockingCheckbox.prop("checked",this.state.optInBlocking).prop("disabled",!1),this.updateDropdownSubtext()},this.updateDropdownSubtext=function(){var t="";this.state.optInFiltering&&this.state.optInBlocking?t=a.BOTH_ENABLED:!this.state.optInFiltering&&this.state.optInBlocking?t=a.FILTERING_DISABLED:this.state.optInFiltering&&!this.state.optInBlocking?t=a.BLOCKING_DISABLED:this.state.optInFiltering||this.state.optInBlocking||(t=a.BOTH_DISABLED),this.dom.$settingsDropdownSubtext.text(t)},this.onConfirm=function(t,e){var i=this.dom.$filteringCheckbox.is(":checked"),s=this.dom.$blockingCheckbox.is(":checked");this.state.optInFiltering===i&&this.state.optInBlocking===s||this.trigger(document,"uiSearchSettingsSave",{optInFiltering:i,optInBlocking:s}),this.close()},this.onCancel=function(t,e){this.dom.$filteringCheckbox.prop("checked",this.state.optInFiltering),this.dom.$blockingCheckbox.prop("checked",this.state.optInBlocking)},this.onSaveSuccess=function(){this.trigger("uiShowMessage",{message:"Search settings updating..."}),setTimeout(this.refreshPage,1e3)},this.refreshPage=function(){document.location.reload(!0)},this.onSaveError=function(){this.trigger("uiShowError",{message:"Something went wrong. Give it a minute, then try again."})},this.after("initialize",function(){this.state={},this.dom={$filteringCheckbox:this.select("filteringCheckboxSelector"),$blockingCheckbox:this.select("blockingCheckboxSelector"),$settingsDropdownSubtext:e(this.attr.settingsDropdownSubtextSelector)},this.on(document,"uiSwiftLoaded uiPageChanged","uiSearchSettingsGet"),this.on(document,"dataSearchSettingsGetSuccess",this.setupDialog),this.on(document,"dataSearchSettingsSaveSuccess",this.onSaveSuccess),this.on(document,"dataSearchSettingsSaveError",this.onSaveError),this.on("click",{confirmSelector:this.onConfirm,cancelSelector:this.onCancel})})}var n=i(111),r=i(163);i(123);t.exports=n(r,s);var a={BOTH_ENABLED:"Hiding sensitive content",FILTERING_DISABLED:"Safe search off",BLOCKING_DISABLED:"Blocked and muted accounts included",BOTH_DISABLED:"Showing sensitive content"}}).call(e,i(10))},1185:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({collapseToggleSelector:".SidebarFilterModule-toggle",filterSelectSelector:".SidebarFilterModule-select"}),this.onChangeFilter=function(t){var i=e(t.target);this.trigger("uiNavigate",{href:i.val()}),this.trigger("uiSearchSidebarFilterClicked",{scribeContext:{element:i.find("option:selected").attr("data-nav")},url:i.val()})},this.onToggleClick=function(t){var i=e(t.target);this.$node.hasClass("is-collapsed")?(i.text("Hide"),this.$node.removeClass("is-collapsed"),this.trigger("uiSearchSidebarModuleExpanded")):(i.text("Show"),this.$node.addClass("is-collapsed"),this.trigger("uiSearchSidebarModuleCollapsed")),i.blur()},this.after("initialize",function(){this.on("change",{filterSelectSelector:this.onChangeFilter}),this.on("click",{collapseToggleSelector:this.onToggleClick})})}var n=i(111);i(123);t.exports=n(s)}).call(e,i(10))},1186:function(t,e,i){"use strict";function s(){this.scribeRelatedSearchClicked=function(t,e){this.scribe("search",e)},this.after("initialize",function(){this.on("uiRelatedSearchClicked",this.scribeRelatedSearchClicked)})}var n=i(111),r=i(142);t.exports=n(s,r)},1187:function(t,e,i){"use strict";function s(){this.scribeOriginalQueryClicked=function(t,e){this.scribe({element:"spelling_revert",action:"search"},e)},this.scribeCorrectedQueryClicked=function(t,e){this.scribe({element:"corrected_query",action:"search"},e)},this.after("initialize",function(){this.on("uiSpellingSuggestionOriginalQueryClicked",this.scribeOriginalQueryClicked),this.on("uiSpellingSuggestionCorrectedQueryClicked",this.scribeCorrectedQueryClicked)})}var n=i(111),r=i(142);t.exports=n(s,r)},1188:function(t,e,i){"use strict";function s(){this.defaultAttrs({relatedSearchSelector:".AdaptiveRelatedSearches-item"}),this.onClickRelatedSearch=function(){this.trigger("uiRelatedSearchClicked")},this.after("initialize",function(){this.on("click",{relatedSearchSelector:this.onClickRelatedSearch})})}var n=i(111);t.exports=n(s)},1189:function(t,e,i){"use strict";function s(){this.defaultAttrs({originalQuerySelector:".AdaptiveSpellingSuggestion-originalQuery",correctedQuerySelector:".AdaptiveSpellingSuggestion-correctedQuery"}),this.onClickOriginalQuery=function(){this.trigger("uiSpellingSuggestionOriginalQueryClicked")},this.onClickCorrectedQuery=function(){this.trigger("uiSpellingSuggestionCorrectedQueryClicked")},this.after("initialize",function(){this.on("click",{originalQuerySelector:this.onClickOriginalQuery,correctedQuerySelector:this.onClickCorrectedQuery})})}var n=i(111);t.exports=n(s)},1190:function(t,e,i){(function(e){"use strict";var s=i(161),n=i(1067),r=i(1191),a=i(313),o=i(328),c=i(1192),h=i(1193),l=i(126);t.exports=function(t){s(t),n(l.merge(t,{src:"search-home",show_context:!1})),r.attachTo("#search-home-form",l.merge(t,{magnifyingGlassSelector:".search-btn",inputFieldSelector:"#search-home-input",eventData:{scribeContext:{component:"search_home_searchbox",element:""}}})),c.attachTo("#search-home-form",{noTeardown:!0}),o.attachTo("#search-home-form",{inputSelector:"#search-home-input"}),a.attachTo("#search-home-form",{inputSelector:"#search-home-input",nextElementSelector:".search-btn",accountsShortcutShow:!0,autocompleteAccounts:!1,parseHashflags:!0,typeaheadSrc:"SEARCH_BOX",datasourceRenders:[["recentSearches",["recentSearches"]],["savedSearches",["savedSearches"]],["topics",["topics"]],["accounts",["accounts"]]],deciders:l.merge(t.typeaheadData,{showSocialContext:t.typeaheadData.showSearchAccountSocialContext}),eventData:{scribeContext:{component:"search_home_searchbox",element:"typeahead"}}}),h.attachTo("#search-operators-dialog"),e("#search-home-input").focus()}}).call(e,i(10))},1193:function(t,e,i){"use strict";function s(){this.defaultAttrs({searchOperatorsLinkSelector:".search-operators-link"}),this.after("initialize",function(){this.on(document,"click",{searchOperatorsLinkSelector:this.open})})}var n=i(111),r=i(163);t.exports=n(s,r)},1194:function(t,e,i){"use strict";var s=i(1173),n=i(1174),r=i(1195),a=i(1186),o=i(1187),c=i(1196),h=i(1188),l=i(1189),d=i(514);t.exports=function(t){n(t),r.attachTo(document),c.attachTo(".AdaptiveNewsLargeImageHeadline",s(t,t.scribeComponent.newsGalleryLarge),{descriptionSelector:".AdaptiveNewsLargeImageHeadline-description",imageSelector:".AdaptiveNewsLargeImageHeadline-image",titleSelector:".AdaptiveNewsLargeImageHeadline-title"}),d.attachTo(".AdaptiveNewsLargeImageHeadline",s(t,t.scribeComponent.newsGalleryLarge)),c.attachTo(".AdaptiveNewsSmallImageHeadline",s(t,t.scribeComponent.newsGallerySmall),{descriptionSelector:".AdaptiveNewsSmallImageHeadline-description",imageSelector:".AdaptiveNewsSmallImageHeadline-image",titleSelector:".AdaptiveNewsSmallImageHeadline-title"}),d.attachTo(".AdaptiveNewsSmallImageHeadline",s(t,t.scribeComponent.newsGallerySmall)),c.attachTo(".AdaptiveNewsTextHeadline",s(t,t.scribeComponent.newsGalleryText),{descriptionSelector:".AdaptiveNewsTextHeadline-description",titleSelector:".AdaptiveNewsTextHeadline-title"}),d.attachTo(".AdaptiveNewsTextHeadline",s(t,t.scribeComponent.newsGalleryText)),c.attachTo(".AdaptiveNewsRelatedHeadlines",s(t,t.scribeComponent.relatedHeadlines),{descriptionSelector:".AdaptiveNewsRelatedHeadlines-description",titleSelector:".AdaptiveNewsRelatedHeadlines-title"}),d.attachTo(".AdaptiveNewsRelatedHeadlines",s(t,t.scribeComponent.relatedHeadlines)),d.attachTo(".AdaptiveStreamImageGallery",s(t,t.scribeComponent.imageGallery)),d.attachTo(".AdaptiveStreamUserGallery",s(t,t.scribeComponent.userGallery)),a.attachTo(document),h.attachTo(".AdaptiveRelatedSearches",s(t,t.scribeComponent.relatedSearches)),o.attachTo(document),l.attachTo(".AdaptiveSpellingSuggestion",s(t,t.scribeComponent.spellingSuggestion))}},1195:function(t,e,i){"use strict";function s(){this.scribeHeadlineImpression=function(t,e){this.scribe("impression",e)},this.scribeOpenLink=function(t,e){this.scribe("open_link",e)},this.after("initialize",function(){this.on("uiAdaptiveNewsHeadlineLoaded",this.scribeHeadlineImpression),this.on("uiAdaptiveNewsHeadlineLinkOpened",this.scribeOpenLink)})}var n=i(111),r=i(142);t.exports=n(s,r)},1196:function(t,e,i){"use strict";function s(){this.defaultAttrs({descriptionSelector:null,imageSelector:null,titleSelector:null,userSelector:".AdaptiveNewsHeadlineDetails-user"}),this.onClickLink=function(t){this.trigger("uiAdaptiveNewsHeadlineLinkOpened",{scribeContext:{element:t}})},this.after("initialize",function(_,t){a.attachTo(this.select("userSelector"),t,{itemType:"user",showWithIdSelector:this.attr.userSelector}),this.on("click",{descriptionSelector:this.onClickLink.bind(this,"description"),imageSelector:this.onClickLink.bind(this,"image"),titleSelector:this.onClickLink.bind(this,"title")}),this.trigger("uiAdaptiveNewsHeadlineLoaded")})}var n=i(111),r=i(440);t.exports=n(s);var a=n(r)},1197:function(t,e,i){"use strict";var s=i(1173),n=i(1174),r=i(1198),a=i(1199),o=i(514);t.exports=function(t){n(t),r.attachTo(document),a.attachTo(".AdaptiveGeoPlace--yelp",s(t,t.scribeComponent.placeYelp),{buttonSelector:".AdaptiveGeoPlace-linkButton"}),o.attachTo(".AdaptiveGeoPlace--yelp",s(t,t.scribeComponent.placeYelp)),a.attachTo(".AdaptiveGeoPlace--foursquare",s(t,t.scribeComponent.placeFoursquare),{buttonSelector:".AdaptiveGeoPlace-linkButton"}),o.attachTo(".AdaptiveGeoPlace--foursquare",s(t,t.scribeComponent.placeFoursquare)),o.attachTo(".AdaptiveStreamImageGallery",s(t,t.scribeComponent.imageGallery))}},1198:function(t,e,i){"use strict";function s(){this.scribeHeadlineImpression=function(t,e){this.scribe("impression",e)},this.scribeOpenLink=function(t,e){this.scribe("open_link",e)},this.after("initialize",function(){this.on("uiAdaptivePlaceLoaded",this.scribeHeadlineImpression),this.on("uiAdaptivePlaceLinkOpened",this.scribeOpenLink)})}var n=i(111),r=i(142);t.exports=n(s,r)},1199:function(t,e,i){"use strict";function s(){this.defaultAttrs({buttonSelector:".AdaptiveGeoPlace-linkButton"}),this.onClickLink=function(t){this.trigger("uiAdaptivePlaceLinkOpened",{scribeContext:{element:t}})},this.after("initialize",function(_,t){this.on("click",{buttonSelector:this.onClickLink.bind(this,"button")}),this.trigger("uiAdaptivePlaceLoaded")})}var n=i(111);t.exports=n(s)},1200:function(t,e,i){"use strict";var s=i(1174),n=i(111),r=i(126),a=i(440),o=n(a);t.exports=function(t){var e=".AdaptiveStickersPage-title";s(t),o.attachTo(e,r.merge(t,{itemType:"user"}))}},1523:function(t,e,i){(function(e){"use strict";function s(){this.defaultAttrs({loggedIn:!1,language:e("html").attr("lang")||"en",searchButtonSelector:".primary-btn",searchFormSelector:".twitter-form",geoPickerSelector:".geo-picker",geoPickerParentSelector:".geo .txt",datePickerSelector:".input-daterange",sinceInputSelector:".input-since",untilInputSelector:".input-until"}),this.serializeAdvancedForm=function(){var t=this.select("searchFormSelector"),e=t.serializeArray(),i=[];return e.forEach(function(e){var s=e.value,n=t.find("select[name=within]").val()+t.find("input:radio[name=units]:checked").val();if(s){var r=void 0,a=void 0,o=void 0,c=void 0;switch(e.name){case"ands":i.push(s);break;case"ors":a=s.split(" "),o=this.sanitize(a),i.push(o.join(" OR "));break;case"phrase":i.push('"'+s+'"');break;case"nots":a=("-"+s).split(" "),o=this.sanitize(a),i.push(o.join(" -"));break;case"tag":a=("#"+s.replace(/#+/g,"")).split(" "),o=this.sanitize(a),i.push(o.join(" OR #"));break;case"from":a=("from:"+s.replace(/@+/g,"")).split(" "),o=this.sanitize(a),i.push(o.join(" OR from:"));break;case"to":a=("to:"+s.replace(/@+/g,"")).split(" "),o=this.sanitize(a),i.push(o.join(" OR to:"));break;case"ref":a=("@"+s.replace(/@+/g,"")).split(" "),o=this.sanitize(a),i.push(o.join(" OR @"));break;case"near":i.push('near:"'+s+'" within:'+n);break;case"place_id":r=t.find(".geo-picker .geo-status").text(),i.push('near:"'+r+'" within:'+n);break;case"since":c=this.getUTCyyyymmdd(this.select("sinceInputSelector").datepicker("getUTCDate")),i.push("since:"+c);break;case"until":c=this.getUTCyyyymmdd(this.select("untilInputSelector").datepicker("getUTCDate")),i.push("until:"+c)}}},this),i.join(" ").trim()},this.searchLanguage=function(){var t=this.select("searchFormSelector").find("#lang").val();return"all"===t?"":t},this.sanitize=function(t){return t.filter(function(t){return""!==t})},this.searchFormSubmit=function(t){t.preventDefault();var e=this.serializeAdvancedForm();if(e){this.trigger("uiSearchQuery",{query:e,source:"search"});var i={q:e,src:"typd"};i.l=this.searchLanguage();var s="/search?"+a.encode(i);this.trigger("uiNavigate",{href:s})}},this.initializeGeoPicker=function(){var t=this.select("geoPickerParentSelector");r.attachTo(this.select("geoPickerSelector"),{eventData:{scribeContext:{element:"geo_picker"}},parentSelector:this.attr.geoPickerParentSelector}),this.trigger(t,"uiPrepareGeoPicker")},this.initializeDatePicker=function(){this.select("datePickerSelector").datepicker({format:"yyyy-mm-dd",startDate:"2006-03-21",endDate:new Date,autoclose:!0,todayHighlight:!0,language:this.attr.language})},this.setUntilMinDate=function(t){this.select("untilInputSelector").datepicker("setStartDate",t.date)},this.setSinceMaxDate=function(t){this.select("sinceInputSelector").datepicker("setEndDate",t.date)},this.getUTCyyyymmdd=function(t){var e=t.getUTCFullYear().toString(),i=(t.getUTCMonth()+1).toString(),s=i[1]?i:"0"+i[0];t=t.getUTCDate().toString();var n=t[1]?t:"0"+t[0];return e+"-"+s+"-"+n},this.after("initialize",function(){this.attr.loggedIn&&this.initializeGeoPicker(),this.initializeDatePicker(),this.on("click",{searchButtonSelector:this.searchFormSubmit}),this.on(this.select("searchFormSelector"),"submit",this.searchFormSubmit),this.on(this.select("sinceInputSelector").datepicker(),"changeDate",this.setUntilMinDate),this.on(this.select("untilInputSelector").datepicker(),"changeDate",this.setSinceMaxDate)})}var n=i(111),r=i(1495),a=i(248),o=i(1524);t.exports=n(s,o)}).call(e,i(10))},1524:function(t,e,i){(function(e){"use strict";function s(){var t=e("html").attr("lang"),i="rtl"===e("body").attr("dir");e.fn.datepicker.dates[t]={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",rtl:i}}i(123);i(1525),t.exports=s}).call(e,i(10))},1525:function(t,e,i){!function(e){var s=i(10);e(s),t.exports=s}(function(t){function e(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var t=new Date;return e(t.getFullYear(),t.getMonth(),t.getDate())}function s(t){return function(){return this[t].apply(this,arguments)}}function n(e,i){function s(_,t){return t.toLowerCase()}var n,r=t(e).data(),a={},o=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var c in r)i.test(c)&&(n=c.replace(o,s),a[n]=r[c]);return a}function r(e){var i={};if(m[e]||(e=e.split("-")[0],m[e])){var s=m[e];return t.each(u,function(t,e){e in s&&(i[e]=s[e])}),i}}var a=t(window),o=function(){var e={get:function(t){return this.slice(t)[0]},contains:function(t){for(var e=t&&t.valueOf(),i=0,s=this.length;i<s;i++)if(this[i].valueOf()===e)return i;return-1},remove:function(t){this.splice(t,1)},replace:function(e){e&&(t.isArray(e)||(e=[e]),this.clear(),this.push.apply(this,e))},clear:function(){this.splice(0)},copy:function(){var t=new o;return t.replace(this),t}};return function(){var i=[];return i.push.apply(i,arguments),t.extend(i,e),i}}(),c=function(e,s){this.dates=new o,this.viewDate=i(),this.focusDate=null,this._process_options(s),this.element=t(e),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=t(p.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(t,e){return parseInt(e)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_process_options:function(e){this._o=t.extend({},this._o,e);var i=this.o=t.extend({},this._o),s=i.language;switch(m[s]||(s=s.split("-")[0],m[s]||(s=d.language)),i.language=s,i.startView){case 2:case"decade":i.startView=2;break;case 1:case"year":i.startView=1;break;default:i.startView=0}switch(i.minViewMode){case 1:case"months":i.minViewMode=1;break;case 2:case"years":i.minViewMode=2;break;default:i.minViewMode=0}i.startView=Math.max(i.startView,i.minViewMode),i.multidate!==!0&&(i.multidate=Number(i.multidate)||!1,i.multidate!==!1?i.multidate=Math.max(0,i.multidate):i.multidate=1),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var n=p.parseFormat(i.format);i.startDate!==-(1/0)&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=p.parseDate(i.startDate,n,i.language):i.startDate=-(1/0)),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=p.parseDate(i.endDate,n,i.language):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],t.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=t.map(i.daysOfWeekDisabled,function(t){return parseInt(t,10)});var r=String(i.orientation).toLowerCase().split(/\s+/g),a=i.orientation.toLowerCase();if(r=t.grep(r,function(t){return/^auto|left|right|top|bottom$/.test(t)}),i.orientation={x:"auto",y:"auto"},a&&"auto"!==a)if(1===r.length)switch(r[0]){case"top":case"bottom":i.orientation.y=r[0];
break;case"left":case"right":i.orientation.x=r[0]}else a=t.grep(r,function(t){return/^left|right$/.test(t)}),i.orientation.x=a[0]||"auto",a=t.grep(r,function(t){return/^top|bottom$/.test(t)}),i.orientation.y=a[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(t){for(var e,i,s,n=0;n<t.length;n++)e=t[n][0],2===t[n].length?(i=void 0,s=t[n][1]):3===t[n].length&&(i=t[n][1],s=t[n][2]),e.on(s,i)},_unapplyEvents:function(t){for(var e,i,s,n=0;n<t.length;n++)e=t[n][0],2===t[n].length?(s=void 0,i=t[n][1]):3===t[n].length&&(s=t[n][1],i=t[n][2]),e.off(i,s)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:t.proxy(this.show,this),keyup:t.proxy(function(e){t.inArray(e.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:t.proxy(this.keydown,this)}],[this.component,{click:t.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:t.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:t.proxy(function(t){this._focused_from=t.target},this)}],[this.element,{blur:t.proxy(function(t){this._focused_from=t.target},this)}]),this._secondaryEvents=[[this.picker,{click:t.proxy(this.click,this)}],[t(window),{resize:t.proxy(this.place,this)}],[t(document),{"mousedown touchstart":t.proxy(function(t){this.element.is(t.target)||this.element.find(t.target).length||this.picker.is(t.target)||this.picker.find(t.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(e,i){var s=i||this.dates.get(-1),n=this._utc_to_local(s);this.element.trigger({type:e,date:n,dates:t.map(this.dates,this._utc_to_local),format:t.proxy(function(t,e){0===arguments.length?(t=this.dates.length-1,e=this.o.format):"string"==typeof t&&(e=t,t=this.dates.length-1),e=e||this.o.format;var i=this.dates.get(t);return p.formatDate(i,e,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(t){return t&&new Date(t.getTime()+6e4*t.getTimezoneOffset())},_local_to_utc:function(t){return t&&new Date(t.getTime()-6e4*t.getTimezoneOffset())},_zero_time:function(t){return t&&new Date(t.getFullYear(),t.getMonth(),t.getDate())},_zero_utc_time:function(t){return t&&new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},getDates:function(){return t.map(this.dates,this._utc_to_local)},getUTCDates:function(){return t.map(this.dates,function(t){return new Date(t)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var e=t.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t.map(e,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:s("setDates"),setUTCDate:s("setUTCDates"),setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t).change():this.component&&this.element.find("input").val(t).change()},getFormattedDate:function(e){void 0===e&&(e=this.o.format);var i=this.o.language;return t.map(this.dates,function(t){return p.formatDate(t,e,i)}).join(this.o.multidateSeparator)},setStartDate:function(t){this._process_options({startDate:t}),this.update(),this.updateNavArrows()},setEndDate:function(t){this._process_options({endDate:t}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(t){this._process_options({daysOfWeekDisabled:t}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var e=this.picker.outerWidth(),i=this.picker.outerHeight(),s=10,n=a.width(),r=a.height(),o=a.scrollTop(),c=parseInt(this.element.parents().filter(function(){return"auto"!==t(this).css("z-index")}).first().css("z-index"))+10,h=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),u=h.left,m=h.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(u-=e-d)):(this.picker.addClass("datepicker-orient-left"),h.left<0?u-=h.left-s:h.left+e>n&&(u=n-e-s));var p,f,g=this.o.orientation.y;"auto"===g&&(p=-o+h.top-i,f=o+r-(h.top+l+i),g=Math.max(p,f)===f?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?m+=l:m-=i+parseInt(this.picker.css("padding-top")),this.picker.css({top:m,left:u,zIndex:c})}},_allow_update:!0,update:function(){if(this._allow_update){var e=this.dates.copy(),i=[],s=!1;arguments.length?(t.each(arguments,t.proxy(function(t,e){e instanceof Date&&(e=this._local_to_utc(e)),i.push(e)},this)),s=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=t.map(i,t.proxy(function(t){return p.parseDate(t,this.o.format,this.o.language)},this)),i=t.grep(i,t.proxy(function(t){return t<this.o.startDate||t>this.o.endDate||!t},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),s?this.setValue():i.length&&String(e)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&e.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var t=this.o.weekStart,e="<tr>";if(this.o.calendarWeeks){var i='<th class="cw">&nbsp;</th>';e+=i,this.picker.find(".datepicker-days thead tr:first-child").prepend(i)}for(;t<this.o.weekStart+7;)e+='<th class="dow">'+m[this.o.language].daysMin[t++%7]+"</th>";e+="</tr>",this.picker.find(".datepicker-days thead").append(e)},fillMonths:function(){for(var t="",e=0;e<12;)t+='<span class="month">'+m[this.o.language].monthsShort[e++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(e){e&&e.length?this.range=t.map(e,function(t){return t.valueOf()}):delete this.range,this.fill()},getClassNames:function(e){var i=[],s=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),r=new Date;return e.getUTCFullYear()<s||e.getUTCFullYear()===s&&e.getUTCMonth()<n?i.push("old"):(e.getUTCFullYear()>s||e.getUTCFullYear()===s&&e.getUTCMonth()>n)&&i.push("new"),this.focusDate&&e.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&e.getUTCFullYear()===r.getFullYear()&&e.getUTCMonth()===r.getMonth()&&e.getUTCDate()===r.getDate()&&i.push("today"),this.dates.contains(e)!==-1&&i.push("active"),(e.valueOf()<this.o.startDate||e.valueOf()>this.o.endDate||t.inArray(e.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&i.push("disabled"),this.range&&(e>this.range[0]&&e<this.range[this.range.length-1]&&i.push("range"),t.inArray(e.valueOf(),this.range)!==-1&&i.push("selected")),i},fill:function(){var i,s=new Date(this.viewDate),n=s.getUTCFullYear(),r=s.getUTCMonth(),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),o=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,h=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=m[this.o.language].today||m.en.today||"",d=m[this.o.language].clear||m.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(m[this.o.language].months[r]+" "+n),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(d).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var u=e(n,r-1,28),f=p.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(f),u.setUTCDate(f-(u.getUTCDay()-this.o.weekStart+7)%7);var g=new Date(u);g.setUTCDate(g.getUTCDate()+42),g=g.valueOf();for(var v,w=[];u.valueOf()<g;){if(u.getUTCDay()===this.o.weekStart&&(w.push("<tr>"),this.o.calendarWeeks)){var S=new Date(+u+(this.o.weekStart-u.getUTCDay()-7)%7*864e5),T=new Date(Number(S)+(11-S.getUTCDay())%7*864e5),y=new Date(Number(y=e(T.getUTCFullYear(),0,1))+(11-y.getUTCDay())%7*864e5),b=(T-y)/864e5/7+1;w.push('<td class="cw">'+b+"</td>")}if(v=this.getClassNames(u),v.push("day"),this.o.beforeShowDay!==t.noop){var C=this.o.beforeShowDay(this._utc_to_local(u));void 0===C?C={}:"boolean"==typeof C?C={enabled:C}:"string"==typeof C&&(C={classes:C}),C.enabled===!1&&v.push("disabled"),C.classes&&(v=v.concat(C.classes.split(/\s+/))),C.tooltip&&(i=C.tooltip)}v=t.unique(v),w.push('<td class="'+v.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+u.getUTCDate()+"</td>"),u.getUTCDay()===this.o.weekEnd&&w.push("</tr>"),u.setUTCDate(u.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var k=this.picker.find(".datepicker-months").find("th:eq(1)").text(n).end().find("span").removeClass("active");t.each(this.dates,function(t,e){e.getUTCFullYear()===n&&k.eq(e.getUTCMonth()).addClass("active")}),(n<a||n>c)&&k.addClass("disabled"),n===a&&k.slice(0,o).addClass("disabled"),n===c&&k.slice(h+1).addClass("disabled"),w="",n=10*parseInt(n/10,10);var D=this.picker.find(".datepicker-years").find("th:eq(1)").text(n+"-"+(n+9)).end().find("td");n-=1;for(var I,M=t.map(this.dates,function(t){return t.getUTCFullYear()}),x=-1;x<11;x++)I=["year"],x===-1?I.push("old"):10===x&&I.push("new"),t.inArray(n,M)!==-1&&I.push("active"),(n<a||n>c)&&I.push("disabled"),w+='<span class="'+I.join(" ")+'">'+n+"</span>",n+=1;D.html(w)},updateNavArrows:function(){if(this._allow_update){var t=new Date(this.viewDate),e=t.getUTCFullYear(),i=t.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()&&i<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()&&i>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&e<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&e>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(i){i.preventDefault();var s,n,r,a=t(i.target).closest("span, td, th");if(1===a.length)switch(a[0].nodeName.toLowerCase()){case"th":switch(a[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var o=p.modes[this.viewMode].navStep*("prev"===a[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var c=new Date;c=e(c.getFullYear(),c.getMonth(),c.getDate(),0,0,0),this.showMode(-2);var h="linked"===this.o.todayBtn?null:"view";this._setDate(c,h);break;case"clear":var l;this.isInput?l=this.element:this.component&&(l=this.element.find("input")),l&&l.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":a.is(".disabled")||(this.viewDate.setUTCDate(1),a.is(".month")?(r=1,n=a.parent().find("span").index(a),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(n),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(e(s,n,r))):(r=1,n=0,s=parseInt(a.text(),10)||0,this.viewDate.setUTCFullYear(s),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(e(s,n,r))),this.showMode(-1),this.fill());break;case"td":a.is(".day")&&!a.is(".disabled")&&(r=parseInt(a.text(),10)||1,s=this.viewDate.getUTCFullYear(),n=this.viewDate.getUTCMonth(),a.is(".old")?0===n?(n=11,s-=1):n-=1:a.is(".new")&&(11===n?(n=0,s+=1):n+=1),this._setDate(e(s,n,r)))}this.picker.is(":visible")&&this._focused_from&&t(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(t){var e=this.dates.contains(t);if(t?e!==-1?this.dates.remove(e):this.dates.push(t):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(t,e){e&&"date"!==e||this._toggle_multidate(t&&new Date(t)),e&&"view"!==e||(this.viewDate=t&&new Date(t)),this.fill(),this.setValue(),this._trigger("changeDate");var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),!this.o.autoclose||e&&"date"!==e||this.hide()},moveMonth:function(t,e){if(t){if(!e)return t;var i,s,n=new Date(t.valueOf()),r=n.getUTCDate(),a=n.getUTCMonth(),o=Math.abs(e);if(e=e>0?1:-1,1===o)s=e===-1?function(){return n.getUTCMonth()===a}:function(){return n.getUTCMonth()!==i},i=a+e,n.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var c=0;c<o;c++)n=this.moveMonth(n,e);i=n.getUTCMonth(),n.setUTCDate(r),s=function(){return i!==n.getUTCMonth()}}for(;s();)n.setUTCDate(--r),n.setUTCMonth(i);return n}},moveYear:function(t,e){return this.moveMonth(t,12*e)},dateWithinRange:function(t){return t>=this.o.startDate&&t<=this.o.endDate},keydown:function(t){if(this.picker.is(":not(:visible)"))return void(27===t.keyCode&&this.show());var e,s,n,r=!1,a=this.focusDate||this.viewDate;switch(t.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),t.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;e=37===t.keyCode?-1:1,t.ctrlKey?(s=this.moveYear(this.dates.get(-1)||i(),e),n=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(s=this.moveMonth(this.dates.get(-1)||i(),e),n=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.dates.get(-1)||i()),s.setUTCDate(s.getUTCDate()+e),n=new Date(a),n.setUTCDate(a.getUTCDate()+e)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;e=38===t.keyCode?-1:1,t.ctrlKey?(s=this.moveYear(this.dates.get(-1)||i(),e),n=this.moveYear(a,e),this._trigger("changeYear",this.viewDate)):t.shiftKey?(s=this.moveMonth(this.dates.get(-1)||i(),e),n=this.moveMonth(a,e),this._trigger("changeMonth",this.viewDate)):(s=new Date(this.dates.get(-1)||i()),s.setUTCDate(s.getUTCDate()+7*e),n=new Date(a),n.setUTCDate(a.getUTCDate()+7*e)),this.dateWithinRange(s)&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),t.preventDefault());break;case 32:break;case 13:a=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(a),r=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(t.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(r){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var o;this.isInput?o=this.element:this.component&&(o=this.element.find("input")),o&&o.change()}},showMode:function(t){t&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+t))),this.picker.find(">div").hide().filter(".datepicker-"+p.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var h=function(e,i){this.element=t(e),this.inputs=t.map(i.inputs,function(t){return t.jquery?t[0]:t}),delete i.inputs,t(this.inputs).datepicker(i).bind("changeDate",t.proxy(this.dateUpdated,this)),this.pickers=t.map(this.inputs,function(e){return t(e).data("datepicker")}),this.updateDates()};h.prototype={updateDates:function(){this.dates=t.map(this.pickers,function(t){return t.getUTCDate()}),this.updateRanges()},updateRanges:function(){var e=t.map(this.dates,function(t){return t.valueOf()});t.each(this.pickers,function(t,i){i.setRange(e)})},dateUpdated:function(e){if(!this.updating){this.updating=!0;var i=t(e.target).data("datepicker"),s=i.getUTCDate(),n=t.inArray(e.target,this.inputs),r=this.inputs.length;if(n!==-1){if(t.each(this.pickers,function(t,e){e.getUTCDate()||e.setUTCDate(s)}),s<this.dates[n])for(;n>=0&&s<this.dates[n];)this.pickers[n--].setUTCDate(s);else if(s>this.dates[n])for(;n<r&&s>this.dates[n];)this.pickers[n++].setUTCDate(s);this.updateDates(),delete this.updating}}},remove:function(){t.map(this.pickers,function(t){t.remove()}),delete this.element.data().datepicker}};var l=t.fn.datepicker;t.fn.datepicker=function(e){var i=Array.apply(null,arguments);i.shift();var s;return this.each(function(){var a=t(this),o=a.data("datepicker"),l="object"==typeof e&&e;if(!o){var u=n(this,"date"),m=t.extend({},d,u,l),p=r(m.language),f=t.extend({},d,p,u,l);if(a.is(".input-daterange")||f.inputs){var g={inputs:f.inputs||a.find("input").toArray()};a.data("datepicker",o=new h(this,t.extend(f,g)))}else a.data("datepicker",o=new c(this,f))}if("string"==typeof e&&"function"==typeof o[e]&&(s=o[e].apply(o,i),void 0!==s))return!1}),void 0!==s?s:this};var d=t.fn.datepicker.defaults={autoclose:!1,beforeShowDay:t.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},u=t.fn.datepicker.locale_opts=["format","rtl","weekStart"];t.fn.datepicker.Constructor=c;var m=t.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(t){return t%4===0&&t%100!==0||t%400===0},getDaysInMonth:function(t,e){return[31,p.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][e]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(t){var e=t.replace(this.validParts,"\0").split("\0"),i=t.match(this.validParts);if(!e||!e.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:e,parts:i}},parseDate:function(i,s,n){function r(){var t=this.slice(0,d[h].length),e=d[h].slice(0,t.length);return t===e}if(i){if(i instanceof Date)return i;"string"==typeof s&&(s=p.parseFormat(s));var a,o,h,l=/([\-+]\d+)([dmwy])/,d=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,h=0;h<d.length;h++)switch(a=l.exec(d[h]),o=parseInt(a[1]),a[2]){case"d":i.setUTCDate(i.getUTCDate()+o);break;case"m":i=c.prototype.moveMonth.call(c.prototype,i,o);break;case"w":i.setUTCDate(i.getUTCDate()+7*o);break;case"y":i=c.prototype.moveYear.call(c.prototype,i,o)}return e(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}d=i&&i.match(this.nonpunctuation)||[],i=new Date;var u,f,g={},v=["yyyy","yy","M","MM","m","mm","d","dd"],w={yyyy:function(t,e){return t.setUTCFullYear(e)},yy:function(t,e){return t.setUTCFullYear(2e3+e)},m:function(t,e){if(isNaN(t))return t;for(e-=1;e<0;)e+=12;for(e%=12,t.setUTCMonth(e);t.getUTCMonth()!==e;)t.setUTCDate(t.getUTCDate()-1);return t},d:function(t,e){return t.setUTCDate(e)}};w.M=w.MM=w.mm=w.m,w.dd=w.d,i=e(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var S=s.parts.slice();if(d.length!==S.length&&(S=t(S).filter(function(e,i){return t.inArray(i,v)!==-1}).toArray()),d.length===S.length){var T;for(h=0,T=S.length;h<T;h++){if(u=parseInt(d[h],10),a=S[h],isNaN(u))switch(a){case"MM":f=t(m[n].months).filter(r),u=t.inArray(f[0],m[n].months)+1;break;case"M":f=t(m[n].monthsShort).filter(r),u=t.inArray(f[0],m[n].monthsShort)+1}g[a]=u}var y,b;for(h=0;h<v.length;h++)b=v[h],b in g&&!isNaN(g[b])&&(y=new Date(i),w[b](y,g[b]),isNaN(y)||(i=y))}return i}},formatDate:function(e,i,s){if(!e)return"";"string"==typeof i&&(i=p.parseFormat(i));var n={d:e.getUTCDate(),D:m[s].daysShort[e.getUTCDay()],DD:m[s].days[e.getUTCDay()],m:e.getUTCMonth()+1,M:m[s].monthsShort[e.getUTCMonth()],MM:m[s].months[e.getUTCMonth()],yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear()};n.dd=(n.d<10?"0":"")+n.d,n.mm=(n.m<10?"0":"")+n.m,e=[];for(var r=t.extend([],i.separators),a=0,o=i.parts.length;a<=o;a++)r.length&&e.push(r.shift()),e.push(n[i.parts[a]]);return e.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",t.fn.datepicker.DPGlobal=p,t.fn.datepicker.noConflict=function(){return t.fn.datepicker=l,this},t(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(e){var i=t(this);i.data("datepicker")||(e.preventDefault(),i.datepicker("show"))}),t(function(){t('[data-provide="datepicker-inline"]').datepicker()})})}});
//# sourceMappingURL=15.pages_search.en.951795273b46c469daa6.js.map